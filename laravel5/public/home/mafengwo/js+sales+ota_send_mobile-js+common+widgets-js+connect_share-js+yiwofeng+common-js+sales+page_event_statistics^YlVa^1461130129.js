(function(d){var a={id:"",phone:""};var b='<div class="popup-box popup-save hide" id="btn_save_send_dialog">';b+='    <a href="javascript:;" id="btn_close_send" class="close-btn"><i></i></a>';b+='    <div class="hd">';b+="    </div>";b+='    <div class="bd">';b+="        <dl>";b+="            <dt>手机</dt>";b+="            <dd>";b+='                <input id="send_mobile" type="tel" data-original="0" class="inp-txt" autocomplete="off">';b+="            </dd>";b+="        </dl>";b+='        <dl class="btn-action">';b+="            <dd>";b+='                <a id="btn_submit_send" href="javascript:;" class="btn">发送</a>';b+="            </dd>";b+="        </dl>";b+="    </div>";b+="</div>";function c(f,h,e){var g={};g.ota_id=f;g.order_id=h;g.mobile=e;$("body").append(b);$("#send_mobile").val(g.mobile);if(window.__mfw_uid===0){show_login();return}$("#btn_save_send_dialog").fadeIn();$("#btn_close_send").bind("click",function(){$("#btn_save_send_dialog").fadeOut()});$("#btn_submit_send").bind("click",function(){g.new_mobile=$.trim($("#send_mobile").val());if(g.new_mobile.length==0){mTinyAlert("请输入正确的手机号！");return}g.act="otaSendOrder2mobile";$.post("/sales/ajax.php",g,function(k){if(k.ret==1){mTinyAlert("发送成功");$("#btn_save_send_dialog").fadeOut()}else{mTinyAlert("发送失败")}},"json")})}d.otaSendMobile=c})(window);var swfobject=function(){var Z="undefined",P="object",B="Shockwave Flash",h="ShockwaveFlash.ShockwaveFlash",W="application/x-shockwave-flash",K="SWFObjectExprInst",G=window,g=document,N=navigator,f=[],H=[],Q=null,L=null,T=null,S=false,C=false;var a=function(){var l=typeof g.getElementById!=Z&&typeof g.getElementsByTagName!=Z&&typeof g.createElement!=Z&&typeof g.appendChild!=Z&&typeof g.replaceChild!=Z&&typeof g.removeChild!=Z&&typeof g.cloneNode!=Z,t=[0,0,0],n=null;if(typeof N.plugins!=Z&&typeof N.plugins[B]==P){n=N.plugins[B].description;if(n){n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");t[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);t[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);t[2]=/r/.test(n)?parseInt(n.replace(/^.*r(.*)$/,"$1"),10):0}}else{if(typeof G.ActiveXObject!=Z){var o=null,s=false;try{o=new ActiveXObject(h+".7")}catch(k){try{o=new ActiveXObject(h+".6");t=[6,0,21];o.AllowScriptAccess="always"}catch(k){if(t[0]==6){s=true}}if(!s){try{o=new ActiveXObject(h)}catch(k){}}}if(!s&&o){try{n=o.GetVariable("$version");if(n){n=n.split(" ")[1].split(",");t=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(k){}}}}var v=N.userAgent.toLowerCase(),j=N.platform.toLowerCase(),r=/webkit/.test(v)?parseFloat(v.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,i=false,q=j?/win/.test(j):/win/.test(v),m=j?/mac/.test(j):/mac/.test(v);
/*@cc_on i=true;@if(@_win32)q=true;@elif(@_mac)m=true;@end@*/
return{w3cdom:l,pv:t,webkit:r,ie:i,win:q,mac:m}}();var e=function(){if(!a.w3cdom){return}J(I);if(a.ie&&a.win){try{g.write("<script id=__ie_ondomload defer=true src=//:><\/script>");var i=c("__ie_ondomload");if(i){i.onreadystatechange=function(){if(this.readyState=="complete"){this.parentNode.removeChild(this);V()}}}}catch(j){}}if(a.webkit&&typeof g.readyState!=Z){Q=setInterval(function(){if(/loaded|complete/.test(g.readyState)){V()}},10)}if(typeof g.addEventListener!=Z){g.addEventListener("DOMContentLoaded",V,null)}M(V)}();function V(){if(S){return}if(a.ie&&a.win){var m=Y("span");try{var l=g.getElementsByTagName("body")[0].appendChild(m);l.parentNode.removeChild(l)}catch(n){return}}S=true;if(Q){clearInterval(Q);Q=null}var j=f.length;for(var k=0;k<j;k++){f[k]()}}function J(i){if(S){i()}else{f[f.length]=i}}function M(j){if(typeof G.addEventListener!=Z){G.addEventListener("load",j,false)}else{if(typeof g.addEventListener!=Z){g.addEventListener("load",j,false)}else{if(typeof G.attachEvent!=Z){G.attachEvent("onload",j)}else{if(typeof G.onload=="function"){var i=G.onload;G.onload=function(){i();j()}}else{G.onload=j}}}}}function I(){var l=H.length;for(var j=0;j<l;j++){var m=H[j].id;if(a.pv[0]>0){var k=c(m);if(k){H[j].width=k.getAttribute("width")?k.getAttribute("width"):"0";H[j].height=k.getAttribute("height")?k.getAttribute("height"):"0";if(O(H[j].swfVersion)){if(a.webkit&&a.webkit<312){U(k)}X(m,true)}else{if(H[j].expressInstall&&!C&&O("6.0.65")&&(a.win||a.mac)){D(H[j])}else{d(k)}}}}else{X(m,true)}}}function U(m){var k=m.getElementsByTagName(P)[0];if(k){var p=Y("embed"),r=k.attributes;if(r){var o=r.length;for(var n=0;n<o;n++){if(r[n].nodeName.toLowerCase()=="data"){p.setAttribute("src",r[n].nodeValue)}else{p.setAttribute(r[n].nodeName,r[n].nodeValue)}}}var q=k.childNodes;if(q){var s=q.length;for(var l=0;l<s;l++){if(q[l].nodeType==1&&q[l].nodeName.toLowerCase()=="param"){p.setAttribute(q[l].getAttribute("name"),q[l].getAttribute("value"))}}}m.parentNode.replaceChild(p,m)}}function F(i){if(a.ie&&a.win&&O("8.0.0")){G.attachEvent("onunload",function(){var k=c(i);if(k){for(var j in k){if(typeof k[j]=="function"){k[j]=function(){}}}k.parentNode.removeChild(k)}})}}function D(j){C=true;var o=c(j.id);if(o){if(j.altContentId){var l=c(j.altContentId);if(l){L=l;T=j.altContentId}}else{L=b(o)}if(!(/%$/.test(j.width))&&parseInt(j.width,10)<310){j.width="310"}if(!(/%$/.test(j.height))&&parseInt(j.height,10)<137){j.height="137"}g.title=g.title.slice(0,47)+" - Flash Player Installation";var n=a.ie&&a.win?"ActiveX":"PlugIn",k=g.title,m="MMredirectURL="+G.location+"&MMplayerType="+n+"&MMdoctitle="+k,p=j.id;if(a.ie&&a.win&&o.readyState!=4){var i=Y("div");p+="SWFObjectNew";i.setAttribute("id",p);o.parentNode.insertBefore(i,o);o.style.display="none";G.attachEvent("onload",function(){o.parentNode.removeChild(o)})}R({data:j.expressInstall,id:K,width:j.width,height:j.height},{flashvars:m},p)}}function d(j){if(a.ie&&a.win&&j.readyState!=4){var i=Y("div");j.parentNode.insertBefore(i,j);i.parentNode.replaceChild(b(j),i);j.style.display="none";G.attachEvent("onload",function(){j.parentNode.removeChild(j)})}else{j.parentNode.replaceChild(b(j),j)}}function b(n){var m=Y("div");if(a.win&&a.ie){m.innerHTML=n.innerHTML}else{var k=n.getElementsByTagName(P)[0];if(k){var o=k.childNodes;if(o){var j=o.length;for(var l=0;l<j;l++){if(!(o[l].nodeType==1&&o[l].nodeName.toLowerCase()=="param")&&!(o[l].nodeType==8)){m.appendChild(o[l].cloneNode(true))}}}}}return m}function R(AE,AC,q){var p,t=c(q);if(typeof AE.id==Z){AE.id=q}if(a.ie&&a.win){var AD="";for(var z in AE){if(AE[z]!=Object.prototype[z]){if(z=="data"){AC.movie=AE[z]}else{if(z.toLowerCase()=="styleclass"){AD+=' class="'+AE[z]+'"'}else{if(z!="classid"){AD+=" "+z+'="'+AE[z]+'"'}}}}}var AB="";for(var y in AC){if(AC[y]!=Object.prototype[y]){AB+='<param name="'+y+'" value="'+AC[y]+'" />'}}t.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+AD+">"+AB+"</object>";F(AE.id);p=c(AE.id)}else{if(a.webkit&&a.webkit<312){var AA=Y("embed");AA.setAttribute("type",W);for(var x in AE){if(AE[x]!=Object.prototype[x]){if(x=="data"){AA.setAttribute("src",AE[x])}else{if(x.toLowerCase()=="styleclass"){AA.setAttribute("class",AE[x])}else{if(x!="classid"){AA.setAttribute(x,AE[x])}}}}}for(var w in AC){if(AC[w]!=Object.prototype[w]){if(w!="movie"){AA.setAttribute(w,AC[w])}}}t.parentNode.replaceChild(AA,t);p=AA}else{var s=Y(P);s.setAttribute("type",W);for(var v in AE){if(AE[v]!=Object.prototype[v]){if(v.toLowerCase()=="styleclass"){s.setAttribute("class",AE[v])}else{if(v!="classid"){s.setAttribute(v,AE[v])}}}}for(var u in AC){if(AC[u]!=Object.prototype[u]&&u!="movie"){E(s,u,AC[u])}}t.parentNode.replaceChild(s,t);p=s}}return p}function E(k,i,j){var l=Y("param");l.setAttribute("name",i);l.setAttribute("value",j);k.appendChild(l)}function c(i){return g.getElementById(i)}function Y(i){return g.createElement(i)}function O(k){var j=a.pv,i=k.split(".");i[0]=parseInt(i[0],10);i[1]=parseInt(i[1],10);i[2]=parseInt(i[2],10);return(j[0]>i[0]||(j[0]==i[0]&&j[1]>i[1])||(j[0]==i[0]&&j[1]==i[1]&&j[2]>=i[2]))?true:false}function A(m,j){if(a.ie&&a.mac){return}var l=g.getElementsByTagName("head")[0],k=Y("style");k.setAttribute("type","text/css");k.setAttribute("media","screen");if(!(a.ie&&a.win)&&typeof g.createTextNode!=Z){k.appendChild(g.createTextNode(m+" {"+j+"}"))}l.appendChild(k);if(a.ie&&a.win&&typeof g.styleSheets!=Z&&g.styleSheets.length>0){var i=g.styleSheets[g.styleSheets.length-1];if(typeof i.addRule==P){i.addRule(m,j)}}}function X(k,i){var j=i?"visible":"hidden";if(S){c(k).style.visibility=j}else{A("#"+k,"visibility:"+j)}}return{registerObject:function(l,i,k){if(!a.w3cdom||!l||!i){return}var j={};j.id=l;j.swfVersion=i;j.expressInstall=k?k:false;H[H.length]=j;X(l,false)},getObjectById:function(l){var i=null;if(a.w3cdom&&S){var j=c(l);if(j){var k=j.getElementsByTagName(P)[0];if(!k||(k&&typeof j.SetVariable!=Z)){i=j}else{if(typeof k.SetVariable!=Z){i=k}}}}return i},embedSWF:function(n,u,r,t,j,m,k,p,s){if(!a.w3cdom||!n||!u||!r||!t||!j){return}r+="";t+="";if(O(j)){X(u,false);var q=(typeof s==P)?s:{};q.data=n;q.width=r;q.height=t;var o=(typeof p==P)?p:{};if(typeof k==P){for(var l in k){if(k[l]!=Object.prototype[l]){if(typeof o.flashvars!=Z){o.flashvars+="&"+l+"="+k[l]}else{o.flashvars=l+"="+k[l]}}}}J(function(){R(q,o,u);if(q.id==u){X(u,true)}})}else{if(m&&!C&&O("6.0.65")&&(a.win||a.mac)){X(u,false);J(function(){var i={};i.id=i.altContentId=u;i.width=r;i.height=t;i.expressInstall=m;D(i)})}}},getFlashPlayerVersion:function(){return{major:a.pv[0],minor:a.pv[1],release:a.pv[2]}},hasFlashPlayerVersion:O,createSWF:function(k,j,i){if(a.w3cdom&&S){return R(k,j,i)}else{return undefined}},createCSS:function(j,i){if(a.w3cdom){A(j,i)}},addDomLoadEvent:J,addLoadEvent:M,getQueryParamValue:function(m){var l=g.location.search||g.location.hash;if(m==null){return l}if(l){var k=l.substring(1).split("&");for(var j=0;j<k.length;j++){if(k[j].substring(0,k[j].indexOf("="))==m){return k[j].substring((k[j].indexOf("=")+1))}}}return""},expressInstallCallback:function(){if(C&&L){var i=c(K);if(i){i.parentNode.replaceChild(L,i);if(T){X(T,true);if(a.ie&&a.win){L.style.display="block"}}L=null;T=null;C=false}}}}}();(function(g,c){function f(q,m){var p,l=[];for(var n=0;n<q.length;++n){p=k[q[n]]||h(q[n]);if(!p){throw"module definition dependecy not found: "+q[n]}l.push(p)}m.apply(null,l)}function b(n,l,m){if(typeof n!=="string"){throw"invalid module definition, module id must be defined and be a string"}if(l===c){throw"invalid module definition, dependencies must be specified"}if(m===c){throw"invalid module definition, definition function must be specified"}f(l,function(){k[n]=m.apply(null,arguments)})}function d(l){return !!k[l]}function h(l){var p=g;var m=l.split(/[.\/]/);for(var e=0;e<m.length;++e){if(!p[m[e]]){return}p=p[m[e]]}return p}function a(p){for(var m=0;m<p.length;m++){var n=g;var q=p[m];var l=q.split(/[.\/]/);for(var e=0;e<l.length-1;++e){if(n[l[e]]===c){n[l[e]]={}}n=n[l[e]]}n[l[l.length-1]]=k[q]}}var k={};b("moxie/core/utils/Basic",[],function(){var z=function(n){var l;if(n===l){return"undefined"}else{if(n===null){return"null"}else{if(n.nodeType){return"node"}}}return{}.toString.call(n).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()};var D=function(l){var e;q(arguments,function(r,n){if(n>0){q(r,function(u,t){if(u!==e){if(z(l[t])===z(u)&&!!~p(z(u),["array","object"])){D(l[t],u)}else{l[t]=u}}})}});return l};var q=function(H,u){var J,G,l,F;if(H){try{J=H.length}catch(I){J=F}if(J===F){for(G in H){if(H.hasOwnProperty(G)){if(u(H[G],G)===false){return}}}}else{for(l=0;l<J;l++){if(u(H[l],l)===false){return}}}}};var m=function(e){var l;if(!e||z(e)!=="object"){return true}for(l in e){return false}return true};var w=function(l,G){function u(n){if(z(l[n])==="function"){l[n](function(r){++n<e&&!r?u(n):G(r)})}}var F=0,e=l.length;if(z(G)!=="function"){G=function(){}}if(!l||!l.length){G()}u(F)};var E=function(G,n){var F=0,l=G.length,u=new Array(l);q(G,function(r,s){r(function(t){if(t){return n(t)}var H=[].slice.call(arguments);H.shift();u[s]=H;F++;if(F===l){u.unshift(null);n.apply(this,u)}})})};var p=function(u,l){if(l){if(Array.prototype.indexOf){return Array.prototype.indexOf.call(l,u)}for(var F=0,s=l.length;F<s;F++){if(l[F]===u){return F}}}return -1};var C=function(l,u){var s=[];if(z(l)!=="array"){l=[l]}if(z(u)!=="array"){u=[u]}for(var e in l){if(p(l[e],u)===-1){s.push(l[e])}}return s.length?s:false};var B=function(s,l){var n=[];q(s,function(r){if(p(r,l)!==-1){n.push(r)}});return n.length?n:null};var y=function(r){var l,s=[];for(l=0;l<r.length;l++){s[l]=r[l]}return s};var v=function(){var l=0;return function(e){var u=(new Date).getTime().toString(32),s;for(s=0;s<5;s++){u+=Math.floor(Math.random()*65535).toString(32)}return(e||"o_")+u+(l++).toString(32)}}();var A=function(l){if(!l){return l}return String.prototype.trim?String.prototype.trim.call(l):l.toString().replace(/^\s*/,"").replace(/\s*$/,"")};var x=function(r){if(typeof r!=="string"){return r}var l={t:1099511627776,g:1073741824,m:1048576,k:1024},s;r=/^([0-9]+)([mgk]?)$/.exec(r.toLowerCase().replace(/[^0-9mkg]/g,""));s=r[2];r=+r[1];if(l.hasOwnProperty(s)){r*=l[s]}return r};return{guid:v,typeOf:z,extend:D,each:q,isEmptyObj:m,inSeries:w,inParallel:E,inArray:p,arrayDiff:C,arrayIntersect:B,toArray:y,trim:A,parseSizeStr:x}});b("moxie/core/I18n",["moxie/core/utils/Basic"],function(m){var l={};return{addI18n:function(e){return m.extend(l,e)},translate:function(n){return l[n]||n},_:function(n){return this.translate(n)},sprintf:function(e){var p=[].slice.call(arguments,1);return e.replace(/%[a-z]/g,function(){var n=p.shift();return m.typeOf(n)!=="undefined"?n:""})}}});b("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(p,l){var q="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe";var m={mimes:{},extensions:{},addMimeType:function(w){var u=w.split(/,/),x,v,s;for(x=0;x<u.length;x+=2){s=u[x+1].split(/ /);for(v=0;v<s.length;v++){this.mimes[s[v]]=u[x]}this.extensions[u[x]]=s}},extList2mimes:function(x,B){var z=this,w,y,A,v,e=[];for(y=0;y<x.length;y++){w=x[y].extensions.split(/\s*,\s*/);for(A=0;A<w.length;A++){if(w[A]==="*"){return[]}v=z.mimes[w[A]];if(!v){if(B&&/^\w+$/.test(w[A])){e.push("."+w[A])}else{return[]}}else{if(p.inArray(v,e)===-1){e.push(v)}}}}return e},mimes2exts:function(e){var u=this,s=[];p.each(e,function(r){if(r==="*"){s=[];return false}var n=r.match(/^(\w+)\/(\*|\w+)$/);if(n){if(n[2]==="*"){p.each(u.extensions,function(w,v){if((new RegExp("^"+n[1]+"/")).test(v)){[].push.apply(s,u.extensions[v])}})}else{if(u.extensions[r]){[].push.apply(s,u.extensions[r])}}}});return s},mimes2extList:function(t){var s=[],e=[];if(p.typeOf(t)==="string"){t=p.trim(t).split(/\s*,\s*/)}e=this.mimes2exts(t);s.push({title:l.translate("Files"),extensions:e.length?e.join(","):"*"});s.mimes=t;return s},getFileExtension:function(r){var n=r&&r.match(/\.([^.]+)$/);if(n){return n[1].toLowerCase()}return""},getFileMime:function(n){return this.mimes[this.getFileExtension(n)]||""}};m.addMimeType(q);return m});b("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(q){function s(z,C,x){var v=0,y=0,D=0,w={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},B=function(n){n=(""+n).replace(/[_\-+]/g,".");n=n.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,".");return !n.length?[-8]:n.split(".")},A=function(n){return !n?0:isNaN(n)?w[n]||-7:parseInt(n,10)};z=B(z);C=B(C);y=Math.max(z.length,C.length);for(v=0;v<y;v++){if(z[v]==C[v]){continue}z[v]=A(z[v]);C[v]=A(C[v]);if(z[v]<C[v]){D=-1;break}else{if(z[v]>C[v]){D=1;break}}}if(!x){return D}switch(x){case">":case"gt":return D>0;case">=":case"ge":return D>=0;case"<=":case"le":return D<=0;case"==":case"=":case"eq":return D===0;case"<>":case"!=":case"ne":return D!==0;case"":case"<":case"lt":return D<0;default:return null}}var m=function(O){var C="",H="?",E="function",K="undefined",D="object",G="major",B="model",S="name",N="type",J="vendor",Q="version",L="architecture",F="console",P="mobile",A="tablet";var I={has:function(r,n){return n.toLowerCase().indexOf(r.toLowerCase())!==-1},lowerize:function(n){return n.toLowerCase()}};var M={rgx:function(){for(var Y,v=0,r,X,W,T,w,V,y=arguments;v<y.length;v+=2){var e=y[v],U=y[v+1];if(typeof Y===K){Y={};for(W in U){T=U[W];if(typeof T===D){Y[T[0]]=O}else{Y[T]=O}}}for(r=X=0;r<e.length;r++){w=e[r].exec(this.getUA());if(!!w){for(W=0;W<U.length;W++){V=w[++X];T=U[W];if(typeof T===D&&T.length>0){if(T.length==2){if(typeof T[1]==E){Y[T[0]]=T[1].call(this,V)}else{Y[T[0]]=T[1]}}else{if(T.length==3){if(typeof T[1]===E&&!(T[1].exec&&T[1].test)){Y[T[0]]=V?T[1].call(this,V,T[2]):O}else{Y[T[0]]=V?V.replace(T[1],T[2]):O}}else{if(T.length==4){Y[T[0]]=V?T[3].call(this,V.replace(T[1],T[2])):O}}}}else{Y[T]=V?V:O}}break}}if(!!w){break}}return Y},str:function(n,u){for(var e in u){if(typeof u[e]===D&&u[e].length>0){for(var v=0;v<u[e].length;v++){if(I.has(u[e][v],n)){return e===H?O:e}}}else{if(I.has(u[e],n)){return e===H?O:e}}}return n}};var x={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}};var R={browser:[[/(opera\smini)\/((\d+)?[\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/((\d+)?[\w\.-]+)/i,/(opera).+version\/((\d+)?[\w\.]+)/i,/(opera)[\/\s]+((\d+)?[\w\.]+)/i],[S,Q,G],[/\s(opr)\/((\d+)?[\w\.]+)/i],[[S,"Opera"],Q,G],[/(kindle)\/((\d+)?[\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?((\d+)?[\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?((\d+)?[\w\.]*)/i,/(?:ms|\()(ie)\s((\d+)?[\w\.]+)/i,/(rekonq)((?:\/)[\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron)\/((\d+)?[\w\.-]+)/i],[S,Q,G],[/(trident).+rv[:\s]((\d+)?[\w\.]+).+like\sgecko/i],[[S,"IE"],Q,G],[/(yabrowser)\/((\d+)?[\w\.]+)/i],[[S,"Yandex"],Q,G],[/(comodo_dragon)\/((\d+)?[\w\.]+)/i],[[S,/_/g," "],Q,G],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?((\d+)?[\w\.]+)/i],[S,Q,G],[/(dolfin)\/((\d+)?[\w\.]+)/i],[[S,"Dolphin"],Q,G],[/((?:android.+)crmo|crios)\/((\d+)?[\w\.]+)/i],[[S,"Chrome"],Q,G],[/((?:android.+))version\/((\d+)?[\w\.]+)\smobile\ssafari/i],[[S,"Android Browser"],Q,G],[/version\/((\d+)?[\w\.]+).+?mobile\/\w+\s(safari)/i],[Q,G,[S,"Mobile Safari"]],[/version\/((\d+)?[\w\.]+).+?(mobile\s?safari|safari)/i],[Q,G,S],[/webkit.+?(mobile\s?safari|safari)((\/[\w\.]+))/i],[S,[G,M.str,x.browser.oldsafari.major],[Q,M.str,x.browser.oldsafari.version]],[/(konqueror)\/((\d+)?[\w\.]+)/i,/(webkit|khtml)\/((\d+)?[\w\.]+)/i],[S,Q,G],[/(navigator|netscape)\/((\d+)?[\w\.-]+)/i],[[S,"Netscape"],Q,G],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?((\d+)?[\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/((\d+)?[\w\.-]+)/i,/(mozilla)\/((\d+)?[\w\.]+).+rv\:.+gecko\/\d+/i,/(uc\s?browser|polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|qqbrowser)[\/\s]?((\d+)?[\w\.]+)/i,/(links)\s\(((\d+)?[\w\.]+)/i,/(gobrowser)\/?((\d+)?[\w\.]+)*/i,/(ice\s?browser)\/v?((\d+)?[\w\._]+)/i,/(mosaic)[\/\s]((\d+)?[\w\.]+)/i],[S,Q,G]],engine:[[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[S,Q],[/rv\:([\w\.]+).*(gecko)/i],[Q,S]],os:[[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[S,[Q,M.str,x.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[S,"Windows"],[Q,M.str,x.os.windows.version]],[/\((bb)(10);/i],[[S,"BlackBerry"],Q],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)\/([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego)[\/\s-]?([\w\.]+)*/i],[S,Q],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[S,"Symbian"],Q],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[S,"Firefox OS"],Q],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[S,Q],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[S,"Chromium OS"],Q],[/(sunos)\s?([\w\.]+\d)*/i],[[S,"Solaris"],Q],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[S,Q],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[S,"iOS"],[Q,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i],[S,[Q,/_/g,"."]],[/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(macintosh|mac(?=_powerpc)|plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos)/i,/(unix)\s?([\w\.]+)*/i],[S,Q]]};var z=function(r){var t=r||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:C);this.getBrowser=function(){return M.rgx.apply(this,R.browser)};this.getEngine=function(){return M.rgx.apply(this,R.engine)};this.getOS=function(){return M.rgx.apply(this,R.os)};this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}};this.getUA=function(){return t};this.setUA=function(n){t=n;return this};this.setUA(t)};return(new z).getResult()}();var p=function(){var e={define_property:function(){return false}(),create_canvas:function(){var n=document.createElement("canvas");return !!(n.getContext&&n.getContext("2d"))}(),return_response_type:function(u){try{if(q.inArray(u,["","text","document"])!==-1){return true}else{if(window.XMLHttpRequest){var w=new XMLHttpRequest;w.open("get","/");if("responseType" in w){w.responseType=u;if(w.responseType!==u){return false}return true}}}}catch(v){}return false},use_data_uri:function(){var n=new Image;n.onload=function(){e.use_data_uri=n.width===1&&n.height===1};setTimeout(function(){n.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1);return false}(),use_data_uri_over32kb:function(){return e.use_data_uri&&(l.browser!=="IE"||l.version>=9)},use_data_uri_of:function(n){return e.use_data_uri&&n<33000||e.use_data_uri_over32kb()},use_fileinput:function(){var n=document.createElement("input");n.setAttribute("type","file");return !n.disabled}};return function(u){var t=[].slice.call(arguments);t.shift();return q.typeOf(e[u])==="function"?e[u].apply(this,t):!!e[u]}}();var l={can:p,browser:m.browser.name,version:parseFloat(m.browser.major),os:m.os.name,osVersion:m.os.version,verComp:s,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};l.OS=l.os;return l});b("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(w){var p=function(n){if(typeof n!=="string"){return n}return document.getElementById(n)};var y=function(s,r){if(!s.className){return false}var u=new RegExp("(^|\\s+)"+r+"(\\s+|$)");return u.test(s.className)};var v=function(r,n){if(!y(r,n)){r.className=!r.className?n:r.className.replace(/\s+$/,"")+" "+n}};var m=function(s,r){if(s.className){var u=new RegExp("(^|\\s+)"+r+"(\\s+|$)");s.className=s.className.replace(u,function(A,z,B){return z===" "&&B===" "?" ":""})}};var q=function(r,n){if(r.currentStyle){return r.currentStyle[n]}else{if(window.getComputedStyle){return window.getComputedStyle(r,null)[n]}}};var x=function(F,A){function C(I){var u,J,H=0,s=0;if(I){J=I.getBoundingClientRect();u=z.compatMode==="CSS1Compat"?z.documentElement:z.body;H=J.left+u.scrollLeft;s=J.top+u.scrollTop}return{x:H,y:s}}var e=0,B=0,G,z=document,E,D;F=F;A=A||z.body;if(F&&F.getBoundingClientRect&&w.browser==="IE"&&(!z.documentMode||z.documentMode<8)){E=C(F);D=C(A);return{x:E.x-D.x,y:E.y-D.y}}G=F;while(G&&G!=A&&G.nodeType){e+=G.offsetLeft||0;B+=G.offsetTop||0;G=G.offsetParent}G=F.parentNode;while(G&&G!=A&&G.nodeType){e-=G.scrollLeft||0;B-=G.scrollTop||0;G=G.parentNode}return{x:e,y:B}};var l=function(n){return{w:n.offsetWidth||n.clientWidth,h:n.offsetHeight||n.clientHeight}};return{get:p,hasClass:y,addClass:v,removeClass:m,getStyle:q,getPos:x,getSize:l}});b("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(m){function l(q,p){var r;for(r in q){if(q[r]===p){return r}}return null}return{RuntimeError:function(){function e(n){this.code=n;this.name=l(p,n);this.message=this.name+": RuntimeError "+this.code}var p={NOT_INIT_ERR:1,NOT_SUPPORTED_ERR:9,JS_ERR:4};m.extend(e,p);e.prototype=Error.prototype;return e}(),OperationNotAllowedException:function(){function e(n){this.code=n;this.name="OperationNotAllowedException"}m.extend(e,{NOT_ALLOWED_ERR:1});e.prototype=Error.prototype;return e}(),ImageError:function(){function e(n){this.code=n;this.name=l(p,n);this.message=this.name+": ImageError "+this.code}var p={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2};m.extend(e,p);e.prototype=Error.prototype;return e}(),FileException:function(){function e(n){this.code=n;this.name=l(p,n);this.message=this.name+": FileException "+this.code}var p={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};m.extend(e,p);e.prototype=Error.prototype;return e}(),DOMException:function(){function e(n){this.code=n;this.name=l(p,n);this.message=this.name+": DOMException "+this.code}var p={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};m.extend(e,p);e.prototype=Error.prototype;return e}(),EventException:function(){function e(n){this.code=n;this.name="EventException"}m.extend(e,{UNSPECIFIED_EVENT_TYPE_ERR:0});e.prototype=Error.prototype;return e}()}});b("moxie/core/EventTarget",["moxie/core/Exceptions","moxie/core/utils/Basic"],function(m,l){function p(){var e={};l.extend(this,{uid:null,init:function(){if(!this.uid){this.uid=l.guid("uid_")}},addEventListener:function(w,v,q,t){var x=this,n;w=l.trim(w);if(/\s/.test(w)){l.each(w.split(/\s+/),function(r){x.addEventListener(r,v,q,t)});return}w=w.toLowerCase();q=parseInt(q,10)||0;n=e[this.uid]&&e[this.uid][w]||[];n.push({fn:v,priority:q,scope:t||this});if(!e[this.uid]){e[this.uid]={}}e[this.uid][w]=n},hasEventListener:function(n){return n?!!(e[this.uid]&&e[this.uid][n]):!!e[this.uid]},removeEventListener:function(u,t){u=u.toLowerCase();var n=e[this.uid]&&e[this.uid][u],q;if(n){if(t){for(q=n.length-1;q>=0;q--){if(n[q].fn===t){n.splice(q,1);break}}}else{n=[]}if(!n.length){delete e[this.uid][u];if(l.isEmptyObj(e[this.uid])){delete e[this.uid]}}}},removeAllEventListeners:function(){if(e[this.uid]){delete e[this.uid]}},dispatchEvent:function(n){var v,A,q,z,y={},w=true,t;if(l.typeOf(n)!=="string"){z=n;if(l.typeOf(z.type)==="string"){n=z.type;if(z.total!==t&&z.loaded!==t){y.total=z.total;y.loaded=z.loaded}y.async=z.async||false}else{throw new m.EventException(m.EventException.UNSPECIFIED_EVENT_TYPE_ERR)}}if(n.indexOf("::")!==-1){(function(r){v=r[0];n=r[1]})(n.split("::"))}else{v=this.uid}n=n.toLowerCase();A=e[v]&&e[v][n];if(A){A.sort(function(s,r){return r.priority-s.priority});q=[].slice.call(arguments);q.shift();y.type=n;q.unshift(y);var x=[];l.each(A,function(r){q[0].target=r.scope;if(y.async){x.push(function(s){setTimeout(function(){s(r.fn.apply(r.scope,q)===false)},1)})}else{x.push(function(s){s(r.fn.apply(r.scope,q)===false)})}});if(x.length){l.inSeries(x,function(r){w=!r})}}return w},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},convertEventPropsToHandlers:function(s){var t;if(l.typeOf(s)!=="array"){s=[s]}for(var q=0;q<s.length;q++){t="on"+s[q];if(l.typeOf(this[t])==="function"){this.addEventListener(s[q],this[t])}else{if(l.typeOf(this[t])==="undefined"){this[t]=null}}}}})}p.instance=new p;return p});b("moxie/core/utils/Encode",[],function(){var p=function(n){return unescape(encodeURIComponent(n))};var l=function(n){return decodeURIComponent(escape(n))};var q=function(D,y){if(typeof window.atob==="function"){return y?l(window.atob(D)):window.atob(D)}var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var A,J,x,I,G,C,z,F,B=0,w=0,E="",H=[];if(!D){return D}D+="";do{I=t.indexOf(D.charAt(B++));G=t.indexOf(D.charAt(B++));C=t.indexOf(D.charAt(B++));z=t.indexOf(D.charAt(B++));F=I<<18|G<<12|C<<6|z;A=F>>16&255;J=F>>8&255;x=F&255;if(C==64){H[w++]=String.fromCharCode(A)}else{if(z==64){H[w++]=String.fromCharCode(A,J)}else{H[w++]=String.fromCharCode(A,J,x)}}}while(B<D.length);E=H.join("");return y?l(E):E};var m=function(J,y){if(y){p(J)}if(typeof window.btoa==="function"){return window.btoa(J)}var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var B,K,x,I,G,D,A,F,C=0,w=0,E="",H=[];if(!J){return J}do{B=J.charCodeAt(C++);K=J.charCodeAt(C++);x=J.charCodeAt(C++);F=B<<16|K<<8|x;I=F>>18&63;G=F>>12&63;D=F>>6&63;A=F&63;H[w++]=e.charAt(I)+e.charAt(G)+e.charAt(D)+e.charAt(A)}while(C<J.length);E=H.join("");var z=J.length%3;return(z?E.slice(0,z-3):E)+"===".slice(z||3)};return{utf8_encode:p,utf8_decode:l,atob:q,btoa:m}});b("moxie/runtime/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(u,m,v){function p(t,e,s,B,A){var y=this,w,z=u.guid(e+"_"),x=A||"browser";t=t||{};l[z]=this;s=u.extend({access_binary:false,access_image_binary:false,display_media:false,do_cors:false,drag_and_drop:false,filter_by_extension:true,resize_image:false,report_upload_progress:false,return_response_headers:false,return_response_type:false,return_status_code:true,send_custom_headers:false,select_file:false,select_folder:false,select_multiple:true,send_binary_string:false,send_browser_cookies:true,send_multipart:true,slice_blob:false,stream_upload:false,summon_file_dialog:false,upload_filesize:true,use_http_method:true},s);if(t.preferred_caps){x=p.getMode(B,t.preferred_caps,x)}w=function(){var n={};return{exec:function(E,F,D,C){if(w[F]){if(!n[E]){n[E]={context:this,instance:new w[F]}}if(n[E].instance[D]){return n[E].instance[D].apply(this,C)}}},removeInstance:function(r){delete n[r]},removeAllInstances:function(){var r=this;u.each(n,function(C,D){if(u.typeOf(C.instance.destroy)==="function"){C.instance.destroy.call(C.context)}r.removeInstance(D)})}}}();u.extend(this,{initialized:false,uid:z,type:e,mode:p.getMode(B,t.required_caps,x),shimid:z+"_container",clients:0,options:t,can:function(D,F){var E=arguments[2]||s;if(u.typeOf(D)==="string"&&u.typeOf(F)==="undefined"){D=p.parseCaps(D)}if(u.typeOf(D)==="object"){for(var C in D){if(!this.can(C,D[C],E)){return false}}return true}if(u.typeOf(E[D])==="function"){return E[D].call(this,F)}else{return F===E[D]}},getShimContainer:function(){var D,C=m.get(this.shimid);if(!C){D=this.options.container?m.get(this.options.container):document.body;C=document.createElement("div");C.id=this.shimid;C.className="moxie-shim moxie-shim-"+this.type;u.extend(C.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"});D.appendChild(C);D=null}return C},getShim:function(){return w},shimExec:function(C,r){var D=[].slice.call(arguments,2);return y.getShim().exec.call(this,this.uid,C,r,D)},exec:function(C,r){var D=[].slice.call(arguments,2);if(y[C]&&y[C][r]){return y[C][r].apply(this,D)}return y.shimExec.apply(this,arguments)},destroy:function(){if(!y){return}var n=m.get(this.shimid);if(n){n.parentNode.removeChild(n)}if(w){w.removeAllInstances()}this.unbindAll();delete l[this.uid];this.uid=null;z=y=w=n=null}});if(this.mode&&t.required_caps&&!this.can(t.required_caps)){this.mode=false}}var q={},l={};p.order="html5,flash,silverlight,html4";p.getRuntime=function(n){return l[n]?l[n]:false};p.addConstructor=function(r,n){n.prototype=v.instance;q[r]=n};p.getConstructor=function(n){return q[n]||null};p.getInfo=function(r){var n=p.getRuntime(r);if(n){return{uid:n.uid,type:n.type,mode:n.mode,can:function(){return n.can.apply(n,arguments)}}}return null};p.parseCaps=function(e){var r={};if(u.typeOf(e)!=="string"){return e||{}}u.each(e.split(","),function(n){r[n]=true});return r};p.can=function(y,w){var z,x=p.getConstructor(y),s;if(x){z=new x({required_caps:w});s=z.mode;z.destroy();return !!s}return false};p.thatCan=function(x,s){var y=(s||p.order).split(/\s*,\s*/);for(var w in y){if(p.can(y[w],x)){return y[w]}}return null};p.getMode=function(s,x,w){var e=null;if(u.typeOf(w)==="undefined"){w="browser"}if(x&&!u.isEmptyObj(s)){u.each(x,function(z,y){if(s.hasOwnProperty(y)){var t=s[y](z);if(typeof t==="string"){t=[t]}if(!e){e=t}else{if(!(e=u.arrayIntersect(e,t))){return e=false}}}});if(e){return u.inArray(w,e)!==-1?w:e[0]}else{if(e===false){return false}}}return w};p.capTrue=function(){return true};p.capFalse=function(){return false};p.capTest=function(n){return function(){return !!n}};return p});b("moxie/runtime/RuntimeClient",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(m,l,p){return function(){var e;l.extend(this,{connectRuntime:function(t){function n(s){var u,r;if(!s.length){q.trigger("RuntimeError",new m.RuntimeError(m.RuntimeError.NOT_INIT_ERR));e=null;return}u=s.shift();r=p.getConstructor(u);if(!r){n(s);return}e=new r(t);e.bind("Init",function(){e.initialized=true;setTimeout(function(){e.clients++;q.trigger("RuntimeInit",e)},1)});e.bind("Error",function(){e.destroy();n(s)});if(!e.mode){e.trigger("Error");return}e.init()}var q=this,v;if(l.typeOf(t)==="string"){v=t}else{if(l.typeOf(t.ruid)==="string"){v=t.ruid}}if(v){e=p.getRuntime(v);if(e){e.clients++;return e}else{throw new m.RuntimeError(m.RuntimeError.NOT_INIT_ERR)}}n((t.runtime_order||p.order).split(/\s*,\s*/))},getRuntime:function(){if(e&&e.uid){return e}e=null;return null},disconnectRuntime:function(){if(e&&--e.clients<=0){e.destroy();e=null}}})}});b("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(q,m,s){function l(n,r){function e(w,z,x){var y,v=p[this.uid];if(q.typeOf(v)!=="string"||!v.length){return null}y=new l(null,{type:x,size:z-w});y.detach(v.substr(w,y.size));return y}s.call(this);if(n){this.connectRuntime(n)}if(!r){r={}}else{if(q.typeOf(r)==="string"){r={data:r}}}q.extend(this,{uid:r.uid||q.guid("uid_"),ruid:n,size:r.size||0,type:r.type||"",slice:function(v,u,w){if(this.isDetached()){return e.apply(this,arguments)}return this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),v,u,w)},getSource:function(){if(!p[this.uid]){return null}return p[this.uid]},detach:function(t){if(this.ruid){this.getRuntime().exec.call(this,"Blob","destroy");this.disconnectRuntime();this.ruid=null}t=t||"";var u=t.match(/^data:([^;]*);base64,/);if(u){this.type=u[1];t=m.atob(t.substring(t.indexOf("base64,")+7))}this.size=t.length;p[this.uid]=t},isDetached:function(){return !this.ruid&&q.typeOf(p[this.uid])==="string"},destroy:function(){this.detach();delete p[this.uid]}});if(r.data){this.detach(r.data)}else{p[this.uid]=r}}var p={};return l});b("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(p,l,q){function m(v,n){var t,w;if(!n){n={}}if(n.type&&n.type!==""){w=n.type}else{w=l.getFileMime(n.name)}if(n.name){t=n.name.replace(/\\/g,"/");t=t.substr(t.lastIndexOf("/")+1)}else{var e=w.split("/")[0];t=p.guid((e!==""?e:"file")+"_");if(l.extensions[w]){t+="."+l.extensions[w][0]}}q.apply(this,arguments);p.extend(this,{type:w||"",name:t||p.guid("file_"),lastModifiedDate:n.lastModifiedDate||(new Date).toLocaleString()})}m.prototype=q.prototype;return m});b("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/file/File","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(y,B,q,m,w,C,p,A,z){function v(n){var e=this,t,r,s;if(y.inArray(y.typeOf(n),["string","node"])!==-1){n={browse_button:n}}r=q.get(n.browse_button);if(!r){throw new m.DOMException(m.DOMException.NOT_FOUND_ERR)}s={accept:[{title:C.translate("All Files"),extensions:"*"}],name:"file",multiple:false,required_caps:false,container:r.parentNode||document.body};n=y.extend({},s,n);if(typeof n.required_caps==="string"){n.required_caps=A.parseCaps(n.required_caps)}if(typeof n.accept==="string"){n.accept=B.mimes2extList(n.accept)}t=q.get(n.container);if(!t){t=document.body}if(q.getStyle(t,"position")==="static"){t.style.position="relative"}t=r=null;z.call(e);y.extend(e,{uid:y.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){e.convertEventPropsToHandlers(x);e.bind("RuntimeInit",function(l,u){e.ruid=u.uid;e.shimid=u.shimid;e.bind("Ready",function(){e.trigger("Refresh")},999);e.bind("Change",function(){var D=u.exec.call(e,"FileInput","getFiles");e.files=[];y.each(D,function(E){if(E.size===0){return true}e.files.push(new p(e.ruid,E))})},999);e.bind("Refresh",function(){var E,F,G,D;G=q.get(n.browse_button);D=q.get(u.shimid);if(G){E=q.getPos(G,q.get(n.container));F=q.getSize(G);if(D){y.extend(D.style,{top:E.y+"px",left:E.x+"px",width:F.w+"px",height:F.h+"px"})}}D=G=null});u.exec.call(e,"FileInput","init",n)});e.connectRuntime(y.extend({},n,{required_caps:{select_file:true}}))},disable:function(l){var u=this.getRuntime();if(u){u.exec.call(this,"FileInput","disable",y.typeOf(l)==="undefined"?true:l)}},refresh:function(){e.trigger("Refresh")},destroy:function(){var l=this.getRuntime();if(l){l.exec.call(this,"FileInput","destroy");this.disconnectRuntime()}if(y.typeOf(this.files)==="array"){y.each(this.files,function(u){u.destroy()})}this.files=null}})}var x=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];v.prototype=w.instance;return v});b("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(w,z,p,l,q,A,m,y){function v(s){var r=this,e;if(typeof s==="string"){s={drop_zone:s}}e={accept:[{title:w.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:true}};s=typeof s==="object"?l.extend({},e,s):e;s.container=z.get(s.drop_zone)||document.body;if(z.getStyle(s.container,"position")==="static"){s.container.style.position="relative"}if(typeof s.accept==="string"){s.accept=y.mimes2extList(s.accept)}A.call(r);l.extend(r,{uid:l.guid("uid_"),ruid:null,files:null,init:function(){r.convertEventPropsToHandlers(x);r.bind("RuntimeInit",function(u,n){r.ruid=n.uid;r.bind("Drop",function(){var t=n.exec.call(r,"FileDrop","getFiles");r.files=[];l.each(t,function(B){r.files.push(new q(r.ruid,B))})},999);n.exec.call(r,"FileDrop","init",s);r.dispatchEvent("ready")});r.connectRuntime(s)},destroy:function(){var n=this.getRuntime();if(n){n.exec.call(this,"FileDrop","destroy");this.disconnectRuntime()}this.files=null}})}var x=["ready","dragenter","dragleave","drop","error"];v.prototype=m.instance;return v});b("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(p,l,q){function m(){this.uid=p.guid("uid_");l.call(this);this.destroy=function(){this.disconnectRuntime();this.unbindAll()}}m.prototype=q.instance;return m});b("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/runtime/RuntimeTarget"],function(v,y,p,l,q,z,m){function w(){function t(B,u){function r(D){n.readyState=w.DONE;n.error=D;n.trigger("error");C()}function C(){e.destroy();e=null;n.trigger("loadend")}function s(D){e.bind("Error",function(F,E){r(E)});e.bind("Progress",function(E){n.result=D.exec.call(e,"FileReader","getResult");n.trigger(E)});e.bind("Load",function(E){n.readyState=w.DONE;n.result=D.exec.call(e,"FileReader","getResult");n.trigger(E);C()});D.exec.call(e,"FileReader","read",B,u)}e=new m;this.convertEventPropsToHandlers(x);if(this.readyState===w.LOADING){return r(new p.DOMException(p.DOMException.INVALID_STATE_ERR))}this.readyState=w.LOADING;this.trigger("loadstart");if(u instanceof q){if(u.isDetached()){var A=u.getSource();switch(B){case"readAsText":case"readAsBinaryString":this.result=A;break;case"readAsDataURL":this.result="data:"+u.type+";base64,"+y.btoa(A);break}this.readyState=w.DONE;this.trigger("load");C()}else{s(e.connectRuntime(u.ruid))}}else{r(new p.DOMException(p.DOMException.NOT_FOUND_ERR))}}var n=this,e;v.extend(this,{uid:v.guid("uid_"),readyState:w.EMPTY,result:null,error:null,readAsBinaryString:function(r){t.call(this,"readAsBinaryString",r)},readAsDataURL:function(r){t.call(this,"readAsDataURL",r)},readAsText:function(r){t.call(this,"readAsText",r)},abort:function(){this.result=null;if(v.inArray(this.readyState,[w.EMPTY,w.DONE])!==-1){return}else{if(this.readyState===w.LOADING){this.readyState=w.DONE}}if(e){e.getRuntime().exec.call(this,"FileReader","abort")}this.trigger("abort");this.trigger("loadend")},destroy:function(){this.abort();if(e){e.getRuntime().exec.call(this,"FileReader","destroy");e.disconnectRuntime()}n=e=null}})}var x=["loadstart","progress","load","abort","error","loadend"];w.EMPTY=0;w.LOADING=1;w.DONE=2;w.prototype=l.instance;return w});b("moxie/core/utils/Url",[],function(){var m=function(A,v){var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],w=e.length,B={http:80,https:443},q={},z=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,y=z.exec(A||"");while(w--){if(y[w]){q[e[w]]=y[w]}}if(!q.scheme){if(!v||typeof v==="string"){v=m(v||document.location.href)}q.scheme=v.scheme;q.host=v.host;q.port=v.port;var x="";if(/^[^\/]/.test(q.path)){x=v.path;if(!/(\/|\/[^\.]+)$/.test(x)){x=x.replace(/\/[^\/]+$/,"/")}else{x+="/"}}q.path=x+(q.path||"")}if(!q.port){q.port=B[q.scheme]||80}q.port=parseInt(q.port,10);if(!q.path){q.path="/"}delete q.source;return q};var l=function(e){var s={http:80,https:443},q=m(e);return q.scheme+"://"+q.host+(q.port!==s[q.scheme]?":"+q.port:"")+q.path+(q.query?q.query:"")};var p=function(e){function q(n){return[n.scheme,n.host,n.port].join("/")}if(typeof e==="string"){e=m(e)}return q(m())===q(e)};return{parseUrl:m,resolveUrl:l,hasSameOrigin:p}});b("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(m,l,p){return function(){function e(y,v){if(v.isDetached()){var x=v.getSource();switch(y){case"readAsBinaryString":return x;case"readAsDataURL":return"data:"+v.type+";base64,"+p.btoa(x);case"readAsText":var q="";for(var w=0,z=x.length;w<z;w++){q+=String.fromCharCode(x[w])}return q}}else{var n=this.connectRuntime(v.ruid).exec.call(this,"FileReaderSync","read",y,v);this.disconnectRuntime();return n}}l.call(this);m.extend(this,{uid:m.guid("uid_"),readAsBinaryString:function(n){return e.call(this,"readAsBinaryString",n)},readAsDataURL:function(n){return e.call(this,"readAsDataURL",n)},readAsText:function(n){return e.call(this,"readAsText",n)}})}});b("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(p,l,q){function m(){var s,n=[];l.extend(this,{append:function(r,t){var v=this,e=l.typeOf(t);if(t instanceof q){s={name:r,value:t}}else{if("array"===e){r+="[]";l.each(t,function(u){v.append(r,u)})}else{if("object"===e){l.each(t,function(w,u){v.append(r+"["+u+"]",w)})}else{if("null"===e||"undefined"===e||"number"===e&&isNaN(t)){v.append(r,"false")}else{n.push({name:r,value:t.toString()})}}}}},hasBlob:function(){return !!this.getBlob()},getBlob:function(){return s&&s.value||null},getBlobName:function(){return s&&s.name||null},each:function(e){l.each(n,function(r){e(r.value,r.name)});if(s){e(s.value,s.name)}},destroy:function(){s=null;n=[]}})}return m});b("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(J,x,C,z,F,y,B,w,M,I,E,L){function A(){this.uid=J.guid("uid_")}function H(){function V(n,m){if(!al.hasOwnProperty(n)){return}if(arguments.length===1){return E.can("define_property")?al[n]:ag[n]}else{if(E.can("define_property")){al[n]=m}else{ag[n]=m}}}function ae(v){function N(){if(ad){ad.destroy();ad=null}O.dispatchEvent("loadend");O=null}function m(n){ad.bind("LoadStart",function(P){V("readyState",H.LOADING);O.dispatchEvent("readystatechange");O.dispatchEvent(P);if(ai){O.upload.dispatchEvent(P)}});ad.bind("Progress",function(P){if(V("readyState")!==H.LOADING){V("readyState",H.LOADING);O.dispatchEvent("readystatechange")}O.dispatchEvent(P)});ad.bind("UploadProgress",function(P){if(ai){O.upload.dispatchEvent({type:"progress",lengthComputable:false,total:P.total,loaded:P.loaded})}});ad.bind("Load",function(P){V("readyState",H.DONE);V("status",Number(n.exec.call(ad,"XMLHttpRequest","getStatus")||0));V("statusText",G[V("status")]||"");V("response",n.exec.call(ad,"XMLHttpRequest","getResponse",V("responseType")));if(!!~J.inArray(V("responseType"),["text",""])){V("responseText",V("response"))}else{if(V("responseType")==="document"){V("responseXML",V("response"))}}aj=n.exec.call(ad,"XMLHttpRequest","getAllResponseHeaders");O.dispatchEvent("readystatechange");if(V("status")>0){if(ai){O.upload.dispatchEvent(P)}O.dispatchEvent(P)}else{af=true;O.dispatchEvent("error")}N()});ad.bind("Abort",function(P){O.dispatchEvent(P);N()});ad.bind("Error",function(P){af=true;V("readyState",H.DONE);O.dispatchEvent("readystatechange");Q=true;O.dispatchEvent(P);N()});n.exec.call(ad,"XMLHttpRequest","send",{url:ah,method:U,async:Y,user:X,password:aa,headers:ak,mimeType:e,encoding:l,responseType:O.responseType,withCredentials:O.withCredentials,options:W},v)}var O=this;u=(new Date).getTime();ad=new B;if(typeof W.required_caps==="string"){W.required_caps=y.parseCaps(W.required_caps)}W.required_caps=J.extend({},W.required_caps,{return_response_type:O.responseType});if(v instanceof I){W.required_caps.send_multipart=true}if(!s){W.required_caps.do_cors=true}if(W.ruid){m(ad.connectRuntime(W))}else{ad.bind("RuntimeInit",function(P,n){m(n)});ad.bind("RuntimeError",function(P,n){O.dispatchEvent("RuntimeError",n)});ad.connectRuntime(W)}}function p(){V("responseText","");V("responseXML",null);V("response",null);V("status",0);V("statusText","");u=am=null}var ag=this,al={timeout:0,readyState:H.UNSENT,withCredentials:false,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},Y=true,ah,U,ak={},X,aa,l=null,e=null,t=false,ac=false,ai=false,Q=false,af=false,s=false,u,am,ab=null,r=null,W={},ad,aj="",Z;J.extend(this,al,{uid:J.guid("uid_"),upload:new A,open:function(R,N,P,v,m){var O;if(!R||!N){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}if(/[\u0100-\uffff]/.test(R)||z.utf8_encode(R)!==R){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}if(!!~J.inArray(R.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])){U=R.toUpperCase()}if(!!~J.inArray(U,["CONNECT","TRACE","TRACK"])){throw new x.DOMException(x.DOMException.SECURITY_ERR)}N=z.utf8_encode(N);O=F.parseUrl(N);s=F.hasSameOrigin(O);ah=F.resolveUrl(N);if((v||m)&&!s){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR)}X=v||O.user;aa=m||O.pass;Y=P||true;if(Y===false&&(V("timeout")||V("withCredentials")||V("responseType")!=="")){throw new x.DOMException(x.DOMException.INVALID_ACCESS_ERR)}t=!Y;ac=false;ak={};p.call(this);V("readyState",H.OPENED);this.convertEventPropsToHandlers(["readystatechange"]);this.dispatchEvent("readystatechange")},setRequestHeader:function(N,m){var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(V("readyState")!==H.OPENED||ac){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}if(/[\u0100-\uffff]/.test(N)||z.utf8_encode(N)!==N){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}N=J.trim(N).toLowerCase();if(!!~J.inArray(N,v)||/^(proxy\-|sec\-)/.test(N)){return false}if(!ak[N]){ak[N]=m}else{ak[N]+=", "+m}return true},getAllResponseHeaders:function(){return aj||""},getResponseHeader:function(m){m=m.toLowerCase();if(af||!!~J.inArray(m,["set-cookie","set-cookie2"])){return null}if(aj&&aj!==""){if(!Z){Z={};J.each(aj.split(/\r\n/),function(v){var N=v.split(/:\s+/);if(N.length===2){N[0]=J.trim(N[0]);Z[N[0].toLowerCase()]={header:N[0],value:J.trim(N[1])}}})}if(Z.hasOwnProperty(m)){return Z[m].header+": "+Z[m].value}}return null},overrideMimeType:function(N){var v,m;if(!!~J.inArray(V("readyState"),[H.LOADING,H.DONE])){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}N=J.trim(N.toLowerCase());if(/;/.test(N)&&(v=N.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))){N=v[1];if(v[2]){m=v[2]}}if(!L.mimes[N]){throw new x.DOMException(x.DOMException.SYNTAX_ERR)}ab=N;r=m},send:function(N,m){if(J.typeOf(m)==="string"){W={ruid:m}}else{if(!m){W={}}else{W=m}}this.convertEventPropsToHandlers(K);this.upload.convertEventPropsToHandlers(K);if(this.readyState!==H.OPENED||ac){throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}if(N instanceof w){W.ruid=N.ruid;e=N.type||"application/octet-stream"}else{if(N instanceof I){if(N.hasBlob()){var v=N.getBlob();W.ruid=v.ruid;e=v.type||"application/octet-stream"}}else{if(typeof N==="string"){l="UTF-8";e="text/plain;charset=UTF-8";N=z.utf8_encode(N)}}}if(!this.withCredentials){this.withCredentials=W.required_caps&&W.required_caps.send_browser_cookies&&!s}ai=!t&&this.upload.hasEventListener();af=false;Q=!N;if(!t){ac=true}ae.call(this,N)},abort:function(){af=true;t=false;if(!~J.inArray(V("readyState"),[H.UNSENT,H.OPENED,H.DONE])){V("readyState",H.DONE);ac=false;if(ad){ad.getRuntime().exec.call(ad,"XMLHttpRequest","abort",Q)}else{throw new x.DOMException(x.DOMException.INVALID_STATE_ERR)}Q=true}else{V("readyState",H.UNSENT)}},destroy:function(){if(ad){if(J.typeOf(ad.destroy)==="function"){ad.destroy()}ad=null}this.unbindAll();if(this.upload){this.upload.unbindAll();this.upload=null}}})}var G={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};A.prototype=C.instance;var K=["loadstart","progress","abort","error","load","timeout","loadend"];var q=1,D=2;H.UNSENT=0;H.OPENED=1;H.HEADERS_RECEIVED=2;H.LOADING=3;H.DONE=4;H.prototype=C.instance;return H});b("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(q,m,s,p){function l(){function t(){z=y=0;n=this.result=null}function x(u,C){var B=this;A=C;B.bind("TransportingProgress",function(r){y=r.loaded;if(y<z&&q.inArray(B.state,[l.IDLE,l.DONE])===-1){v.call(B)}},999);B.bind("TransportingComplete",function(){y=z;B.state=l.DONE;n=null;B.result=A.exec.call(B,"Transporter","getAsBlob",u||"")},999);B.state=l.BUSY;B.trigger("TransportingStarted");v.call(B)}function v(){var B=this,C,u=z-y;if(w>u){w=u}C=m.btoa(n.substr(y,w));A.exec.call(B,"Transporter","receive",C,z)}var e,A,n,z,y,w;s.call(this);q.extend(this,{uid:q.guid("uid_"),state:l.IDLE,result:null,transport:function(B,D,u){var C=this;u=q.extend({chunk_size:204798},u);if(e=u.chunk_size%3){u.chunk_size+=3-e}w=u.chunk_size;t.call(this);n=B;z=B.length;if(q.typeOf(u)==="string"||u.ruid){x.call(C,D,this.connectRuntime(u))}else{var r=function(F,E){C.unbind("RuntimeInit",r);x.call(C,D,E)};this.bind("RuntimeInit",r);this.connectRuntime(u)}},abort:function(){var r=this;r.state=l.IDLE;if(A){A.exec.call(r,"Transporter","clear");r.trigger("TransportingAborted")}t.call(r)},destroy:function(){this.unbindAll();A=null;this.disconnectRuntime();t.call(this)}})}l.IDLE=0;l.BUSY=1;l.DONE=2;l.prototype=p.instance;return l});b("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(B,G,w,m,y,H,v,F,E,A,x,D,z){function C(){function p(r){if(!r){r=this.getRuntime().exec.call(this,"Image","getInfo")}this.size=r.size;this.width=r.width;this.height=r.height;this.type=r.type;this.meta=r.meta;if(this.name===""){this.name=r.name}}function s(I){var J=B.typeOf(I);try{if(I instanceof C){if(!I.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}l.apply(this,arguments)}else{if(I instanceof x){if(!~B.inArray(I.type,["image/jpeg","image/png"])){throw new w.ImageError(w.ImageError.WRONG_FORMAT)}e.apply(this,arguments)}else{if(B.inArray(J,["blob","file"])!==-1){s.call(this,new D(null,I),arguments[1])}else{if(J==="string"){if(/^data:[^;]*;base64,/.test(I)){s.call(this,new x(null,{data:I}),arguments[1])}else{n.apply(this,arguments)}}else{if(J==="node"&&I.nodeName.toLowerCase()==="img"){s.call(this,I.src,arguments[1])}else{throw new w.DOMException(w.DOMException.TYPE_MISMATCH_ERR)}}}}}}catch(u){this.trigger("error",u.code)}}function l(u,J){var I=this.connectRuntime(u.ruid);this.ruid=I.uid;I.exec.call(this,"Image","loadFromImage",u,B.typeOf(J)==="undefined"?true:J)}function e(I,K){function u(r){J.ruid=r.uid;r.exec.call(J,"Image","loadFromBlob",I)}var J=this;J.name=I.name||"";if(I.isDetached()){this.bind("RuntimeInit",function(L,r){u(r)});if(K&&typeof K.required_caps==="string"){K.required_caps=H.parseCaps(K.required_caps)}this.connectRuntime(B.extend({required_caps:{access_image_binary:true,resize_image:true}},K))}else{u(this.connectRuntime(I.ruid))}}function n(J,u){var K=this,I;I=new y;I.open("get",J);I.responseType="blob";I.onprogress=function(r){K.trigger(r)};I.onload=function(){e.call(K,I.response,true)};I.onerror=function(r){K.trigger(r)};I.onloadend=function(){I.destroy()};I.bind("RuntimeError",function(L,r){K.trigger("RuntimeError",r)});I.send(null,u)}v.call(this);B.extend(this,{uid:B.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){this.bind("Load Resize",function(){p.call(this)},999);this.convertEventPropsToHandlers(q);s.apply(this,arguments)},downsize:function(I){var J={width:this.width,height:this.height,crop:false,preserveHeaders:true};if(typeof I==="object"){I=B.extend(J,I)}else{I=B.extend(J,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]})}try{if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(this.width>C.MAX_RESIZE_WIDTH||this.height>C.MAX_RESIZE_HEIGHT){throw new w.ImageError(w.ImageError.MAX_RESOLUTION_ERR)}this.getRuntime().exec.call(this,"Image","downsize",I.width,I.height,I.crop,I.preserveHeaders)}catch(u){this.trigger("error",u.code)}},crop:function(u,r,I){this.downsize(u,r,true,I)},getAsCanvas:function(){if(!E.can("create_canvas")){throw new w.RuntimeError(w.RuntimeError.NOT_SUPPORTED_ERR)}var r=this.connectRuntime(this.ruid);return r.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(u,r){if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(!u){u="image/jpeg"}if(u==="image/jpeg"&&!r){r=90}return this.getRuntime().exec.call(this,"Image","getAsBlob",u,r)},getAsDataURL:function(u,r){if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}return this.getRuntime().exec.call(this,"Image","getAsDataURL",u,r)},getAsBinaryString:function(u,r){var I=this.getAsDataURL(u,r);return z.atob(I.substring(I.indexOf("base64,")+7))},embed:function(t){function M(){if(E.can("create_canvas")){var T=S.getAsCanvas();if(T){t.appendChild(T);T=null;S.destroy();L.trigger("embedded");return}}var r=S.getAsDataURL(I,N);if(!r){throw new w.ImageError(w.ImageError.WRONG_FORMAT)}if(E.can("use_data_uri_of",r.length)){t.innerHTML='<img src="'+r+'" width="'+S.width+'" height="'+S.height+'" />';S.destroy();L.trigger("embedded")}else{var U=new F;U.bind("TransportingComplete",function(){J=L.connectRuntime(this.result.ruid);L.bind("Embedded",function(){B.extend(J.getShimContainer().style,{top:"0px",left:"0px",width:S.width+"px",height:S.height+"px"});J=null},999);J.exec.call(L,"ImageView","display",this.result.uid,u,R);S.destroy()});U.transport(z.atob(r.substring(r.indexOf("base64,")+7)),I,B.extend({},O,{required_caps:{display_media:true},runtime_order:"flash,silverlight",container:t}))}}var L=this,S,I,N,K,O=arguments[1]||{},u=this.width,R=this.height,J;try{if(!(t=G.get(t))){throw new w.DOMException(w.DOMException.INVALID_NODE_TYPE_ERR)}if(!this.size){throw new w.DOMException(w.DOMException.INVALID_STATE_ERR)}if(this.width>C.MAX_RESIZE_WIDTH||this.height>C.MAX_RESIZE_HEIGHT){throw new w.ImageError(w.ImageError.MAX_RESOLUTION_ERR)}I=O.type||this.type||"image/jpeg";N=O.quality||90;K=B.typeOf(O.crop)!=="undefined"?O.crop:false;if(O.width){u=O.width;R=O.height||u}else{var Q=G.getSize(t);if(Q.w&&Q.h){u=Q.w;R=Q.h}}S=new C;S.bind("Resize",function(){M.call(L)});S.bind("Load",function(){S.downsize(u,R,K,false)});S.clone(this,false);return S}catch(P){this.trigger("error",P.code)}},destroy:function(){if(this.ruid){this.getRuntime().exec.call(this,"Image","destroy");this.disconnectRuntime()}this.unbindAll()}})}var q=["progress","load","error","resize","embedded"];C.MAX_RESIZE_WIDTH=6500;C.MAX_RESIZE_HEIGHT=6500;C.prototype=A.instance;return C});b("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(u,m,w,q){function v(r){var x=this,n=w.capTest,e=w.capTrue;var s=u.extend({access_binary:n(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return x.can("access_binary")&&!!p.Image},display_media:n(q.can("create_canvas")||q.can("use_data_uri_over32kb")),do_cors:n(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest),drag_and_drop:n(function(){var t=document.createElement("div");return("draggable" in t||"ondragstart" in t&&"ondrop" in t)&&(q.browser!=="IE"||q.version>9)}()),filter_by_extension:n(function(){return q.browser==="Chrome"&&q.version>=28||q.browser==="IE"&&q.version>=10}()),return_response_headers:e,return_response_type:function(t){if(t==="json"&&!!window.JSON){return true}return q.can("return_response_type",t)},return_status_code:e,report_upload_progress:n(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return x.can("access_binary")&&q.can("create_canvas")},select_file:function(){return q.can("use_fileinput")&&window.File},select_folder:function(){return x.can("select_file")&&q.browser==="Chrome"&&q.version>=21},select_multiple:function(){return x.can("select_file")&&!(q.browser==="Safari"&&q.os==="Windows")&&!(q.os==="iOS"&&q.verComp(q.osVersion,"7.0.4","<"))},send_binary_string:n(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:n(window.XMLHttpRequest),send_multipart:function(){return !!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||x.can("send_binary_string")},slice_blob:n(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return x.can("slice_blob")&&x.can("send_multipart")},summon_file_dialog:n(function(){return q.browser==="Firefox"&&q.version>=4||q.browser==="Opera"&&q.version>=12||q.browser==="IE"&&q.version>=10||!!~u.inArray(q.browser,["Chrome","Safari"])}()),upload_filesize:e},arguments[2]);w.call(this,r,arguments[1]||l,s);u.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(x);t=x=null}}(this.destroy)});u.extend(this.getShim(),p)}var l="html5",p={};w.addConstructor(l,v);return p});b("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(m,l){function p(){function n(v,s,w){var u;if(window.File.prototype.slice){try{v.slice();return v.slice(s,w)}catch(q){return v.slice(s,w-s)}}else{if(u=window.File.prototype.webkitSlice||window.File.prototype.mozSlice){return u.call(v,s,w)}else{return null}}}this.slice=function(){return new l(this.getRuntime().uid,n.apply(this,arguments))}}return m.Blob=p});b("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(w){function v(){this.returnValue=false}function p(){this.cancelBubble=true}var m={},y="moxie_"+w.guid();var q=function(t,A,r,n){var z,e;A=A.toLowerCase();if(t.addEventListener){z=r;t.addEventListener(A,z,false)}else{if(t.attachEvent){z=function(){var s=window.event;if(!s.target){s.target=s.srcElement}s.preventDefault=v;s.stopPropagation=p;r(s)};t.attachEvent("on"+A,z)}}if(!t[y]){t[y]=w.guid()}if(!m.hasOwnProperty(t[y])){m[t[y]]={}}e=m[t[y]];if(!e.hasOwnProperty(A)){e[A]=[]}e[A].push({func:z,orig:r,key:n})};var x=function(A,t,z){var C,n;t=t.toLowerCase();if(A[y]&&m[A[y]]&&m[A[y]][t]){C=m[A[y]][t]}else{return}for(var e=C.length-1;e>=0;e--){if(C[e].orig===z||C[e].key===z){if(A.removeEventListener){A.removeEventListener(t,C[e].func,false)}else{if(A.detachEvent){A.detachEvent("on"+t,C[e].func)}}C[e].orig=null;C[e].func=null;C.splice(e,1);if(z!==n){break}}}if(!C.length){delete m[A[y]][t]}if(w.isEmptyObj(m[A[y]])){delete m[A[y]];try{delete A[y]}catch(B){A[y]=n}}};var l=function(n,e){if(!n||!n[y]){return}w.each(m[n[y]],function(s,r){x(n,r,e)})};return{addEvent:q,removeEvent:x,removeAllEvents:l}});b("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(u,m,w,q,l,p){function v(){var n=[],r;m.extend(this,{init:function(D){var B=this,y=B.getRuntime(),t,A,x,e,z,C;r=D;n=[];x=r.accept.mimes||l.extList2mimes(r.accept,y.can("filter_by_extension"));A=y.getShimContainer();A.innerHTML='<input id="'+y.uid+'" type="file" style="font-size:999px;opacity:0;"'+(r.multiple&&y.can("select_multiple")?"multiple":"")+(r.directory&&y.can("select_folder")?"webkitdirectory directory":"")+(x?' accept="'+x.join(",")+'"':"")+" />";t=w.get(y.uid);m.extend(t.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});e=w.get(r.browse_button);if(y.can("summon_file_dialog")){if(w.getStyle(e,"position")==="static"){e.style.position="relative"}z=parseInt(w.getStyle(e,"z-index"),10)||1;e.style.zIndex=z;A.style.zIndex=z-1;q.addEvent(e,"click",function(F){var E=w.get(y.uid);if(E&&!E.disabled){E.click()}F.preventDefault()},B.uid)}C=y.can("summon_file_dialog")?e:A;q.addEvent(C,"mouseover",function(){B.trigger("mouseenter")},B.uid);q.addEvent(C,"mouseout",function(){B.trigger("mouseleave")},B.uid);q.addEvent(C,"mousedown",function(){B.trigger("mousedown")},B.uid);q.addEvent(w.get(r.container),"mouseup",function(){B.trigger("mouseup")},B.uid);t.onchange=function s(){n=[];if(r.directory){m.each(this.files,function(F){if(F.name!=="."){n.push(F)}})}else{n=[].slice.call(this.files)}if(p.browser!=="IE"&&p.browser!=="IEMobile"){this.value=""}else{var E=this.cloneNode(true);this.parentNode.replaceChild(E,this);E.onchange=s}B.trigger("change")};B.trigger({type:"ready",async:true});A=null},getFiles:function(){return n},disable:function(y){var s=this.getRuntime(),x;if(x=w.get(s.uid)){x.disabled=!!y}},destroy:function(){var x=this.getRuntime(),e=x.getShim(),y=x.getShimContainer();q.removeAllEvents(y,this.uid);q.removeAllEvents(r&&w.get(r.container),this.uid);q.removeAllEvents(r&&w.get(r.browse_button),this.uid);if(y){y.innerHTML=""}e.removeInstance(this.uid);n=r=y=e=null}})}return u.FileInput=v});b("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(u,m,v,q,l){function p(){function B(s){if(!s.dataTransfer||!s.dataTransfer.types){return false}var D=m.toArray(s.dataTransfer.types||[]);return m.inArray("Files",D)!==-1||m.inArray("public.file-url",D)!==-1||m.inArray("application/x-moz-file",D)!==-1}function A(D){var E=[];for(var s=0;s<D.length;s++){[].push.apply(E,D[s].extensions.split(/\s*,\s*/))}return m.inArray("*",E)===-1?E:[]}function x(s){if(!C.length){return true}var D=l.getFileExtension(s.name);return !D||m.inArray(D,C)!==-1}function t(D,s){var e=[];m.each(D,function(E){var G=E.webkitGetAsEntry();if(G){if(G.isFile){var F=E.getAsFile();if(x(F)){y.push(F)}}else{e.push(G)}}});if(e.length){z(e,s)}else{s()}}function z(D,E){var s=[];m.each(D,function(F){s.push(function(e){w(F,e)})});m.inSeries(s,function(){E()})}function w(e,s){if(e.isFile){e.file(function(D){if(x(D)){y.push(D)}s()},function(){s()})}else{if(e.isDirectory){n(e,s)}else{s()}}}function n(F,D){function s(H){E.readEntries(function(e){if(e.length){[].push.apply(G,e);s(H)}else{H()}},H)}var G=[],E=F.createReader();s(function(){z(G,D)})}var y=[],C=[],r;m.extend(this,{init:function(D){var e=this,s;r=D;C=A(r.accept);s=r.container;q.addEvent(s,"dragover",function(E){if(!B(E)){return}E.preventDefault();E.dataTransfer.dropEffect="copy"},e.uid);q.addEvent(s,"drop",function(E){if(!B(E)){return}E.preventDefault();y=[];if(E.dataTransfer.items&&E.dataTransfer.items[0].webkitGetAsEntry){t(E.dataTransfer.items,function(){e.trigger("drop")})}else{m.each(E.dataTransfer.files,function(F){if(x(F)){y.push(F)}});e.trigger("drop")}},e.uid);q.addEvent(s,"dragenter",function(E){e.trigger("dragenter")},e.uid);q.addEvent(s,"dragleave",function(E){e.trigger("dragleave")},e.uid)},getFiles:function(){return y},destroy:function(){q.removeAllEvents(r&&v.get(r.container),this.uid);y=C=r=null}})}return u.FileDrop=p});b("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(p,l,q){function m(){function n(r){return l.atob(r.substring(r.indexOf("base64,")+7))}var t,s=false;q.extend(this,{read:function(r,e){var u=this;t=new window.FileReader;t.addEventListener("progress",function(v){u.trigger(v)});t.addEventListener("load",function(v){u.trigger(v)});t.addEventListener("error",function(v){u.trigger(v,t.error)});t.addEventListener("loadend",function(){t=null});if(q.typeOf(t[r])==="function"){s=false;t[r](e.getSource())}else{if(r==="readAsBinaryString"){s=true;t.readAsDataURL(e.getSource())}}},getResult:function(){return t&&t.result?s?n(t.result):t.result:null},abort:function(){if(t){t.abort()}},destroy:function(){t=null}})}return p.FileReader=m});b("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(w,z,p,l,q,A,m,y,x){function v(){function C(D,G){var E=this,e,F;e=G.getBlob().getSource();F=new window.FileReader;F.onload=function(){G.append(G.getBlobName(),new A(null,{type:e.type,data:F.result}));t.send.call(E,D,G)};F.readAsBinaryString(e)}function r(){if(window.XMLHttpRequest&&!(x.browser==="IE"&&x.version<8)){return new window.XMLHttpRequest}else{return function(){var E=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"];for(var D=0;D<E.length;D++){try{return new ActiveXObject(E[D])}catch(F){}}}()}}function u(E){var D=E.responseXML;var F=E.responseText;if(x.browser==="IE"&&F&&D&&!D.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(E.getResponseHeader("Content-Type"))){D=new window.ActiveXObject("Microsoft.XMLDOM");D.async=false;D.validateOnParse=false;D.loadXML(F)}if(D){if(x.browser==="IE"&&D.parseError!==0||!D.documentElement||D.documentElement.tagName==="parsererror"){return null}}return D}function B(G){var E="----moxieboundary"+(new Date).getTime(),I="--",F="\r\n",D="",H=this.getRuntime();if(!H.can("send_binary_string")){throw new y.RuntimeError(y.RuntimeError.NOT_SUPPORTED_ERR)}s.setRequestHeader("Content-Type","multipart/form-data; boundary="+E);G.each(function(J,K){if(J instanceof A){D+=I+E+F+'Content-Disposition: form-data; name="'+K+'"; filename="'+unescape(encodeURIComponent(J.name||"blob"))+'"'+F+"Content-Type: "+(J.type||"application/octet-stream")+F+F+J.getSource()+F}else{D+=I+E+F+'Content-Disposition: form-data; name="'+K+'"'+F+F+unescape(encodeURIComponent(J))+F}});D+=I+E+I+F;return D}var t=this,s,n;z.extend(this,{send:function(I,J){var G=this,F=x.browser==="Mozilla"&&x.version>=4&&x.version<7,H=x.browser==="Android Browser",E=false;n=I.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase();s=r();s.open(I.method,I.url,I.async,I.user,I.password);if(J instanceof A){if(J.isDetached()){E=true}J=J.getSource()}else{if(J instanceof m){if(J.hasBlob()){if(J.getBlob().isDetached()){J=B.call(G,J);E=true}else{if((F||H)&&z.typeOf(J.getBlob().getSource())==="blob"&&window.FileReader){C.call(G,I,J);return}}}if(J instanceof m){var D=new window.FormData;J.each(function(L,K){if(L instanceof A){D.append(K,L.getSource())}else{D.append(K,L)}});J=D}}}if(s.upload){if(I.withCredentials){s.withCredentials=true}s.addEventListener("load",function(K){G.trigger(K)});s.addEventListener("error",function(K){G.trigger(K)});s.addEventListener("progress",function(K){G.trigger(K)});s.upload.addEventListener("progress",function(K){G.trigger({type:"UploadProgress",loaded:K.loaded,total:K.total})})}else{s.onreadystatechange=function(){switch(s.readyState){case 1:break;case 2:break;case 3:var L,e;try{if(l.hasSameOrigin(I.url)){L=s.getResponseHeader("Content-Length")||0}if(s.responseText){e=s.responseText.length}}catch(K){L=e=0}G.trigger({type:"progress",lengthComputable:!!L,total:parseInt(L,10),loaded:e});break;case 4:s.onreadystatechange=function(){};if(s.status===0){G.trigger("error")}else{G.trigger("load")}break}}}if(!z.isEmptyObj(I.headers)){z.each(I.headers,function(L,K){s.setRequestHeader(K,L)})}if(""!==I.responseType&&"responseType" in s){if("json"===I.responseType&&!x.can("return_response_type","json")){s.responseType="text"}else{s.responseType=I.responseType}}if(!E){s.send(J)}else{if(s.sendAsBinary){s.sendAsBinary(J)}else{(function(){var L=new Uint8Array(J.length);for(var K=0;K<J.length;K++){L[K]=J.charCodeAt(K)&255}s.send(L.buffer)})()}}G.trigger("loadstart")},getStatus:function(){try{if(s){return s.status}}catch(D){}return 0},getResponse:function(H){var E=this.getRuntime();try{switch(H){case"blob":var G=new q(E.uid,s.response);var F=s.getResponseHeader("Content-Disposition");if(F){var I=F.match(/filename=([\'\"'])([^\1]+)\1/);if(I){n=I[2]}}G.name=n;if(!G.type){G.type=p.getFileMime(n)}return G;case"json":if(!x.can("return_response_type","json")){return s.status===200&&!!window.JSON?JSON.parse(s.responseText):null}return s.response;case"document":return u(s);default:return s.responseText!==""?s.responseText:null}}catch(D){return null}},getAllResponseHeaders:function(){try{return s.getAllResponseHeaders()}catch(D){}return""},abort:function(){if(s){s.abort()}},destroy:function(){t=n=null}})}return w.XMLHttpRequest=v});b("moxie/runtime/html5/utils/BinaryReader",[],function(){return function(){function p(n,v){var e=q?0:-8*(v-1),u=0,w;for(w=0;w<v;w++){u|=t.charCodeAt(n+w)<<Math.abs(e+w*8)}return u}function l(u,n,s){s=arguments.length===3?s:t.length-n-1;t=t.substr(0,n)+u+t.substr(s+n)}function m(v,z,x){var w="",y=q?0:-8*(x-1),e;for(e=0;e<x;e++){w+=String.fromCharCode(z>>Math.abs(y+e*8)&255)}l(w,v,x)}var q=false,t;return{II:function(e){if(e===c){return q}else{q=e}},init:function(e){q=false;t=e},SEGMENT:function(u,n,s){switch(arguments.length){case 1:return t.substr(u,t.length-u-1);case 2:return t.substr(u,n);case 3:l(s,u,n);break;default:return t}},BYTE:function(n){return p(n,1)},SHORT:function(n){return p(n,2)},LONG:function(r,s){if(s===c){return p(r,4)}else{m(r,s,4)}},SLONG:function(r){var n=p(r,4);return n>2147483647?n-4294967296:n},STRING:function(s,r){var u="";for(r+=s;s<r;s++){u+=String.fromCharCode(p(s,1))}return u}}}});b("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader"],function(m){return function l(w){var t=[],p,q,v,e=0;p=new m;p.init(w);if(p.SHORT(0)!==65496){return}q=2;while(q<=w.length){v=p.SHORT(q);if(v>=65488&&v<=65495){q+=2;continue}if(v===65498||v===65497){break}e=p.SHORT(q+2)+2;if(v>=65505&&v<=65519){t.push({hex:v,name:"APP"+(v&15),start:q,length:e,segment:p.SEGMENT(q,e)})}q+=e}p.init(null);return{headers:t,restore:function(s){var r,u;p.init(s);q=p.SHORT(2)==65504?4+p.SHORT(4):2;for(u=0,r=t.length;u<r;u++){if(t[u].name=="APP2"&&t[u].segment.indexOf("ProPhoto RGB")>0){continue}else{p.SEGMENT(q,0,t[u].segment);q+=t[u].length}}s=p.SEGMENT();p.init(null);return s},strip:function(y){var z,x,u;x=new l(y);z=x.headers;x.purge();p.init(y);u=z.length;while(u--){p.SEGMENT(z[u].start,z[u].length,"")}y=p.SEGMENT();p.init(null);return y},get:function(u){var s=[];for(var x=0,r=t.length;x<r;x++){if(t[x].name===u.toUpperCase()){s.push(t[x].segment)}}return s},set:function(y,u){var A=[],r,x,z;if(typeof u==="string"){A.push(u)}else{A=u}for(r=x=0,z=t.length;r<z;r++){if(t[r].name===y.toUpperCase()){t[r].segment=A[x];t[r].length=A[x].length;x++}if(x>=A.length){break}}},purge:function(){t=[];p.init(null);p=null}}}});b("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(l,m){return function(){function t(E,z){var u=q.SHORT(E),I,y,D,B,G,C,x,F,H=[],A={};for(I=0;I<u;I++){x=C=E+12*I+2;D=z[q.SHORT(x)];if(D===c){continue}B=q.SHORT(x+=2);G=q.LONG(x+=2);x+=4;H=[];switch(B){case 1:case 7:if(G>4){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.BYTE(x+y)}break;case 2:if(G>4){x=q.LONG(x)+p.tiffHeader}A[D]=q.STRING(x,G-1);continue;case 3:if(G>2){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.SHORT(x+y*2)}break;case 4:if(G>1){x=q.LONG(x)+p.tiffHeader}for(y=0;y<G;y++){H[y]=q.LONG(x+y*4)}break;case 5:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.LONG(x+y*4)/q.LONG(x+y*4+4)}break;case 9:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.SLONG(x+y*4)}break;case 10:x=q.LONG(x)+p.tiffHeader;for(y=0;y<G;y++){H[y]=q.SLONG(x+y*4)/q.SLONG(x+y*4+4)}break;default:continue}F=G==1?H[0]:H;if(e.hasOwnProperty(D)&&typeof F!="object"){A[D]=e[D][F]}else{A[D]=F}}return A}function n(){var s=p.tiffHeader;q.II(q.SHORT(s)==18761);if(q.SHORT(s+=2)!==42){return false}p.IFD0=p.tiffHeader+q.LONG(s+=2);v=t(p.IFD0,r.tiff);if("ExifIFDPointer" in v){p.exifIFD=p.tiffHeader+v.ExifIFDPointer;delete v.ExifIFDPointer}if("GPSInfoIFDPointer" in v){p.gpsIFD=p.tiffHeader+v.GPSInfoIFDPointer;delete v.GPSInfoIFDPointer}return true}function w(B,E,x){var s,u,D,A=0;if(typeof E==="string"){var y=r[B.toLowerCase()];for(var C in y){if(y[C]===E){E=C;break}}}s=p[B.toLowerCase()+"IFD"];u=q.SHORT(s);for(var z=0;z<u;z++){D=s+12*z+2;if(q.SHORT(D)==E){A=D+8;break}}if(!A){return false}q.LONG(A,x);return true}var q,r,v,p={},e;q=new m;r={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"}};e={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire.",1:"Flash fired.",5:"Strobe return light not detected.",7:"Strobe return light detected.",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}};return{init:function(s){p={tiffHeader:10};if(s===c||!s.length){return false}q.init(s);if(q.SHORT(0)===65505&&q.STRING(4,5).toUpperCase()==="EXIF\0"){return n()}return false},TIFF:function(){return v},EXIF:function(){var s;s=t(p.exifIFD,r.exif);if(s.ExifVersion&&l.typeOf(s.ExifVersion)==="array"){for(var x=0,u="";x<s.ExifVersion.length;x++){u+=String.fromCharCode(s.ExifVersion[x])}s.ExifVersion=u}return s},GPS:function(){var s;s=t(p.gpsIFD,r.gps);if(s.GPSVersionID&&l.typeOf(s.GPSVersionID)==="array"){s.GPSVersionID=s.GPSVersionID.join(".")}return s},setExif:function(u,s){if(u!=="PixelXDimension"&&u!=="PixelYDimension"){return false}return w("exif",u,s)},getBinary:function(){return q.SEGMENT()},purge:function(){q.init(null);q=v=null;p={}}}}});b("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(u,m,v,q,l){function p(A){function t(){var B=0,s,C;while(B<=n.length){s=z.SHORT(B+=2);if(s>=65472&&s<=65475){B+=5;return{height:z.SHORT(B),width:z.SHORT(B+=2)}}C=z.SHORT(B+=2);B+=C-2}return null}function e(){if(!w||!y||!z){return}w.purge();y.purge();z.init(null);n=r=y=w=z=null}var n,z,y,w,r,x;n=A;z=new q;z.init(n);if(z.SHORT(0)!==65496){throw new m.ImageError(m.ImageError.WRONG_FORMAT)}y=new v(A);w=new l;x=!!w.init(y.get("app1")[0]);r=t.call(this);u.extend(this,{type:"image/jpeg",size:n.length,width:r&&r.width||0,height:r&&r.height||0,setExif:function(s,B){if(!x){return false}if(u.typeOf(s)==="object"){u.each(s,function(D,C){w.setExif(C,D)})}else{w.setExif(s,B)}y.set("app1",w.getBinary())},writeHeaders:function(){if(!arguments.length){return n=y.restore(n)}return y.restore(arguments[0])},stripHeaders:function(s){return y.strip(s)},purge:function(){e.call(this)}});if(x){this.meta={tiff:w.TIFF(),exif:w.EXIF(),gps:w.GPS()}}}return p});b("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(p,l,q){function m(e){function w(){var s,r;s=x.call(this,8);if(s.type=="IHDR"){r=s.start;return{width:A.LONG(r),height:A.LONG(r+=4)}}return null}function t(){if(!A){return}A.init(null);v=y=n=z=A=null}function x(C){var u,D,B,s;u=A.LONG(C);D=A.STRING(C+=4,4);B=C+=4;s=A.LONG(C+u);return{length:u,type:D,start:B,CRC:s}}var v,A,n,z,y;v=e;A=new q;A.init(v);(function(){var s=0,B=0,u=[35152,20039,3338,6666];for(B=0;B<u.length;B++,s+=2){if(u[B]!=A.SHORT(s)){throw new p.ImageError(p.ImageError.WRONG_FORMAT)}}})();y=w.call(this);l.extend(this,{type:"image/png",size:v.length,width:y.width,height:y.height,purge:function(){t.call(this)}});t.call(this)}return m});b("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(p,l,q,m){return function(e){var n=[q,m],r;r=function(){for(var s=0;s<n.length;s++){try{return new n[s](e)}catch(t){}}throw new l.ImageError(l.ImageError.WRONG_FORMAT)}();p.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(s){return s},stripHeaders:function(s){return s},purge:function(){}});p.extend(this,r);this.purge=function(){r.purge();r=null}}});b("moxie/runtime/html5/image/MegaPixel",[],function(){function m(O,F,K){var D=O.naturalWidth,H=O.naturalHeight;var B=K.width,T=K.height;var N=K.x||0,J=K.y||0;var Q=F.getContext("2d");if(l(O)){D/=2;H/=2}var L=1024;var G=document.createElement("canvas");G.width=G.height=L;var P=G.getContext("2d");var A=p(O,D,H);var I=0;while(I<H){var M=I+L>H?H-I:L;var q=0;while(q<D){var R=q+L>D?D-q:L;P.clearRect(0,0,L,L);P.drawImage(O,-q,-I);var z=q*B/D+N<<0;var C=Math.ceil(R*B/D);var n=I*T/H/A+J<<0;var t=Math.ceil(M*T/H/A);Q.drawImage(G,0,0,R,M,z,n,C,t);q+=L}I+=L}G=P=null}function l(v){var s=v.naturalWidth,w=v.naturalHeight;if(s*w>1024*1024){var u=document.createElement("canvas");u.width=u.height=1;var q=u.getContext("2d");q.drawImage(v,-s+1,0);return q.getImageData(0,0,1,1).data[3]===0}else{return false}}function p(A,D,w){var q=document.createElement("canvas");q.width=1;q.height=w;var y=q.getContext("2d");y.drawImage(A,0,0);var E=y.getImageData(0,0,1,w).data;var v=0;var C=w;var B=w;while(B>v){var z=E[(B-1)*4+3];if(z===0){C=B}else{v=B}B=C+v>>1}q=null;var x=B/w;return x===0?1:x}return{isSubsampled:l,renderTo:m}});b("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/MegaPixel","moxie/core/utils/Mime","moxie/core/utils/Env"],function(w,z,p,l,q,A,m,y,x){function v(){function r(){if(!I&&!D){throw new p.ImageError(p.DOMException.INVALID_STATE_ERR)}return I||D}function C(E){return l.atob(E.substring(E.indexOf("base64,")+7))}function J(N,E){return"data:"+(E||"")+";base64,"+l.btoa(N)}function K(N){var E=this;D=new Image;D.onerror=function(){G.call(this);E.trigger("error",p.ImageError.WRONG_FORMAT)};D.onload=function(){E.trigger("load")};D.src=/^data:[^;]*;base64,/.test(N)?N:J(N,n.type)}function L(Q,N){var P=this,E;if(window.FileReader){E=new FileReader;E.onload=function(){N(this.result)};E.onerror=function(){P.trigger("error",p.ImageError.WRONG_FORMAT)};E.readAsDataURL(Q)}else{return N(Q.getAsDataURL())}}function O(W,Q,E,S){var aa=this,P,Z,Y=0,V=0,R,T,N,U;M=S;U=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;if(z.inArray(U,[5,6,7,8])!==-1){var X=W;W=Q;Q=X}R=r();if(!E){P=Math.min(W/R.width,Q/R.height)}else{W=Math.min(W,R.width);Q=Math.min(Q,R.height);P=Math.max(W/R.width,Q/R.height)}if(P>1&&!E&&S){this.trigger("Resize");return}if(!I){I=document.createElement("canvas")}T=Math.round(R.width*P);N=Math.round(R.height*P);if(E){I.width=W;I.height=Q;if(T>W){Y=Math.round((T-W)/2)}if(N>Q){V=Math.round((N-Q)/2)}}else{I.width=T;I.height=N}if(!M){t(I.width,I.height,U)}u.call(this,R,I,-Y,-V,T,N);this.width=I.width;this.height=I.height;H=true;aa.trigger("Resize")}function u(S,P,T,R,N,Q){if(x.OS==="iOS"){m.renderTo(S,P,{width:N,height:Q,x:T,y:R})}else{var E=P.getContext("2d");E.drawImage(S,T,R,N,Q)}}function t(P,E,Q){switch(Q){case 5:case 6:case 7:case 8:I.width=E;I.height=P;break;default:I.width=P;I.height=E}var N=I.getContext("2d");switch(Q){case 2:N.translate(P,0);N.scale(-1,1);break;case 3:N.translate(P,E);N.rotate(Math.PI);break;case 4:N.translate(0,E);N.scale(1,-1);break;case 5:N.rotate(0.5*Math.PI);N.scale(1,-1);break;case 6:N.rotate(0.5*Math.PI);N.translate(0,-E);break;case 7:N.rotate(0.5*Math.PI);N.translate(P,-E);N.scale(-1,1);break;case 8:N.rotate(-0.5*Math.PI);N.translate(-P,0);break}}function G(){if(s){s.purge();s=null}B=D=I=n=null;H=false}var F=this,D,s,I,B,n,H=false,M=true;z.extend(this,{loadFromBlob:function(Q){var N=this,P=N.getRuntime(),E=arguments.length>1?arguments[1]:true;if(!P.can("access_binary")){throw new p.RuntimeError(p.RuntimeError.NOT_SUPPORTED_ERR)}n=Q;if(Q.isDetached()){B=Q.getSource();K.call(this,B);return}else{L.call(this,Q.getSource(),function(R){if(E){B=C(R)}K.call(N,R)})}},loadFromImage:function(N,E){this.meta=N.meta;n=new q(null,{name:N.name,size:N.size,type:N.type});K.call(this,E?B=N.getAsBinaryString():N.getAsDataURL())},getInfo:function(){var N=this.getRuntime(),E;if(!s&&B&&N.can("access_image_binary")){s=new A(B)}E={width:r().width||0,height:r().height||0,type:n.type||y.getFileMime(n.name),size:B&&B.length||n.size||0,name:n.name||"",meta:s&&s.meta||this.meta||{}};return E},downsize:function(){O.apply(this,arguments)},getAsCanvas:function(){if(I){I.id=this.uid+"_canvas"}return I},getAsBlob:function(e,E){if(e!==this.type){O.call(this,this.width,this.height,false)}return new q(null,{name:n.name||"",type:e,data:F.getAsBinaryString.call(this,e,E)})},getAsDataURL:function(N){var E=arguments[1]||90;if(!H){return D.src}if("image/jpeg"!==N){return I.toDataURL("image/png")}else{try{return I.toDataURL("image/jpeg",E/100)}catch(P){return I.toDataURL("image/jpeg")}}},getAsBinaryString:function(E,P){if(!H){if(!B){B=C(F.getAsDataURL(E,P))}return B}if("image/jpeg"!==E){B=C(F.getAsDataURL(E,P))}else{var N;if(!P){P=90}try{N=I.toDataURL("image/jpeg",P/100)}catch(e){N=I.toDataURL("image/jpeg")}B=C(N);if(s){B=s.stripHeaders(B);if(M){if(s.meta&&s.meta.exif){s.setExif({PixelXDimension:this.width,PixelYDimension:this.height})}B=s.writeHeaders(B)}s.purge();s=null}}H=false;return B},destroy:function(){F=null;G.call(this);this.getRuntime().getShim().removeInstance(this.uid)}})}return w.Image=v});b("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(v,y,p,l,q){function x(){var s;try{s=navigator.plugins["Shockwave Flash"];s=s.description}catch(r){try{s=(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(u){s="0.0"}}s=s.match(/\d+/g);return parseFloat(s[0]+"."+s[1])}function w(n){var r=this,e;n=v.extend({swf_url:y.swf_url},n);q.call(this,n,z,{access_binary:function(s){return s&&r.mode==="browser"},access_image_binary:function(s){return s&&r.mode==="browser"},display_media:q.capTrue,do_cors:q.capTrue,drag_and_drop:false,report_upload_progress:function(){return r.mode==="client"},resize_image:q.capTrue,return_response_headers:false,return_response_type:function(s){if(s==="json"&&!!window.JSON){return true}return !v.arrayDiff(s,["","text","document"])||r.mode==="browser"},return_status_code:function(s){return r.mode==="browser"||!v.arrayDiff(s,[200,404])},select_file:q.capTrue,select_multiple:q.capTrue,send_binary_string:function(s){return s&&r.mode==="browser"},send_browser_cookies:function(s){return s&&r.mode==="browser"},send_custom_headers:function(s){return s&&r.mode==="browser"},send_multipart:q.capTrue,slice_blob:function(s){return s&&r.mode==="browser"},stream_upload:function(s){return s&&r.mode==="browser"},summon_file_dialog:false,upload_filesize:function(s){return v.parseSizeStr(s)<=2097152||r.mode==="client"},use_http_method:function(s){return !v.arrayDiff(s,["GET","POST"])}},{access_binary:function(s){return s?"browser":"client"},access_image_binary:function(s){return s?"browser":"client"},report_upload_progress:function(s){return s?"browser":"client"},return_response_type:function(s){return v.arrayDiff(s,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(s){return v.arrayDiff(s,[200,404])?"browser":["client","browser"]},send_binary_string:function(s){return s?"browser":"client"},send_browser_cookies:function(s){return s?"browser":"client"},send_custom_headers:function(s){return s?"browser":"client"},stream_upload:function(s){return s?"client":"browser"},upload_filesize:function(s){return v.parseSizeStr(s)>=2097152?"client":"browser"}},"client");if(x()<10){this.mode=false}v.extend(this,{getShim:function(){return p.get(this.uid)},shimExec:function(u,s){var A=[].slice.call(arguments,2);return r.getShim().exec(this.uid,u,s,A)},init:function(){var A,t,u;u=this.getShimContainer();v.extend(u.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"});A='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+n.swf_url+'" ';if(y.browser==="IE"){A+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '}A+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+y.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>';if(y.browser==="IE"){t=document.createElement("div");u.appendChild(t);t.outerHTML=A;t=u=null}else{u.innerHTML=A}e=setTimeout(function(){if(r&&!r.initialized){r.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))}},5000)},destroy:function(s){return function(){s.call(r);clearTimeout(e);n=e=s=r=null}}(this.destroy)},m)}var z="flash",m={};q.addConstructor(z,w);return m});b("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(m,l){var p={slice:function(v,w,u,q){var t=this.getRuntime();if(w<0){w=Math.max(v.size+w,0)}else{if(w>0){w=Math.min(w,v.size)}}if(u<0){u=Math.max(v.size+u,0)}else{if(u>0){u=Math.min(u,v.size)}}v=t.shimExec.call(this,"Blob","slice",w,u,q||"");if(v){v=new l(t.uid,v)}return v}};return m.Blob=p});b("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime"],function(m){var l={init:function(n){this.getRuntime().shimExec.call(this,"FileInput","init",{name:n.name,accept:n.accept,multiple:n.multiple});this.trigger("ready")}};return m.FileInput=l});b("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(q,m){function p(r,t){switch(t){case"readAsText":return m.atob(r,"utf8");case"readAsBinaryString":return m.atob(r);case"readAsDataURL":return r}return null}var s="";var l={read:function(v,r){var n=this,u=n.getRuntime();if(v==="readAsDataURL"){s="data:"+(r.type||"")+";base64,"}n.bind("Progress",function(w,e){if(e){s+=p(e,v)}});return u.shimExec.call(this,"FileReader","readAsBase64",r.uid)},getResult:function(){return s},destroy:function(){s=null}};return q.FileReader=l});b("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(p,l){function q(r,s){switch(s){case"readAsText":return l.atob(r,"utf8");case"readAsBinaryString":return l.atob(r);case"readAsDataURL":return r}return null}var m={read:function(v,s){var u,n=this.getRuntime();u=n.shimExec.call(this,"FileReaderSync","readAsBase64",s.uid);if(!u){return null}if(v==="readAsDataURL"){u="data:"+(s.type||"")+";base64,"+u}return q(u,v,s.type)}};return p.FileReaderSync=m});b("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter"],function(w,p,y,v,m,q,x){var l={send:function(B,n){function D(){B.transport=E.mode;E.shimExec.call(t,"XMLHttpRequest","send",B,n)}function A(u,r){E.shimExec.call(t,"XMLHttpRequest","appendBlob",u,r.uid);n=null;D()}function s(u,r){var F=new x;F.bind("TransportingComplete",function(){r(this.result)});F.transport(u.getSource(),u.type,{ruid:E.uid})}var t=this,E=t.getRuntime();if(!p.isEmptyObj(B.headers)){p.each(B.headers,function(u,r){E.shimExec.call(t,"XMLHttpRequest","setRequestHeader",r,u.toString())})}if(n instanceof q){var C;n.each(function(u,r){if(u instanceof y){C=r}else{E.shimExec.call(t,"XMLHttpRequest","append",r,u)}});if(!n.hasBlob()){n=null;D()}else{var z=n.getBlob();if(z.isDetached()){s(z,function(r){z.destroy();A(C,r)})}else{A(C,z)}}}else{if(n instanceof y){if(n.isDetached()){s(n,function(r){n.destroy();n=r.uid;D()})}else{n=n.uid;D()}}else{D()}}},getResponse:function(t){var z,r,u=this.getRuntime();r=u.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob");if(r){r=new v(u.uid,r);if("blob"===t){return r}try{z=new m;if(!!~p.inArray(t,["","text"])){return z.readAsText(r)}else{if("json"===t&&!!window.JSON){return JSON.parse(z.readAsText(r))}}}finally{r.destroy()}}return null},abort:function(r){var n=this.getRuntime();n.shimExec.call(this,"XMLHttpRequest","abort");this.dispatchEvent("readystatechange");this.dispatchEvent("abort")}};return w.XMLHttpRequest=l});b("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(m,l){var p={getAsBlob:function(s){var t=this.getRuntime(),q=t.shimExec.call(this,"Transporter","getAsBlob",s);if(q){return new l(t.uid,q)}return null}};return m.Transporter=p});b("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(u,m,v,q,l){var p={loadFromBlob:function(z){function w(r){y.shimExec.call(n,"Image","loadFromBlob",r.uid);n=y=null}var n=this,y=n.getRuntime();if(z.isDetached()){var x=new v;x.bind("TransportingComplete",function(){w(x.result.getSource())});x.transport(z.getSource(),z.type,{ruid:y.uid})}else{w(z.getSource())}},loadFromImage:function(r){var n=this.getRuntime();return n.shimExec.call(this,"Image","loadFromImage",r.uid)},getAsBlob:function(w,s){var x=this.getRuntime(),r=x.shimExec.call(this,"Image","getAsBlob",w,s);if(r){return new q(x.uid,r)}return null},getAsDataURL:function(){var s=this.getRuntime(),r=s.Image.getAsBlob.apply(this,arguments),w;if(!r){return null}w=new l;return w.readAsDataURL(r)}};return u.Image=p});b("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(v,y,p,l,q){function x(G){var K=false,C=null,A,E,L,B,J,I=0;try{try{C=new ActiveXObject("AgControl.AgControl");if(C.IsVersionSupported(G)){K=true}C=null}catch(F){var D=navigator.plugins["Silverlight Plug-In"];if(D){A=D.description;if(A==="1.0.30226.2"){A="2.0.30226.2"}E=A.split(".");while(E.length>3){E.pop()}while(E.length<4){E.push(0)}L=G.split(".");while(L.length>4){L.pop()}do{B=parseInt(L[I],10);J=parseInt(E[I],10);I++}while(I<L.length&&B===J);if(B<=J&&!isNaN(B)){K=true}}}}catch(H){K=false}return K}function w(n){var r=this,e;n=v.extend({xap_url:y.xap_url},n);q.call(this,n,z,{access_binary:q.capTrue,access_image_binary:q.capTrue,display_media:q.capTrue,do_cors:q.capTrue,drag_and_drop:false,report_upload_progress:q.capTrue,resize_image:q.capTrue,return_response_headers:function(s){return s&&r.mode==="client"},return_response_type:function(s){if(s!=="json"){return true}else{return !!window.JSON}},return_status_code:function(s){return r.mode==="client"||!v.arrayDiff(s,[200,404])},select_file:q.capTrue,select_multiple:q.capTrue,send_binary_string:q.capTrue,send_browser_cookies:function(s){return s&&r.mode==="browser"},send_custom_headers:function(s){return s&&r.mode==="client"},send_multipart:q.capTrue,slice_blob:q.capTrue,stream_upload:true,summon_file_dialog:false,upload_filesize:q.capTrue,use_http_method:function(s){return r.mode==="client"||!v.arrayDiff(s,["GET","POST"])}},{return_response_headers:function(s){return s?"client":"browser"},return_status_code:function(s){return v.arrayDiff(s,[200,404])?"client":["client","browser"]},send_browser_cookies:function(s){return s?"browser":"client"},send_custom_headers:function(s){return s?"client":"browser"},use_http_method:function(s){return v.arrayDiff(s,["GET","POST"])?"client":["client","browser"]}});if(!x("2.0.31005.0")||y.browser==="Opera"){this.mode=false}v.extend(this,{getShim:function(){return p.get(this.uid).content.Moxie},shimExec:function(u,s){var A=[].slice.call(arguments,2);return r.getShim().exec(this.uid,u,s,A)},init:function(){var s;s=this.getShimContainer();s.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+n.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+y.global_event_dispatcher+'"/></object>';e=setTimeout(function(){if(r&&!r.initialized){r.trigger("Error",new l.RuntimeError(l.RuntimeError.NOT_INIT_ERR))}},y.OS!=="Windows"?10000:5000)},destroy:function(s){return function(){s.call(r);clearTimeout(e);n=e=s=r=null}}(this.destroy)},m)}var z="silverlight",m={};q.addConstructor(z,w);return m});b("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(m,l,p){return m.Blob=l.extend({},p)});b("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime"],function(m){var l={init:function(p){function n(r){var q="";for(var s=0;s<r.length;s++){q+=(q!==""?"|":"")+r[s].title+" | *."+r[s].extensions.replace(/,/g,";*.")}return q}this.getRuntime().shimExec.call(this,"FileInput","init",n(p.accept),p.name,p.multiple);this.trigger("ready")}};return m.FileInput=l});b("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(p,l,q){var m={init:function(){var t=this,s=t.getRuntime(),n;n=s.getShimContainer();q.addEvent(n,"dragover",function(r){r.preventDefault();r.stopPropagation();r.dataTransfer.dropEffect="copy"},t.uid);q.addEvent(n,"dragenter",function(r){r.preventDefault();var u=l.get(s.uid).dragEnter(r);if(u){r.stopPropagation()}},t.uid);q.addEvent(n,"drop",function(r){r.preventDefault();var u=l.get(s.uid).dragDrop(r);if(u){r.stopPropagation()}},t.uid);return s.shimExec.call(this,"FileDrop","init")}};return p.FileDrop=m});b("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(m,l,p){return m.FileReader=l.extend({},p)});b("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(m,l,p){return m.FileReaderSync=l.extend({},p)});b("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest"],function(m,l,p){return m.XMLHttpRequest=l.extend({},p)});b("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(m,l,p){return m.Transporter=l.extend({},p)});b("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/image/Image"],function(m,l,p){return m.Image=l.extend({},p,{getInfo:function(){var t=this.getRuntime(),u=["tiff","exif","gps"],s={meta:{}},q=t.shimExec.call(this,"Image","getInfo");if(q.meta){l.each(u,function(x){var v=q.meta[x],z,w,y,r;if(v&&v.keys){s.meta[x]={};for(w=0,y=v.keys.length;w<y;w++){z=v.keys[w];r=v[z];if(r){if(/^(\d|[1-9]\d+)$/.test(r)){r=parseInt(r,10)}else{if(/^\d*\.\d+$/.test(r)){r=parseFloat(r)}}s.meta[x][z]=r}}}})}s.width=parseInt(q.width,10);s.height=parseInt(q.height,10);s.size=parseInt(q.size,10);s.type=q.type;s.name=q.name;return s}})});b("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(u,m,w,q){function v(r){var s=this,n=w.capTest,e=w.capTrue;w.call(this,r,l,{access_binary:n(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:false,display_media:n(p.Image&&(q.can("create_canvas")||q.can("use_data_uri_over32kb"))),do_cors:false,drag_and_drop:false,filter_by_extension:n(function(){return q.browser==="Chrome"&&q.version>=28||q.browser==="IE"&&q.version>=10}()),resize_image:function(){return p.Image&&s.can("access_binary")&&q.can("create_canvas")},report_upload_progress:false,return_response_headers:false,return_response_type:function(x){if(x==="json"&&!!window.JSON){return true}return !!~u.inArray(x,["text","document",""])},return_status_code:function(x){return !u.arrayDiff(x,[200,404])},select_file:function(){return q.can("use_fileinput")},select_multiple:false,send_binary_string:false,send_custom_headers:false,send_multipart:true,slice_blob:false,stream_upload:function(){return s.can("select_file")},summon_file_dialog:n(function(){return q.browser==="Firefox"&&q.version>=4||q.browser==="Opera"&&q.version>=12||!!~u.inArray(q.browser,["Chrome","Safari"])}()),upload_filesize:e,use_http_method:function(x){return !u.arrayDiff(x,["GET","POST"])}});u.extend(this,{init:function(){this.trigger("Init")},destroy:function(t){return function(){t.call(s);t=s=null}}(this.destroy)});u.extend(this.getShim(),p)}var l="html4",p={};w.addConstructor(l,v);return p});b("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(u,m,w,q,l,p){function v(){function s(){var A=this,y=A.getRuntime(),E,B,C,D,z,e;e=m.guid("uid_");E=y.getShimContainer();if(t){C=w.get(t+"_form");if(C){m.extend(C.style,{top:"100%"})}}D=document.createElement("form");D.setAttribute("id",e+"_form");D.setAttribute("method","post");D.setAttribute("enctype","multipart/form-data");D.setAttribute("encoding","multipart/form-data");m.extend(D.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"});z=document.createElement("input");z.setAttribute("id",e);z.setAttribute("type","file");z.setAttribute("name",n.name||"Filedata");z.setAttribute("accept",r.join(","));m.extend(z.style,{fontSize:"999px",opacity:0});D.appendChild(z);E.appendChild(D);m.extend(z.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"});if(p.browser==="IE"&&p.version<10){m.extend(z.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"})}z.onchange=function(){var G;if(!this.value){return}if(this.files){G=this.files[0]}else{G={name:this.value}}x=[G];this.onchange=function(){};s.call(A);A.bind("change",function F(){var J=w.get(e),I=w.get(e+"_form"),H;A.unbind("change",F);if(A.files.length&&J&&I){H=A.files[0];J.setAttribute("id",H.uid);I.setAttribute("id",H.uid+"_form");I.setAttribute("target",H.uid+"_iframe")}J=I=null},998);z=D=null;A.trigger("change")};if(y.can("summon_file_dialog")){B=w.get(n.browse_button);q.removeEvent(B,"click",A.uid);q.addEvent(B,"click",function(F){if(z&&!z.disabled){z.click()}F.preventDefault()},A.uid)}t=e;E=C=B=null}var t,x=[],r=[],n;m.extend(this,{init:function(A){var y=this,z=y.getRuntime(),B;n=A;r=A.accept.mimes||l.extList2mimes(A.accept,z.can("filter_by_extension"));B=z.getShimContainer();(function(){var D,C,e;D=w.get(A.browse_button);if(z.can("summon_file_dialog")){if(w.getStyle(D,"position")==="static"){D.style.position="relative"}C=parseInt(w.getStyle(D,"z-index"),10)||1;D.style.zIndex=C;B.style.zIndex=C-1}e=z.can("summon_file_dialog")?D:B;q.addEvent(e,"mouseover",function(){y.trigger("mouseenter")},y.uid);q.addEvent(e,"mouseout",function(){y.trigger("mouseleave")},y.uid);q.addEvent(e,"mousedown",function(){y.trigger("mousedown")},y.uid);q.addEvent(w.get(A.container),"mouseup",function(){y.trigger("mouseup")},y.uid);D=null})();s.call(this);B=null;y.trigger({type:"ready",async:true})},getFiles:function(){return x},disable:function(e){var y;if(y=w.get(t)){y.disabled=!!e}},destroy:function(){var y=this.getRuntime(),e=y.getShim(),z=y.getShimContainer();q.removeAllEvents(z,this.uid);q.removeAllEvents(n&&w.get(n.container),this.uid);q.removeAllEvents(n&&w.get(n.browse_button),this.uid);if(z){z.innerHTML=""}e.removeInstance(this.uid);t=x=r=n=z=e=null}})}return u.FileInput=v});b("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(m,l){return m.FileReader=l});b("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(v,y,p,l,q,z,m,x){function w(){function r(F){var D=this,E,C,G,B,A=false;if(!s){return}E=s.id.replace(/_iframe$/,"");C=p.get(E+"_form");if(C){G=C.getElementsByTagName("input");B=G.length;while(B--){switch(G[B].getAttribute("type")){case"hidden":G[B].parentNode.removeChild(G[B]);break;case"file":A=true;break}}G=[];if(!A){C.parentNode.removeChild(C)}C=null}setTimeout(function(){z.removeEvent(s,"load",D.uid);if(s.parentNode){s.parentNode.removeChild(s)}var e=D.getRuntime().getShimContainer();if(!e.children.length){e.parentNode.removeChild(e)}e=s=null;F()},1)}var t,n,s;y.extend(this,{send:function(D,A){function F(){var I=C.getShimContainer()||document.body,H=document.createElement("div");H.innerHTML='<iframe id="'+G+'_iframe" name="'+G+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>';s=H.firstChild;I.appendChild(s);z.addEvent(s,"load",function(){var K;try{K=s.contentWindow.document||s.contentDocument||window.frames[s.id].document;if(/^4(0[0-9]|1[0-7]|2[2346])\s/.test(K.title)){t=K.title.replace(/^(\d+).*$/,"$1")}else{t=200;n=y.trim(K.body.innerHTML);e.trigger({type:"progress",loaded:n.length,total:n.length});if(E){e.trigger({type:"uploadprogress",loaded:E.size||1025,total:E.size||1025})}}}catch(J){if(l.hasSameOrigin(D.url)){t=404}else{r.call(e,function(){e.trigger("error")});return}}r.call(e,function(){e.trigger("load")})},e.uid)}var e=this,C=e.getRuntime(),G,u,B,E;t=n=null;if(A instanceof x&&A.hasBlob()){E=A.getBlob();G=E.uid;B=p.get(G);u=p.get(G+"_form");if(!u){throw new q.DOMException(q.DOMException.NOT_FOUND_ERR)}}else{G=y.guid("uid_");u=document.createElement("form");u.setAttribute("id",G+"_form");u.setAttribute("method",D.method);u.setAttribute("enctype","multipart/form-data");u.setAttribute("encoding","multipart/form-data");u.setAttribute("target",G+"_iframe");C.getShimContainer().appendChild(u)}if(A instanceof x){A.each(function(I,J){if(I instanceof m){if(B){B.setAttribute("name",J)}}else{var H=document.createElement("input");y.extend(H,{type:"hidden",name:J,value:I});if(B){u.insertBefore(H,B)}else{u.appendChild(H)}}})}u.setAttribute("action",D.url);F();u.submit();e.trigger("loadstart")},getStatus:function(){return t},getResponse:function(u){if("json"===u){if(y.typeOf(n)==="string"&&!!window.JSON){try{return JSON.parse(n.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(A){return null}}}else{if("document"===u){}}return n},abort:function(){var u=this;if(s&&s.contentWindow){if(s.contentWindow.stop){s.contentWindow.stop()}else{if(s.contentWindow.document.execCommand){s.contentWindow.document.execCommand("Stop")}else{s.src="about:blank"}}}r.call(this,function(){u.dispatchEvent("abort")})}})}return v.XMLHttpRequest=w});b("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(m,l){return m.Image=l});a(["moxie/core/utils/Basic","moxie/core/I18n","moxie/core/utils/Mime","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/file/File","moxie/file/FileInput","moxie/file/FileDrop","moxie/runtime/RuntimeTarget","moxie/file/FileReader","moxie/core/utils/Url","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events"])})(this);(function(c){var a={},d=c.moxie.core.utils.Basic.inArray;(function b(h){var f,g;for(f in h){g=typeof h[f];if(g==="object"&&!~d(f,["Exceptions","Env","Mime"])){b(h[f])}else{if(g==="function"){a[f]=h[f]}}}})(c.moxie);a.Env=c.moxie.core.utils.Env;a.Mime=c.moxie.core.utils.Mime;a.Exceptions=c.moxie.core.Exceptions;c.mOxie=a;if(!c.o){c.o=a}return a})(this);(function(f,b,h){function c(m){function l(u,q,s){var n={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};n[u]?p[n[u]]=q:s||(p[u]=q)}var k=m.required_features,p={};return typeof k=="string"?g.each(k.split(/\s*,\s*/),function(n){l(n,!0)}):typeof k=="object"?g.each(k,function(q,n){l(n,q)}):k===!0&&(m.multipart||(p.send_binary_string=!0),m.chunk_size>0&&(p.slice_blob=!0),m.resize.enabled&&(p.send_binary_string=!0),g.each(m,function(q,n){l(n,!!q,!0)})),p}var d=f.setTimeout,a={},g={VERSION:"2.1.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:b.mimes,ua:b.ua,typeOf:b.typeOf,extend:b.extend,guid:b.guid,get:function(m){var l=[],e;b.typeOf(m)!=="array"&&(m=[m]);var k=m.length;while(k--){e=b.get(m[k]),e&&l.push(e)}return l.length?l:null},each:b.each,getPos:b.getPos,getSize:b.getSize,xmlEncode:function(l){var k={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},m=/[<>&\"\']/g;return l?(""+l).replace(m,function(n){return k[n]?"&"+k[n]+";":n}):l},toArray:b.toArray,inArray:b.inArray,addI18n:b.addI18n,translate:b.translate,isEmptyObj:b.isEmptyObj,hasClass:b.hasClass,addClass:b.addClass,removeClass:b.removeClass,getStyle:b.getStyle,addEvent:b.addEvent,removeEvent:b.removeEvent,removeAllEvents:b.removeAllEvents,cleanName:function(l){var k,m;m=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"];for(k=0;k<m.length;k+=2){l=l.replace(m[k],m[k+1])}return l=l.replace(/\s+/g,"_"),l=l.replace(/[^a-z0-9_\-\.]+/gi,""),l},buildUrl:function(l,k){var m="";return g.each(k,function(p,n){m+=(m?"&":"")+encodeURIComponent(n)+"="+encodeURIComponent(p)}),m&&(l+=(l.indexOf("?")>0?"&":"?")+m),l},formatSize:function(m){function k(p,n){return Math.round(p*Math.pow(10,n))/Math.pow(10,n)}if(m===h||/\D/.test(m)){return g.translate("N/A")}var l=Math.pow(1024,4);return m>l?k(m/l,1)+" "+g.translate("tb"):m>(l/=1024)?k(m/l,1)+" "+g.translate("gb"):m>(l/=1024)?k(m/l,1)+" "+g.translate("mb"):m>1024?Math.round(m/1024)+" "+g.translate("kb"):m+" "+g.translate("b")},parseSize:b.parseSizeStr,predictRuntime:function(m,p){var l,k;return l=new g.Uploader(m),k=b.Runtime.thatCan(l.getOption().required_features,p||m.runtimes),l.destroy(),k},addFileFilter:function(l,k){a[l]=k}};g.addFileFilter("mime_types",function(l,k,m){l.length&&!l.regexp.test(k.name)?(this.trigger("Error",{code:g.FILE_EXTENSION_ERROR,message:g.translate("File extension error."),file:k}),m(!1)):m(!0)}),g.addFileFilter("max_file_size",function(m,k,p){var l;m=g.parseSize(m),k.size!==l&&m&&k.size>m?(this.trigger("Error",{code:g.FILE_SIZE_ERROR,message:g.translate("File size error."),file:k}),p(!1)):p(!0)}),g.addFileFilter("prevent_duplicates",function(m,k,p){if(m){var l=this.files.length;while(l--){if(k.name===this.files[l].name&&k.size===this.files[l].size){this.trigger("Error",{code:g.FILE_DUPLICATE_ERROR,message:g.translate("Duplicate file error."),file:k}),p(!1);return}}}p(!0)}),g.Uploader=function(ac){function aa(){var l,k=0,m;if(this.state==g.STARTED){for(m=0;m<ab.length;m++){!l&&ab[m].status==g.QUEUED?(l=ab[m],this.trigger("BeforeUpload",l)&&(l.status=g.UPLOADING,this.trigger("UploadFile",l))):k++}k==ab.length&&(this.state!==g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",ab))}}function F(k){k.percent=k.size>0?Math.ceil(k.loaded/k.size*100):100,af()}function af(){var l,k;ad.reset();for(l=0;l<ab.length;l++){k=ab[l],k.size!==h?(ad.size+=k.origSize,ad.loaded+=k.loaded*k.origSize/k.size):ad.size=h,k.status==g.DONE?ad.uploaded++:k.status==g.FAILED?ad.failed++:ad.queued++}ad.size===h?ad.percent=ab.length>0?Math.ceil(ad.uploaded/ab.length*100):0:(ad.bytesPerSec=Math.ceil(ad.loaded/((+(new Date)-U||1)/1000)),ad.percent=ad.size>0?Math.ceil(ad.loaded/ad.size*100):0)}function H(){var k=ae[0]||Z[0];return k?k.getRuntime().uid:!1}function K(l,m){if(l.ruid){var k=b.Runtime.getInfo(l.ruid);if(k){return k.can(m)}}return !1}function q(){this.bind("FilesAdded",R),this.bind("CancelUpload",z),this.bind("BeforeUpload",Y),this.bind("UploadFile",B),this.bind("UploadProgress",V),this.bind("StateChanged",s),this.bind("QueueChanged",af),this.bind("Error",Q),this.bind("FileUploaded",ah),this.bind("Destroy",r)}function G(v,w){var p=this,l=0,m=[],k={accept:v.filters.mime_types,runtime_order:v.runtimes,required_caps:v.required_features,preferred_caps:X,swf_url:v.flash_swf_url,xap_url:v.silverlight_xap_url};g.each(v.runtimes.split(/\s*,\s*/),function(e){v[e]&&(k[e]=v[e])}),v.browse_button&&g.each(v.browse_button,function(e){m.push(function(x){var u=new b.FileInput(g.extend({},k,{name:v.file_data_name,multiple:v.multi_selection,container:v.container,browse_button:e}));u.onready=function(){var y=b.Runtime.getInfo(this.ruid);b.extend(p.features,{chunks:y.can("slice_blob"),multipart:y.can("send_multipart"),multi_selection:y.can("select_multiple")}),l++,ae.push(this),x()},u.onchange=function(){p.addFile(this.files)},u.bind("mouseenter mouseleave mousedown mouseup",function(y){I||(v.browse_button_hover&&("mouseenter"===y.type?b.addClass(e,v.browse_button_hover):"mouseleave"===y.type&&b.removeClass(e,v.browse_button_hover)),v.browse_button_active&&("mousedown"===y.type?b.addClass(e,v.browse_button_active):"mouseup"===y.type&&b.removeClass(e,v.browse_button_active)))}),u.bind("error runtimeerror",function(){u=null,x()}),u.init()})}),v.drop_element&&g.each(v.drop_element,function(u){m.push(function(x){var e=new b.FileDrop(g.extend({},k,{drop_zone:u}));e.onready=function(){var y=b.Runtime.getInfo(this.ruid);p.features.dragdrop=y.can("drag_and_drop"),l++,Z.push(this),x()},e.ondrop=function(){p.addFile(this.files)},e.bind("error runtimeerror",function(){e=null,x()}),e.init()})}),b.inSeries(m,function(){typeof w=="function"&&w(l)})}function n(p,u,m){var k=new b.Image;try{k.onload=function(){k.downsize(u.width,u.height,u.crop,u.preserve_headers)},k.onresize=function(){m(this.getAsBlob(p.type,u.quality)),this.destroy()},k.onerror=function(){m(p)},k.load(p)}catch(l){m(p)}}function t(v,w,m){function p(y,u,A){var x=ag[y];switch(y){case"max_file_size":y==="max_file_size"&&(ag.max_file_size=ag.filters.max_file_size=u);break;case"chunk_size":if(u=g.parseSize(u)){ag[y]=u}break;case"filters":g.typeOf(u)==="array"&&(u={mime_types:u}),A?g.extend(ag.filters,u):ag.filters=u,u.mime_types&&(ag.filters.mime_types.regexp=function(D){var C=[];return g.each(D,function(E){g.each(E.extensions.split(/,/),function(L){/^\s*\*\s*$/.test(L)?C.push("\\.*"):C.push("\\."+L.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+C.join("|")+")$","i")}(ag.filters.mime_types));break;case"resize":A?g.extend(ag.resize,u,{enabled:!0}):ag.resize=u;break;case"prevent_duplicates":ag.prevent_duplicates=ag.filters.prevent_duplicates=!!u;break;case"browse_button":case"drop_element":u=g.get(u);case"container":case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":ag[y]=u,A||(k=!0);break;default:ag[y]=u}A||l.trigger("OptionChanged",y,u,x)}var l=this,k=!1;typeof v=="object"?g.each(v,function(x,u){p(u,x,m)}):p(v,w,m),m?(ag.required_features=c(g.extend({},ag)),X=c(g.extend({},ag,{required_features:!0}))):k&&(l.trigger("Destroy"),G.call(l,ag,function(u){u?(l.runtime=b.Runtime.getInfo(H()).type,l.trigger("Init",{runtime:l.runtime}),l.trigger("PostInit")):l.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})}))}function R(l,k){[].push.apply(ab,k),l.trigger("QueueChanged"),l.refresh()}function Y(m,k){if(ag.unique_names){var p=k.name.match(/\.([^.]+)$/),l="part";p&&(l=p[1]),k.target_name=k.id+"."+l}}function B(x,l){function v(){C-->0?d(k,1000):(l.loaded=w,x.trigger("Error",{code:g.HTTP_ERROR,message:g.translate("HTTP Error."),file:l,response:W.responseText,status:W.status,responseHeaders:W.getAllResponseHeaders()}))}function k(){var u,e,p,E;if(l.status==g.DONE||l.status==g.FAILED||x.state==g.STOPPED){return}p={name:l.target_name||l.name},D&&A.chunks&&y.size>D?(E=Math.min(D,y.size-w),u=y.slice(w,w+E)):(E=y.size,u=y),D&&A.chunks&&(x.settings.send_chunk_number?(p.chunk=Math.ceil(w/D),p.chunks=Math.ceil(y.size/D)):(p.offset=w,p.total=y.size)),W=new b.XMLHttpRequest,W.upload&&(W.upload.onprogress=function(L){l.loaded=Math.min(l.size,w+L.loaded),x.trigger("UploadProgress",l)}),W.onload=function(){if(W.status>=400){v();return}C=x.settings.max_retries,E<y.size?(u.destroy(),w+=E,l.loaded=Math.min(w,y.size),x.trigger("ChunkUploaded",l,{offset:l.loaded,total:y.size,response:W.responseText,status:W.status,responseHeaders:W.getAllResponseHeaders()}),b.Env.browser==="Android Browser"&&x.trigger("UploadProgress",l)):l.loaded=l.size,u=e=null,!w||w>=y.size?(l.size!=l.origSize&&(y.destroy(),y=null),x.trigger("UploadProgress",l),l.status=g.DONE,x.trigger("FileUploaded",l,{response:W.responseText,status:W.status,responseHeaders:W.getAllResponseHeaders()})):d(k,1)},W.onerror=function(){v()},W.onloadend=function(){this.destroy(),W=null},x.settings.multipart&&A.multipart?(p.name=l.target_name||l.name,W.open("post",m,!0),g.each(x.settings.headers,function(M,L){W.setRequestHeader(L,M)}),e=new b.FormData,g.each(g.extend(p,x.settings.multipart_params),function(M,L){e.append(L,M)}),e.append(x.settings.file_data_name,u),W.send(e,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:X,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url})):(m=g.buildUrl(x.settings.url,g.extend(p,x.settings.multipart_params)),W.open("post",m,!0),W.setRequestHeader("Content-Type","application/octet-stream"),g.each(x.settings.headers,function(M,L){W.setRequestHeader(L,M)}),W.send(u,{runtime_order:x.settings.runtimes,required_caps:x.settings.required_features,preferred_caps:X,swf_url:x.settings.flash_swf_url,xap_url:x.settings.silverlight_xap_url}))}var m=x.settings.url,D=x.settings.chunk_size,C=x.settings.max_retries,A=x.features,w=0,y;l.loaded&&(w=l.loaded=D*Math.floor(l.loaded/D)),y=l.getSource(),x.settings.resize.enabled&&K(y,"send_binary_string")&&!!~b.inArray(y.type,["image/jpeg","image/png"])?n.call(this,y,x.settings.resize,function(p){y=p,l.size=p.size,k()}):k()}function V(l,k){F(k)}function s(l){if(l.state==g.STARTED){U=+(new Date)}else{if(l.state==g.STOPPED){for(var k=l.files.length-1;k>=0;k--){l.files[k].status==g.UPLOADING&&(l.files[k].status=g.QUEUED,af())}}}}function z(){W&&W.abort()}function ah(k){af(),d(function(){aa.call(k)},1)}function Q(l,k){k.file&&(k.file.status=g.FAILED,F(k.file),l.state==g.STARTED&&(l.trigger("CancelUpload"),d(function(){aa.call(l)},1)))}function r(k){k.stop(),g.each(ab,function(l){l.destroy()}),ab=[],ae.length&&(g.each(ae,function(l){l.destroy()}),ae=[]),Z.length&&(g.each(Z,function(l){l.destroy()}),Z=[]),X={},I=!1,U=W=null,ad.reset()}var J=g.guid(),ag,ab=[],X={},ae=[],Z=[],U,ad,I=!1,W;ag={runtimes:b.Runtime.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:{enabled:!1,preserve_headers:!0,crop:!1},send_chunk_number:!0},t.call(this,ac,null,!0),ad=new g.QueueProgress,g.extend(this,{id:J,uid:J,state:g.STOPPED,features:{},runtime:null,files:ab,settings:ag,total:ad,init:function(){var k=this;typeof ag.preinit=="function"?ag.preinit(k):g.each(ag.preinit,function(e,l){k.bind(l,e)});if(!ag.browse_button||!ag.url){this.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")});return}q.call(this),G.call(this,ag,function(e){typeof ag.init=="function"?ag.init(k):g.each(ag.init,function(l,m){k.bind(m,l)}),e?(k.runtime=b.Runtime.getInfo(H()).type,k.trigger("Init",{runtime:k.runtime}),k.trigger("PostInit")):k.trigger("Error",{code:g.INIT_ERROR,message:g.translate("Init error.")})})},setOption:function(l,k){t.call(this,l,k,!this.runtime)},getOption:function(k){return k?ag[k]:ag},refresh:function(){ae.length&&g.each(ae,function(k){k.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=g.STARTED&&(this.state=g.STARTED,this.trigger("StateChanged"),aa.call(this))},stop:function(){this.state!=g.STOPPED&&(this.state=g.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){I=arguments[0]!==h?arguments[0]:!0,ae.length&&g.each(ae,function(k){k.disable(I)}),this.trigger("DisableBrowse",I)},getFile:function(l){var k;for(k=ab.length-1;k>=0;k--){if(ab[k].id===l){return ab[k]}}},addFile:function(x,A){function m(u,C){var l=[];b.each(v.settings.filters,function(e,D){a[D]&&l.push(function(E){a[D].call(v,e,u,function(L){E(!L)})})}),b.inSeries(l,C)}function y(u){var l=b.typeOf(u);if(u instanceof b.File){if(!u.ruid&&!u.isDetached()){if(!w){return !1}u.ruid=w,u.connectRuntime(w)}y(new g.File(u))}else{u instanceof b.Blob?(y(u.getSource()),u.destroy()):u instanceof g.File?(A&&(u.name=A),p.push(function(e){m(u,function(C){C||(k.push(u),v.trigger("FileFiltered",u)),d(e,1)})})):b.inArray(l,["file","blob"])!==-1?y(new b.File(null,u)):l==="node"&&b.typeOf(u.files)==="filelist"?b.each(u.files,y):l==="array"&&(A=null,b.each(u,y))}}var v=this,p=[],k=[],w;w=H(),y(x),p.length&&b.inSeries(p,function(){k.length&&v.trigger("FilesAdded",k)})},removeFile:function(l){var k=typeof l=="string"?l:l.id;for(var m=ab.length-1;m>=0;m--){if(ab[m].id===k){return this.splice(m,1)[0]}}},splice:function(p,l){var m=ab.splice(p===h?0:p,l===h?ab.length:l),k=!1;return this.state==g.STARTED&&(k=!0,this.stop()),this.trigger("FilesRemoved",m),g.each(m,function(u){u.destroy()}),this.trigger("QueueChanged"),this.refresh(),k&&this.start(),m},bind:function(m,k,p){var l=this;g.Uploader.prototype.bind.call(this,m,function(){var u=[].slice.call(arguments);return u.splice(0,1,l),k.apply(this,u)},0,p)},destroy:function(){this.trigger("Destroy"),ag=ad=null,this.unbindAll()}})},g.Uploader.prototype=b.EventTarget.instance,g.File=function(){function l(e){g.extend(this,{id:g.guid(),name:e.name||e.fileName,type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:g.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var m=this.getSource().getSource();return b.inArray(b.typeOf(m),["blob","file"])!==-1?m:null},getSource:function(){return k[this.id]?k[this.id]:null},destroy:function(){var m=this.getSource();m&&(m.destroy(),delete k[this.id])}}),k[this.id]=e}var k={};return l}(),g.QueueProgress=function(){var k=this;k.size=0,k.loaded=0,k.uploaded=0,k.failed=0,k.queued=0,k.percent=0,k.bytesPerSec=0,k.reset=function(){k.size=k.loaded=k.uploaded=k.failed=k.queued=k.percent=k.bytesPerSec=0}},f.plupload=g})(window,mOxie);function Smoothing(){var a=this;a.hasSmoothing=function(){if(typeof screen.fontSmoothingEnabled!="undefined"){return screen.fontSmoothingEnabled}else{try{var e=document.createElement("canvas");e.width="35";e.height="35";e.style.display="none";document.body.appendChild(e);var g=e.getContext("2d");g.textBaseline="top";g.font="32px Arial";g.fillStyle="black";g.strokeStyle="black";g.fillText("E",0,0);for(var c=8;c<=32;c++){for(var b=1;b<=32;b++){var d=g.getImageData(b,c,1,1).data[3];if(d!=255&&d!=0){document.body.removeChild(e);return true}}}document.body.removeChild(e);return false}catch(h){return null}}};a.insertClasses=function(){var b=!(navigator.userAgent.indexOf("Windows NT 5.1")>-1)?true:a.hasSmoothing();document.getElementsByTagName("html")[0].className+=b==true?" hasFontSmoothing-true":b==false?" hasFontSmoothing-false":" hasFontSmoothing-unknown"};a.insertClasses()}$(function(){Smoothing()});function cbUploadImg(a,b){if(a=="fail"){alert(b)}else{jQuery("#imgshow").attr("src",b);processImg.init("draw")}}var processImg={_imgsetWH:[120,120],_showimgWH:[120,120],_showimgTL:[0,0],_min:0,_max:100,_start:50};processImg.init=function(a){jQuery("#imgshow").draggable({snapMode:"outer",cursor:"move",drag:function(c,b){processImg._showimgTL[0]=b.position.top;processImg._showimgTL[1]=b.position.left},stop:function(c,b){}});if(a=="draw"){jQuery("#imgshow").load(this.getimgwh)}else{this.getimgwh()}this.slider()};processImg.getimgwh=function(){var g=jQuery("#imgshow").attr("src");var b=jQuery("<img>").attr("src",g).css({position:"absolute",top:"-1000px",left:"-1000px"}).appendTo("body");var a=[b.get(0).offsetWidth,b.get(0).offsetHeight];try{document.body.removeChild(b[0])}catch(f){}processImg._showimgWH=a;var d=(a[0]-processImg._imgsetWH[0])/2;var c=(a[1]-processImg._imgsetWH[1])/2;jQuery("#imgshow").css("left",-d+"px");jQuery("#imgshow").css("top",-c+"px")};processImg.slider=function(){jQuery("#imgshow").removeAttr("width");jQuery("#imgshow").removeAttr("height");jQuery("#slider3").slider("destroy");jQuery("#slider3").slider({min:processImg._min,max:processImg._max,startValue:processImg._start,stop:function(b,a){},slide:function(k,m){var d=processImg;var f=jQuery("#imgshow").attr("width");var a=jQuery("#imgshow").attr("height");var p,c,s,b;var q=m.value;var g=q/d._start;if(g*d._showimgWH[0]<=d._imgsetWH[0]||g*d._showimgWH[1]<=d._imgsetWH[1]){return}p=g*d._showimgWH[0];c=g*d._showimgWH[1];var r=(p-f)/2;var n=(c-a)/2;b=jQuery("#imgshow").css("left");if(b=="auto"){b="0px"}b=b.split("px")[0];b=b-r;jQuery("#imgshow").css("left",b+"px");s=jQuery("#imgshow").css("top");if(s=="auto"){s="0px"}s=s.split("px")[0];s=s-n;jQuery("#imgshow").css("top",s+"px");jQuery("#imgshow").attr("width",p);jQuery("#imgshow").attr("height",c)}})};processImg.imgchip=function(){var a={};var b=jQuery("#imgshow");a.wsrc=b.attr("width");a.hsrc=b.attr("height");a.w=b.attr("width");a.h=b.attr("height");a.l=b.css("left").split("px")[0];a.t=b.css("top").split("px")[0];a.img=b.attr("src");jQuery(":input[name='img']").val(a.img);jQuery(":input[name='wsrc']").val(a.wsrc);jQuery(":input[name='hsrc']").val(a.hsrc);jQuery(":input[name='w']").val(a.w);jQuery(":input[name='h']").val(a.h);jQuery(":input[name='l']").val(a.l);jQuery(":input[name='t']").val(a.t);jQuery("#chipform").submit()};processImg.cbImgChip=function(a){jQuery("#bglogo").val(proJson_2(a))};function closeDiv(a){$("#"+a)[0].style.display="none"}function G_MsnInvite(b,a){$("#invitemsg")[0].style.display="";var c="/home/msninvite_ajax.php";var d="msn="+b+"&passwd="+a;var e=new Ajax.Request(c,{method:"post",parameters:d,onComplete:function(f){CB_MsnInvite(f)}})}function CB_MsnInvite(b){var a=proJson(b);if(a==1){window.location.href="/home/msninvite_form.php"}else{$("#invitemsg")[0].style.display="none"}}function checkInviteMsn(){var b=$("#msn")[0].value;var a=$("#passwd")[0].value;if(b==""||a==""){alert("msn账号和密码不能为空");return}G_MsnInvite(b,a)}function copyToClipboard(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=b}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(g){alert("!!被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'")}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d){return}var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c){return}c.addDataFlavor("text/unicode");var h=new Object();var a=new Object();var h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var k=b;h.data=k;c.setTransferData("text/unicode",h,k.length*2);var f=Components.interfaces.nsIClipboard;if(!d){return false}d.setData(c,null,f.kGlobalClipboard)}}}return true}function go(a){window.location.href=a}function G_GetAnchor(){var a=window.location.href.split("#");if(a.length>=2){return a[1]}return"0"}var g_auserhighlight=new Array();function G_UserHighLight(){for(i=0;i<g_auserhighlight.length;i++){clearInterval(g_auserhighlight[i])}g_auserhighlight=new Array();if(typeof(userhighlight)=="object"){if(typeof($(userhighlight).length)=="undefined"){g_auserhighlight.push(setInterval("$(userhighlight).style.color=($(userhighlight).style.color!='#eda000')?'#eda000':'#eb4e01';",500))}else{for(i=0;i<$(userhighlight).length;i++){g_auserhighlight.push(setInterval("$(userhighlight)["+i+"].style.color=($(userhighlight)["+i+"].style.color!='#eda000')?'#eda000':'#eb4e01';",500))}}}}function G_ShowResponse(b,a){$(a).html(b.res);G_UserHighLight()}function G_ShowJsonResponse(b,a){$(a).html(proJson(b));G_UserHighLight()}function G_ShowJsonResponse_2(b,a){$(a).html(proJson_2(b));G_UserHighLight()}var infovote=new Array();function G_ShowVote(a,e,d){if(typeof(infovote[a])=="undefined"){var b="/group/infovote.php";var c="iid="+a+"&vote="+e;infovote[a]=1;jQuery.post(b,{iid:a,vote:e},function(f){G_ShowJsonResponse(f,d)},"json")}}function G_ShowGUInfo_2(d,c){var b="/group/infolist_gu.php";var a={};a.page=d;jQuery.post(b,a,function(e){G_ShowJsonResponse_2(e,c)},"json")}function G_ShowGUInfo_ta(d,e,c){var b="/group/infolist_gu.php";var a={};a.page=e;a.type="ta";a.uid=d;jQuery.post(b,a,function(f){G_ShowJsonResponse_2(f,c)},"json")}function G_Play(){mfwplayer.controls.play()}function G_Pause(){mfwplayer.controls.pause()}function G_Stop(){mfwplayer.controls.stop()}function G_Invite(){if($("form[name='invite'] :checkbox:checked").size()==0){alert("请至少选择一个邀请人。");return false}var a=jQuery.map($("form[name='invite'] :checkbox:checked").not("#checkbox"),function(c){return $(c).attr("id")});var b="";jQuery.each(a,function(c,d){if(d!=""){b+=d+","}});b=b.substr(0,(b.length)-1);$(":input[name='ids']").attr("value",b);$("form[name='invite']").submit()}function proJson(a){if("err"==a.flag){alert(a.flag)}else{return a.res}}function proJson_2(a){if("err"==a.flag){alert(a.flag)}else{return a.res}}(function(){var a=function(b){this.option=b};a.prototype.display=function(){var b=$(window).width(),c=this,d;$("body").prepend('<div id="ywf_topimg" style="display:none; width:'+b+'px; margin:0 auto; text-align:center; overflow: hidden; background:#5FCFE7; "><a target="_blank" href="/sales/" style="display:block; width:100%; height:100%;" ><img src="http://images.mafengwo.net/images/mdd/yiwofeng/topimg_20130829.jpg" /></a></div>');setTimeout(function(){$("#ywf_topimg").slideDown(1000);setTimeout(function(){$("#ywf_topimg").animate({height:100},{complete:function(){$("#ywf_topimg").bind("mouseenter",function(){d=setTimeout(function(){$("#ywf_topimg").animate({height:208},{duration:500})},500)});$("#ywf_topimg").bind("mouseleave",function(){clearTimeout(d);$("#ywf_topimg").animate({height:100},{duration:500})})}})},8*1000)},1500);$("#ywf_topimg").bind("click",function(){$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V4_目的地天窗跳转"))})};$(function(){return false;if(location.href.indexOf("sales")>0){return false}$.getJSON("/sales/ajax.php",{act:"GetInterest"},function(b){if(b.ret==1){(new a({sales_id:b.msg})).display();$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V5_天窗_弹出总数"))}})})})();(function(c){c.asset={Err:"服务器繁忙！"};function d(){c().keypress(b).keyup(b).mousedown(b)}function a(){c().unbind("keypress",b).unbind("keyup",b).unbind("mousedown",b)}function b(f){var g=!c(f.target).parents("#popup_container")[0];if(g){setTimeout(function(){try{c("#popup_container input").eq(0).focus()}catch(e){}},10)}}c.alerts={verticalOffset:-75,horizontalOffset:0,repositionOnResize:true,overlayOpacity:0.6,overlayColor:"#000000",draggable:false,okButton:"&nbsp;\u786e\u5b9a&nbsp;",cancelButton:"&nbsp;\u53d6\u6d88&nbsp;",dialogClass:null,modal:true,alert:function(g,h,k,f,e){if(h==null||typeof(h)=="undefined"){h=g;g=""}if(f==null||typeof(f)=="undefined"){f=1}return c.alerts._show(h,g,null,"alert",f,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},confirm:function(g,k,h,f,e){if(h==null||typeof(h)=="undefined"){h=g;g=""}if(f==null||typeof(f)=="undefined"){f=2}return c.alerts._show(h,g,null,"confirm",f,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},prompt:function(f,k,g,h,e){if(h==null||typeof(h)=="undefined"){h="请您输入"}return c.alerts._show(h,f,g,"prompt",-1,function(l){if(k){var m=k(l);if(m===true||typeof(m)=="undefined"){c.alerts._hide()}else{c.alerts._errtip(m)}}else{c.alerts._hide()}},e)},_show:function(n,m,k,h,g,p,f){c.alerts._hide();c.alerts._overlay("show");c("BODY").append('<div id="popup_container" class="popup-box new-popbox"><a class="close-btn" href="javascript:void(0);" id="popup_close"><i></i></a><div class="pop-ico" id="popup_icon"></div><div class="pop-ctn"><p class="hd" id="popup_title"></p><p class="bd" id="popup_message"></p></div><div class="pop-btns" id="popup_btn"></div></div>');if(c.alerts.dialogClass){c("#popup_container").addClass(c.alerts.dialogClass)}if(g==-1){c("#popup_icon").remove()}else{g=parseInt(g)>3?3:parseInt(g);c("#popup_icon").html('<i class="i'+g+'"></i>')}c("#popup_content").addClass(h);c("#popup_title").html(n.replace(/\n/g,""));c("#popup_message").html(m.replace(/\n/g,""));if(f){c("#popup_close").hide()}else{c("#popup_close").click(function(){c.alerts._hide()})}switch(h){case"alert":c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-submit" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){setTimeout(function(){p(true)},10)});c("#popup_ok").focus().keypress(function(q){if(q.keyCode==13||q.keyCode==27){c("#popup_ok").trigger("click")}});if(c.alerts.modal){d()}break;case"confirm":c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-cancel popbtn-half" id="popup_cancel">'+c.alerts.cancelButton+'</a><a role="button" tabindex="0" class="popbtn popbtn-submit popbtn-half" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){setTimeout(function(){p(true)},10)});c("#popup_cancel").click(function(){setTimeout(function(){p(false)},10)});c("#popup_ok").focus();c("#popup_ok").keypress(function(q){if(q.keyCode==13){c("#popup_ok").trigger("click")}});c("#popup_cancel").keypress(function(q){if(q.keyCode==13){c("#popup_cancel").trigger("click")}});if(c.alerts.modal){d()}break;case"prompt":c("#popup_title").closest(".pop-ctn").removeClass("pop-ctn").addClass("pop-con");c("#popup_message").html('<input type="text" class="oneline" id="popup_prompt" />');c("#popup_btn").html('<a role="button" tabindex="0" class="popbtn popbtn-cancel popbtn-half" id="popup_cancel">'+c.alerts.cancelButton+'</a><a role="button" tabindex="0" class="popbtn popbtn-submit popbtn-half" id="popup_ok">'+c.alerts.okButton+"</a>");c("#popup_ok").click(function(){var e=c("#popup_prompt").val();setTimeout(function(){p(e)},10)});c("#popup_cancel").click(function(){c.alerts._hide();setTimeout(function(){if(p){p(null)}},10)});c("#popup_prompt, #popup_ok").keypress(function(q){if(q.keyCode==13){c("#popup_ok").trigger("click")}if(q.keyCode==27){c("#popup_cancel").trigger("click")}});c("#popup_cancel").keypress(function(q){if(q.keyCode==13){c("#popup_cancel").trigger("click")}if(q.keyCode==27){c("#popup_cancel").trigger("click")}});if(k){c("#popup_prompt").val(k)}if(c.alerts.modal){d()}c("#popup_prompt").focus().select();break}if(c.alerts.draggable){try{c("#popup_container").draggable({handle:c("#popup_title")});c("#popup_title").css({cursor:"move"})}catch(l){}}return c("#popup_container")},_hide:function(){c("#popup_container").remove();if(c.alerts.modal){a()}c.alerts._overlay("hide")},_errtip:function(e){c("#popup_errortip").html(e).show()},_overlay:function(g){switch(g){case"show":c.alerts._overlay("hide");var l=c('<div id="popup_overlay"></div>').css({position:"fixed",zIndex:999,top:0,left:0,width:"100%",height:"100%",background:c.alerts.overlayColor,opacity:c.alerts.overlayOpacity}).appendTo(c("BODY"));var f=c('<iframe src="javascript:false;document.write(\'\');" class="popup_overlayiframe"></iframe>').css({opacity:0});var h=c.browser.msie&&(c.browser.version=="6.0")&&!c.support.style;if(h){l.html('<p style="width:100%;height:100%"/>').css("height",c(window).height()).css("width",c(window).width()).prepend(f);l=l.css({position:"absolute"})[0];try{for(var m in {Top:1,Left:1}){l.style.setExpression(m.toLowerCase(),"(_=(document.documentElement.scroll"+m+" || document.body.scroll"+m+"))+'px'")}}catch(k){}}break;case"hide":c("#popup_overlay").remove();break}},_timeid:0,_overShow:function(e,f){f=f||3000;c("#over_container").remove();c("body").append('<div id="over_container" style="display:none"><div id="over_message"></div></div>');c("#over_message").text(e).html(c("#over_message").text().replace(/\n/g,"<br />"));c("#over_container").show();clearTimeout(this._timeid);this._timeid=setTimeout(function(g){c("#over_container").hide("fast",function(){c(this).remove()})},f);return c("#over_container")},overAlert:function(f,e){return c.alerts._overShow(f,e)},_reposition:function(){var f=((c(window).height()/2)-(c("#popup_container").outerHeight()/2))+c.alerts.verticalOffset;var e=((c(window).width()/2)-(c("#popup_container").outerWidth()/2))+c.alerts.horizontalOffset;if(f<0){f=0}if(e<0){e=0}if(c.browser.msie&&parseInt(c.browser.version)<=6){f=f+c(window).scrollTop()}c("#popup_container").css({top:f+"px",left:e+"px"});c("#popup_overlay").height(c(document).height())},_maintainPosition:function(e){if(c.alerts.repositionOnResize){switch(e){case true:c(window).bind("resize",c.alerts._reposition);break;case false:c(window).unbind("resize",c.alerts._reposition);break}}}};c.fn.mTipHide=function(){if(c(this).data("mtip")){c(this).data("mtip").css("right",null);c(this).data("mtip").css("left","-1000px")}};c.fn.mTip=function(h,g,e){var g=g||"";var f='<div class="eject_container"><div class="eject"><p class="eject_position"></p><div class="eject_close btn_eject_close"><img title="关闭" src="http://images.mafengwo.net/images/wengweng/btn_close.gif" /></div><div><div class="eject_tit">'+h+'</div><div class="eject_ts">'+g+'</div></div><div class="m_t_10"></div></div></div>';return this.each(function(){var k=c(this).offset();var m=c(f);if(c(this).data("mtip")){if(e=="left"){c(this).data("mtip").css("left",null);c(this).data("mtip").css("right",c(this).data("pos")+"px")}else{c(this).data("mtip").css("left",c(this).data("pos")+"px")}if(h!=""){c(this).data("mtip").find("div.eject_tit").html(h)}if(g!=""){c(this).data("mtip").find("div.eject_ts").html(g)}return}c("BODY").append(m);m.hide().fadeIn("slow");m.find(".btn_eject_close").click(function(){m.css("right",null);m.css("left","-1000px")});if(e=="left"){var l=(c(window).width()-k.left)+10;m.find(".eject_position").addClass("eject_r");m.css({top:k.top+"px",right:l+"px"});c(this).data("pos",l)}else{if(e=="bottom"){m.find(".eject_position").addClass("eject_t");m.css({top:(k.top+c(this).outerHeight())+10+"px",left:k.left+"px"});c(this).data("pos",k.left)}else{if(e=="top"){m.find(".eject_position").addClass("eject_b");m.css({top:(k.top-m.outerHeight())-10+"px",left:k.left+"px"});c(this).data("pos",k.left)}else{m.find(".eject_position").addClass("eject_t");m.css({top:(k.top+c(this).outerHeight())+10+"px",left:k.left+"px"});c(this).data("pos",k.left)}}}c(this).data("mtip",m)})};mAlert=function(g,h,k,f,e){return c.alerts.alert(g,h,k,f,e)};mConfirm=function(g,k,h,f,e){return c.alerts.confirm(g,k,h,f,e)};mPrompt=function(f,k,g,h,e){return c.alerts.prompt(f,k,g,h,e)};mTinyAlert=function(e,f){return c.alerts.overAlert(e,f)};mFloatPanel=function(f,e){e=e||"top";return c("<div/>").appendTo(c("body")).addClass("floatpanel").html(f).addClass("floatpanel"+e)};mAjaxReplace=function(h,e,f,g){if(c(h).hasClass("moving")){return false}var g=g||"";if(g=="parent"){c(h).parent().hide()}else{c(h).hide()}c.post(e,f,function(k){if(k.ret==1){if(g=="parent"){c(h).parent().replaceWith(c(k.html).fadeIn(1500))}else{c(h).replaceWith(c(k.html).fadeIn(1500,function(){c(this).removeClass("moving")}).addClass("moving"))}}else{majaxerr(k)}},"json")};mSubStr=function(k,f){var e="";var g=0;for(var h=0;h<k.length;h++){if(k[h].match(/[^\x00-\xff]/ig)!=null){g+=2}else{g+=1}if(g>f){break}e+=k[h]}return e};c.fn.inputDefault=function(f){var e=f.ziClass||"gray";if(c(this).val().length==0){return this.focus(function(){if(c(this).hasClass(e)){c(this).val("").removeClass(e)}}).blur(function(){if(c.trim(c(this).val()).length==0){c(this).val(f.text).addClass(e)}}).val(f.text).addClass(e)}};c.fn.img2Bg=function(e){var e=e||{};return this.each(function(){var f=c(this).attr("img2")||e.url||"";if(f.length>0){c(this).data("ourl",c(this).attr("src"));c(this).mouseover(function(){c(this).attr("src",f)}).mouseout(function(){c(this).attr("src",c(this).data("ourl"))}).parent().focus(function(){c(this).trigger("blur")})}})};c.fn.selectInput=function(f){var e={};this.each(function(){var h=h||{};var g=h.def||"0";var l=c(this);var k=c(this);c(this).change(function(){if(c(this).val()==g){k=c('<input type="text" />').attr("name",c(this).attr("name")+"_i").attr("id",c(this).attr("id")+"_i").insertAfter(c(this)).dblclick(function(){l.show().children(":first-child").attr("selected","selected");c(this).hide()});c(this).hide()}});e.val=function(){if(l.is(":visible")){return l.val()}else{return k.val()}}});return e}})(jQuery);var _vs_fans_times=-999;function PK_n(a,f,d){var l='<div class="vs_fans"><div class="oneline"><div class="p_tit">下注彩金：</div><div class="p_rcon"><span class="h2"><select id="select_tipmoney"name="select2"size="1"class="input"><option>1000</option><option>2000</option><option>5000</option><option>8000</option><option>10000</option><option value="0">自定义</option></select></span><span class="ts" id="vs_fans_times">今日还可免费发起<span class="coin_t">0</span>次</span></div></div><div class="oneline"><div class="p_tit">选择粉丝：</div><div class="p_rcon"><input type="text"name="textfield"class="to_suggest"/></div></div><div class="oneline"><div class="p_tit">选择出拳：</div><div class="p_rcon"><a id="btn_1"href="javascript:void(0)"><img val="2" img2="http://file.mafengwo.net/images/game/handwar/man_s1_on.gif"src="http://file.mafengwo.net/images/game/handwar/man_s1.gif"width="120"height="120"border="0"title="剪子"/></a><a id="btn_2"href="javascript:void(0)"><img val="5" img2="http://file.mafengwo.net/images/game/handwar/man_s2_on.gif"src="http://file.mafengwo.net/images/game/handwar/man_s2.gif"width="120"height="120"border="0"title="包袱"/></a><a id="btn_3"href="javascript:void(0)"><img val="0" src="http://file.mafengwo.net/images/game/handwar/man_s3.gif"img2="http://file.mafengwo.net/images/game/handwar/man_s3_on.gif"width="120"height="120"border="0"title="锤"/></a></div></div><div class="oneline"><div class="p_tit">附言：</div><div class="p_rcon"><textarea name="textfield2"class="textfield_tosay"style="width:360px;"></textarea></div></div></div><div class="clr3"></div>';var f=f||false;var k=false;var e=false;var g=0;if(_vs_fans_times==-999){_vs_fans_times=parseInt(a)}if(parseInt(_vs_fans_times)<=-50){mAlert("今天你不能挑战了，明天再来吧~~");return}var c=mAlert(l,"挑战我的粉丝",function(){var n=parseInt(h.val());if(isNaN(n)||n<1000||n>10000){return"请输入1000-10000的整数"}if(!k){return"请选择出拳"}if(!f&&c.find("input.input_viled").length==0){return"请选择粉丝"}if(!e){e=true;var p=b.val;var m=0;if(f){m=f}else{m=c.find(".to_suggest").data("val")}var q=c.find("textarea").val();jQuery.getJSON("/ajax/ajax_wagerother.php",{touid:m,wagerid:p,challengeflg:"challenge",cash:n,msg:q},function(r){if(r.ret==1){mTinyAlert(r.msg||"操作成功！");if(typeof(d)=="function"){d(r.usercash)}}else{mAlert(r.msg||"操作失败！")}_vs_fans_times=parseInt(r.leavenum);e=false})}return true},-1).css({width:"500px",marginLeft:"-250px"}).find("textarea").inputDefault({text:"就想和你赌一把！"}).end();if(f){c.find(".to_suggest").parent().parent().remove()}else{c.find(".to_suggest").suggest("/ajax/ajax_suggest.php?type=fans")}var h=c.find("#select_tipmoney").selectInput();var b={};c.find("img").click(function(){k=true;if(b.url){b.obj.attr("src",b.url)}b.obj=jQuery(this);b.url=jQuery(this).attr("src");b.val=jQuery(this).attr("val");jQuery(this).attr("src",jQuery(this).attr("img2"))}).parent().focus(function(){jQuery(this).trigger("blur")});if(_vs_fans_times>0){jQuery("#vs_fans_times").html('今日还可免费发起<span class="coin_t">'+_vs_fans_times+"</span>次")}else{if(_vs_fans_times>-50){jQuery("#vs_fans_times").html('每交1000金币挑战1次，今日还可发起<span class="coin_t">'+(_vs_fans_times+50)+"</span>次")}else{jQuery("#vs_fans_times").html("今日你不能发起挑战了")}}}(function(a){a.suggest=function(r,f){var b=a(r).attr("autocomplete","off");var d;var q=false;var c=0;var t=[];var s=0;if(a.trim(b.val())==""||a.trim(b.val())=="中文/拼音"){b.val("中文/拼音").css("color","#aaa")}if(!f.attachObject){f.attachObject=a(document.createElement("ul")).appendTo("body")}d=a(f.attachObject);a("."+f.resultsClass).remove();d.addClass(f.resultsClass);k();a(window).scroll(function(){k()});a(window).load(k).resize(k);b.blur(function(){setTimeout(function(){d.hide()},200)});b.focus(function(){if(a.trim(a(this).val())=="中文/拼音"){a(this).val("")}k()});b.click(function(){var e=a.trim(a(this).val());h(e);a(this).select()});try{d.bgiframe()}catch(v){}b.keyup(p);function k(){var e=b.offset();d.css({top:(e.top+r.offsetHeight)+"px",left:e.left+"px"})}function p(A){if((/27$|38$|40$/.test(A.keyCode)&&d.is(":visible"))||(/^13$|^9$/.test(A.keyCode)&&x())){if(A.preventDefault){A.preventDefault()}if(A.stopPropagation){A.stopPropagation()}A.cancelBubble=true;A.returnValue=false;switch(A.keyCode){case 38:m();break;case 40:w();break;case 13:u();break;case 27:d.hide();break}}else{if(b.val().length!=c){b.css("color","#aaa").removeClass("input_viled");if(q){clearTimeout(q)}q=setTimeout(n,f.delay);c=b.val().length}else{d.show()}}}function y(A){for(var e=0;e<t.length;e++){if(t[e]["k"]==A){t.unshift(t.splice(e,1)[0]);return t[0]["items"]}}return false}function g(C,A,e){while(t.length&&(s+A>f.maxCacheSize)){var B=t.pop();s-=B.size}t.push({k:C,size:A,items:e});s+=A}function n(){var e=a.trim(b.val());h(e)}function l(C,B){var A="";if(C.length){for(var e=0;e<C.length;e++){A+='<li rel="'+C[e].name+'"><img align="absmiddle" src="'+C[e].logo+'"/><span val="'+C[e].userid+'">'+C[e].name+"</span></li>"}A='<div class="gray ac_result_tip">'+B+"，按拼音排序</div><ul>"+A+"</ul>"}else{suggest_tip='<div class="gray ac_result_tip">对不起，找不到：'+B+"</div>";A=suggest_tip+"<ul>"+A+"</ul>"}z(A)}function h(A){if(A!=""){var e=y(A);if(e){l(e,A)}else{a.getJSON(f.source,{k:A},function(B){l(B,A);g(A,B.length,B)})}}else{z('<div class="gray ac_result_tip">请输入中文/拼音或者↑↓选择</div>')}return}function z(e){d.html(e).show();d.children("ul").children("li:first-child").addClass(f.selectClass);d.children("ul").children("li").mouseover(function(){d.children("ul").children("li").removeClass(f.selectClass);a(this).addClass(f.selectClass)}).click(function(A){A.preventDefault();A.stopPropagation();u()})}function x(){if(!d.is(":visible")){return false}var e=d.children("ul").children("li."+f.selectClass);if(!e.length){e=false}return e}function u(){$currentResult=x();if($currentResult){b.val($currentResult.children("span").html().replace(/<span>.+?<\/span>/i,""));b.data("val",$currentResult.children("span").attr("val"));c=b.val().length;d.hide();b.css("color","#000").addClass("input_viled");if(a(f.dataContainer)){a(f.dataContainer).val($currentResult.attr("rel"))}if(f.onSelect){f.onSelect.apply(b[0],[$currentResult.children("span").attr("val")])}}}function w(){$currentResult=x();if($currentResult&&$currentResult.next().length){$currentResult.removeClass(f.selectClass).next().addClass(f.selectClass)}else{d.children("ul").children("li:last-child").removeClass(f.selectClass).end().children("li:first-child").addClass(f.selectClass)}}function m(){$currentResult=x();if($currentResult&&$currentResult.prev().length){$currentResult.removeClass(f.selectClass).prev().addClass(f.selectClass)}else{d.children("ul").children("li:first-child").removeClass(f.selectClass).end().children("li:last-child").addClass(f.selectClass)}}};a.fn.suggest=function(c,b){if(!c){return}b=b||{};b.source=c;b.hot_list=b.hot_list||[];b.delay=b.delay||200;b.resultsClass=b.resultsClass||"ac_results";b.selectClass=b.selectClass||"ac_over";b.matchClass=b.matchClass||"ac_match";b.minchars=b.minchars||1;b.delimiter=b.delimiter||"\n";b.onSelect=b.onSelect||false;b.dataDelimiter=b.dataDelimiter||"\t";b.dataContainer=b.dataContainer||"#SuggestResult";b.attachObject=b.attachObject||null;b.maxCacheSize=65536;this.each(function(){new a.suggest(this,b)});return this}})(jQuery);if(jQuery){(function(a){a.extend(a.fn,{uploadify:function(b){a(this).each(function(){settings=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:21,width:52,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:1,simUploadLimit:1,queueID:false,displayData:"percentage",onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},b);var e=location.pathname;e=e.split("/");e.pop();e=e.join("/")+"/";var f={};f.uploadifyID=settings.id;f.pagepath=e;if(settings.buttonImg){f.buttonImg=escape(settings.buttonImg)}if(settings.buttonText){f.buttonText=escape(settings.buttonText)}if(settings.rollover){f.rollover=true}f.script=settings.script;f.folder=escape(settings.folder);if(settings.scriptData){var g="";for(var d in settings.scriptData){g+="&"+d+"="+settings.scriptData[d]}f.scriptData=escape(g.substr(1))}f.width=settings.width;f.height=settings.height;f.wmode=settings.wmode;f.method=settings.method;f.queueSizeLimit=settings.queueSizeLimit;f.simUploadLimit=settings.simUploadLimit;if(settings.hideButton){f.hideButton=true}if(settings.fileDesc){f.fileDesc=settings.fileDesc}if(settings.fileExt){f.fileExt=settings.fileExt}if(settings.multi){f.multi=true}if(settings.auto){f.auto=true}if(settings.sizeLimit){f.sizeLimit=settings.sizeLimit}if(settings.checkScript){f.checkScript=settings.checkScript}if(settings.fileDataName){f.fileDataName=settings.fileDataName}if(settings.queueID){f.queueID=settings.queueID}if(settings.onInit()!==false){a(this).css("display","none");a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>');swfobject.embedSWF(settings.uploader,settings.id+"Uploader",settings.width,settings.height,"9.0.24",settings.expressInstall,f,{quality:"high",wmode:settings.wmode,allowScriptAccess:settings.scriptAccess});if(settings.queueID==false){a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>')}}if(typeof(settings.onOpen)=="function"){a(this).bind("uploadifyOpen",settings.onOpen)}a(this).bind("uploadifySelect",{action:settings.onSelect,queueID:settings.queueID},function(l,h,k){if(l.data.action(l,h,k)!==false){var m=Math.round(k.size/1024*100)*0.01;var n="KB";if(m>1000){m=Math.round(m*0.001*100)*0.01;n="MB"}var p=m.toString().split(".");if(p.length>1){m=p[0]+"."+p[1].substr(0,2)}else{m=p[0]}if(k.name.length>16){fileName=k.name.substr(0,15)+"..."}else{fileName=k.name}queue="#"+a(this).attr("id")+"Queue";if(l.data.queueID){queue="#"+l.data.queueID}a(queue).append('<div id="'+a(this).attr("id")+h+'" class="uploadifyQueueItem">								<div class="cancel">									<!--<a href="javascript:jQuery(\'#'+a(this).attr("id")+"').uploadifyCancel('"+h+'\')"><img src="'+settings.cancelImg+'" border="0" /></a>-->								</div>								<span class="fileName">'+fileName+" ("+m+n+')</span><span class="percentage"></span>								<div class="uploadifyProgress">									<div id="'+a(this).attr("id")+h+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>								</div>							</div>')}});if(typeof(settings.onSelectOnce)=="function"){a(this).bind("uploadifySelectOnce",settings.onSelectOnce)}a(this).bind("uploadifyQueueFull",{action:settings.onQueueFull},function(h,k){if(h.data.action(h,k)!==false){alert("The queue is full.  The max size is "+k+".")}});a(this).bind("uploadifyCheckExist",{action:settings.onCheck},function(p,n,m,l,r){var k=new Object();k=m;k.folder=e+l;if(r){for(var h in m){var q=h}}a.post(n,k,function(u){for(var s in u){if(p.data.action(p,n,m,l,r)!==false){var t=confirm("Do you want to replace the file "+u[s]+"?");if(!t){document.getElementById(a(p.target).attr("id")+"Uploader").cancelFileUpload(s,true,true)}}}if(r){document.getElementById(a(p.target).attr("id")+"Uploader").startFileUpload(q,true)}else{document.getElementById(a(p.target).attr("id")+"Uploader").startFileUpload(null,true)}},"json")});a(this).bind("uploadifyCancel",{action:settings.onCancel},function(n,h,m,p,l){if(n.data.action(n,h,m,p,l)!==false){var k=(l==true)?0:250;a("#"+a(this).attr("id")+h).fadeOut(k,function(){a(this).remove()})}});if(typeof(settings.onClearQueue)=="function"){a(this).bind("uploadifyClearQueue",settings.onClearQueue)}var c=[];a(this).bind("uploadifyError",{action:settings.onError},function(n,h,m,l){if(n.data.action(n,h,m,l)!==false){var k=new Array(h,m,l);c.push(k);a("#"+a(this).attr("id")+h+" .percentage").text(" - "+l.type+" Error");a("#"+a(this).attr("id")+h).addClass("uploadifyError")}});a(this).bind("uploadifyProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(l,h,k,m){if(l.data.action(l,h,k,m)!==false){a("#"+a(this).attr("id")+h+"ProgressBar").css("width",m.percentage+"%");if(l.data.toDisplay=="percentage"){displayData=" - "+m.percentage+"%"}if(l.data.toDisplay=="speed"){displayData=" - "+m.speed+"KB/s"}if(l.data.toDisplay==null){displayData=" "}a("#"+a(this).attr("id")+h+" .percentage").text(displayData)}});a(this).bind("uploadifyComplete",{action:settings.onComplete},function(m,h,l,k,n){if(m.data.action(m,h,l,unescape(k),n)!==false){a("#"+a(this).attr("id")+h+" .percentage").text(" - Completed");a("#"+a(this).attr("id")+h).fadeOut(250,function(){a(this).remove()})}});if(typeof(settings.onAllComplete)=="function"){a(this).bind("uploadifyAllComplete",{action:settings.onAllComplete},function(h,k){if(h.data.action(h,k)!==false){c=[]}})}})},uploadifySettings:function(f,k,c){var g=false;a(this).each(function(){if(f=="scriptData"&&k!=null){if(c){var l=k}else{var l=a.extend(settings.scriptData,k)}var n="";for(var m in l){n+="&"+m+"="+escape(l[m])}k=n.substr(1)}g=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(f,k)});if(k==null){if(f=="scriptData"){var b=unescape(g).split("&");var e=new Object();for(var d=0;d<b.length;d++){var h=b[d].split("=");e[h[0]]=h[1]}g=e}return g}},uploadifyUpload:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(b,false)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,true,false)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(false)})}})})(jQuery)}(function(a){a.fn.slt=function(c,b){return this.each(function(){var d;var f="";a(this).click(g);function g(){a("#liandong_select ul li").die();a("#liandong_select").remove();d=a(this).attr("id");var n=a(this).offset();var m=n.left;var k=n.top+20;var p="<div id='liandong_select'><span><a id='fh'>返回顶层列表</a><a id='gb'>[&nbsp;关闭&nbsp;]</a></span><div class='c'><ul></ul></div><div style='clear:both;'></div></div>";areasLen=b.length;var l="";for(var h=0;h<areasLen;h++){l=l+"<li title='"+b[h][1]+"' id='p"+b[h][0]+"'>"+b[h][1]+"</li>"}a("body").append(p);a("#liandong_select ul").append(l);a("#liandong_select").css({left:m+"px",top:k+"px"});a("#liandong_select span a#fh").bind("click",function(){a("#liandong_select ul").empty();a("#liandong_select ul").append(l);f=""});a("#liandong_select span a#gb").bind("click",function(){a("#liandong_select").remove()});a("#liandong_select ul li").live("click",e)}function e(){var l=a(this).attr("id");var k=f.length>0?f+">"+a(this).text():a(this).text();f=k;var h=c[l];if(h==undefined||h==""){a("#"+d+"Val").val(l.substr(1));a("#"+d).val(k);a("#liandong_select").css("display","none");f=""}else{listr="";pLen=h.length;for(j=0;j<pLen;j++){if("p"+h[j][0]==l){listr=listr+"<li title='"+h[j][1]+"' id='p"+h[j][0]+"' >"+h[j][1]+"</li>"}else{listr=listr+"<li title='"+h[j][1]+"' id='p"+h[j][0]+"'>"+h[j][1]+"</li>"}}a("#liandong_select ul").empty();a("#liandong_select ul").append(listr)}}})}})(jQuery);(function(a){a.fn.UpNum=function(d,e,b,c){return this.each(function(){var g=a(this).offset();var l=Math.round(g.left)+"px";var h=Math.round(g.top)+"px";if(d.toString().indexOf("-")==0){var m=Math.round(g.top)+30+"px"}else{var m=Math.round(g.top)-30+"px"}var f="20px";if(b){f=b}c=c||"120";var k=d||a(this).attr("money");a("<div/>").appendTo(a("body")).addClass("numeric").css({position:"absolute",top:h,left:l,color:(d.toString().indexOf("-")==0)?"#333":"red",fontFamily:"Georgia",fontSize:f,zIndex:c}).html(k).animate({top:m},{duration:1000,complete:function(){a(this).remove();if(e){e()}}})})}})(jQuery);(function(a){adf=function(d,c,b){mAjaxReplace(d,"/ajax/addfriend.php",{action:"addfollow",type:b,touid:c,_need_cstk:true})};def=function(d,c,b){mAjaxReplace(d,"/ajax/addfriend.php",{action:"delfriend",type:b,touid:c,_need_cstk:true})};m_lmsg=function(f,d,c){var b={url:"/ajax/ajax_send.php",content:"",_need_cstk:true};if(!c){c="bottom"}if(typeof(d)=="object"){a.extend(b,d)}var g=(typeof(b.word)!="undefined");var e="";if(g&&false){e='<textarea class="atsb_input">'+b.word+'</textarea><div class="atsb_h35"><div class="flt1"><input type="checkbox" value=""/>&nbsp;&nbsp;悄悄话</div><div class="flt2"><input type="button" class="btn_orange" value="确定"/></div></div>'}else{e='<textarea class="atsb_input"></textarea><input type="button" class="btn_orange" value="确定"/>'}a(f).mTip("<div class='atsb_tit'>留言</div>",e,c).data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var k=a.trim(a(f).data("mtip").find("textarea").val());var h=a(f).data("mtip").find(":checked").length;if(h&&true){b.type="msg"}if(k.length>0){a.extend(b,{content:k});a.post(b.url,b,function(l){if(l.ret==1){a(f).mTipHide();mTinyAlert("操作成功！")}else{majaxerr(l)}},"json")}else{mAlert("你还是写俩字吧")}}).end().find(":checkbox").click(function(){var h=a(f).data("mtip").find("textarea").val().replace(b.word,"");if(!a(this).is(":checked")){a(f).data("mtip").find("textarea").val(b.word+h)}else{a(f).data("mtip").find("textarea").val(h)}});setTimeout(function(){a(f).data("mtip").find("textarea").trigger("focus")[0].value+=""},20)};m_smsg=function(d,c){var b={url:"/ajax/ajax_send.php",_need_cstk:true};if(typeof(c)=="object"){a.extend(b,c)}a(d).mTip("<div class='atsb_tit'>发送消息</div>",'<textarea class="atsb_input"></textarea><div class="atsb_h35"><input type="button" class="btn_orange" value="确定"/></div>',"bottom").data("mtip").find("div.eject").css("width",270).find("input.btn_orange").click(function(){var e=a.trim(a(this).parent().prev().val());if(e.length>0){a.extend(b,{content:e});a.post(b.url,b,function(f){if(f.ret==1){a(d).mTipHide();mTinyAlert("操作成功！")}else{majaxerr(f)}},"json")}else{mAlert("空消息是不能发送的")}})}})(jQuery);function majaxerr(a,b){if(a.ret=="-1"){window.location.href="http://passport.mafengwo.cn"}else{mAlert("<div class=''>"+(a.msg||jQuery.asset.Err)+"</div>","",function(){if(typeof(b)=="function"){b()}})}}jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,f,a,h,g){return jQuery.easing[jQuery.easing.def](e,f,a,h,g)},easeInQuad:function(e,f,a,h,g){return h*(f/=g)*f+a},easeOutQuad:function(e,f,a,h,g){return -h*(f/=g)*(f-2)+a},easeInOutQuad:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f+a}return -h/2*((--f)*(f-2)-1)+a},easeInCubic:function(e,f,a,h,g){return h*(f/=g)*f*f+a},easeOutCubic:function(e,f,a,h,g){return h*((f=f/g-1)*f*f+1)+a},easeInOutCubic:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f+a}return h/2*((f-=2)*f*f+2)+a},easeInQuart:function(e,f,a,h,g){return h*(f/=g)*f*f*f+a},easeOutQuart:function(e,f,a,h,g){return -h*((f=f/g-1)*f*f*f-1)+a},easeInOutQuart:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f+a}return -h/2*((f-=2)*f*f*f-2)+a},easeInQuint:function(e,f,a,h,g){return h*(f/=g)*f*f*f*f+a},easeOutQuint:function(e,f,a,h,g){return h*((f=f/g-1)*f*f*f*f+1)+a},easeInOutQuint:function(e,f,a,h,g){if((f/=g/2)<1){return h/2*f*f*f*f*f+a}return h/2*((f-=2)*f*f*f*f+2)+a},easeInSine:function(e,f,a,h,g){return -h*Math.cos(f/g*(Math.PI/2))+h+a},easeOutSine:function(e,f,a,h,g){return h*Math.sin(f/g*(Math.PI/2))+a},easeInOutSine:function(e,f,a,h,g){return -h/2*(Math.cos(Math.PI*f/g)-1)+a},easeInExpo:function(e,f,a,h,g){return(f==0)?a:h*Math.pow(2,10*(f/g-1))+a},easeOutExpo:function(e,f,a,h,g){return(f==g)?a+h:h*(-Math.pow(2,-10*f/g)+1)+a},easeInOutExpo:function(e,f,a,h,g){if(f==0){return a}if(f==g){return a+h}if((f/=g/2)<1){return h/2*Math.pow(2,10*(f-1))+a}return h/2*(-Math.pow(2,-10*--f)+2)+a},easeInCirc:function(e,f,a,h,g){return -h*(Math.sqrt(1-(f/=g)*f)-1)+a},easeOutCirc:function(e,f,a,h,g){return h*Math.sqrt(1-(f=f/g-1)*f)+a},easeInOutCirc:function(e,f,a,h,g){if((f/=g/2)<1){return -h/2*(Math.sqrt(1-f*f)-1)+a}return h/2*(Math.sqrt(1-(f-=2)*f)+1)+a},easeInElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}return -(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l))+e},easeOutElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m)==1){return e+n}if(!l){l=m*0.3}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}return g*Math.pow(2,-10*h)*Math.sin((h*m-k)*(2*Math.PI)/l)+n+e},easeInOutElastic:function(f,h,e,n,m){var k=1.70158;var l=0;var g=n;if(h==0){return e}if((h/=m/2)==2){return e+n}if(!l){l=m*(0.3*1.5)}if(g<Math.abs(n)){g=n;var k=l/4}else{var k=l/(2*Math.PI)*Math.asin(n/g)}if(h<1){return -0.5*(g*Math.pow(2,10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l))+e}return g*Math.pow(2,-10*(h-=1))*Math.sin((h*m-k)*(2*Math.PI)/l)*0.5+n+e},easeInBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}return k*(f/=h)*f*((g+1)*f-g)+a},easeOutBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}return k*((f=f/h-1)*f*((g+1)*f+g)+1)+a},easeInOutBack:function(e,f,a,k,h,g){if(g==undefined){g=1.70158}if((f/=h/2)<1){return k/2*(f*f*(((g*=(1.525))+1)*f-g))+a}return k/2*((f-=2)*f*(((g*=(1.525))+1)*f+g)+2)+a},easeInBounce:function(e,f,a,h,g){return h-jQuery.easing.easeOutBounce(e,g-f,0,h,g)+a},easeOutBounce:function(e,f,a,h,g){if((f/=g)<(1/2.75)){return h*(7.5625*f*f)+a}else{if(f<(2/2.75)){return h*(7.5625*(f-=(1.5/2.75))*f+0.75)+a}else{if(f<(2.5/2.75)){return h*(7.5625*(f-=(2.25/2.75))*f+0.9375)+a}else{return h*(7.5625*(f-=(2.625/2.75))*f+0.984375)+a}}}},easeInOutBounce:function(e,f,a,h,g){if(f<g/2){return jQuery.easing.easeInBounce(e,f*2,0,h,g)*0.5+a}return jQuery.easing.easeOutBounce(e,f*2-g,0,h,g)*0.5+h*0.5+a}});function mGetTip(b){var a={url:"/recnew/ajax_addfds.php"};jQuery.extend(a,b);jQuery.post(a.url,a,function(c){if(c.ret==1){mTinyAlert(c.msg);if(a.reload){setTimeout(function(){top.location.reload()},1000)}}else{majaxerr(c)}},"json")}(function($){mGG=function(cnt,w){w+=4;$("<div class='mfwGG'><div class='mfwGGContent'>"+cnt+"</div><a alt='关闭' href='javascript:void(0)' class='mfwGGCloseBtn'>关闭</a></div>").appendTo($("body")).css({width:w+"px",marginLeft:"-"+w/2+"px"}).find(".mfwGGCloseBtn").click(function(){$(this).parent().fadeOut(400,function(){$(this).remove();$.alerts._overlay("hide")})});$.alerts._overlay("show")};Ding=function(iid,num,thisid,obj){$(obj).blur();if(!$(obj).data("inited")){if($(obj).closest(".float-bar").size()>0){$("#float_topvote"+thisid).UpNum("+1",function(){$("#float_topvote"+thisid).html(num+1)})}$("#topvote"+thisid).UpNum("+1",function(){$("#topvote"+thisid).html(num+1)});$.post("/group/ajax_infovote.php",{iid:iid},function(d){},"json")}$(obj).data("inited",true)};PH=function(select){return;jQuery(select).hover(function(){jQuery(this).attr({title:""});var _of=jQuery(this).offset();var _json=eval("("+jQuery(this).attr("tip")+")");var _sextxt="神秘人士";if(_json.city!=""){_json.city+="的"}if(_json.sex==1){_sextxt="帅哥"}if(_json.sex==0){_sextxt="美女"}var _atip=jQuery("<div class='mfwPH'><div class='mfwPHContent'><img align='middle' width='48' border='0' height='48' src='"+_json.logo+"'/></div><div class='mfwPHContentTxt'>"+_json.city+_sextxt+"</div></div>").appendTo(jQuery("body"));_atip.css({position:"absolute",zIndex:"50000",top:(_of.top-_atip.outerHeight())+"px",left:(_of.left+jQuery(this).outerWidth())+"px"}).fadeIn(400);jQuery(this).data("atip",_atip);return;_atip.css({position:"absolute",display:"none",zIndex:"50000",top:(jQuery(this).offset().top-_atip.outerHeight())+"px",left:(jQuery(this).offset().left+_atip.outerWidth())+"px"}).stop().fadeIn(400);jQuery(this).data("atip",_atip)},function(){jQuery(this).data("atip").remove()})}})(jQuery);(function(a){var b={"default":{template:{container:'<div align="right" class="paginator"></div>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>',firstpage:'<a class="ti" href="{url}"><< First</a>',lastpage:'<a class="ti" href="{url}">Next >></a>',dot:'<a class="ti" href="javascript:void(0)">…</a>'},handle:function(u,l,d){d.recordcount=parseInt(d.recordcount);d.pagesize=parseInt(d.pagesize);d.nowpage=parseInt(d.nowpage);var v=Math.floor(d.recordcount/d.pagesize)+(d.recordcount%d.pagesize?1:0);if(v<2){return}d.nowpage=d.nowpage>v?v:d.nowpage;var q=a(u.container);var g=a(u.firstpage.replace(/{url}/,c(d.url,d.pageparameter,1)));var f=a(u.lastpage.replace(/{url}/,c(d.url,d.pageparameter,d.nowpage==v?d.nowpage:d.nowpage+1)));if(d.nowpage>1){q.append(g)}var h=1,p=v,k=false,n=true,s=true;if(v>10){p=d.nowpage+4;h=d.nowpage-4;if(d.nowpage+4>=v){p=v;h=p-8;s=false}if(d.nowpage-4<=1){h=1;p=h+8;n=false}k=true}for(var m=h,r=1;m<=p;m++,r++){var e;if(k){e=a(u.loop.replace(/{url}/g,c(d.url,d.pageparameter,m)).replace(/{page}/g,m));if(a.inArray(r,[1,2])>-1){e=a(u.loop.replace(/{url}/g,c(d.url,d.pageparameter,r)).replace(/{page}/g,r))}if(a.inArray(r,[8,9])>-1){e=a(u.loop.replace(/{url}/g,c(d.url,d.pageparameter,v+r-9)).replace(/{page}/g,v+r-9))}if(r==3&&n){q.append(a(u.dot))}if(r==8&&s){q.append(a(u.dot))}}else{e=a(u.loop.replace(/{url}/g,c(d.url,d.pageparameter,m)).replace(/{page}/g,m))}if(m==d.nowpage){e.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}q.append(e)}if(d.nowpage<v){q.append(f)}l.html("");a(q).appendTo(l)}},tiny:{template:{container:'<div align="right" class="paginator"></div>',firstpage:'<a class="ti" href="{url}">&lt;&lt;</a>',lastpage:'<a class="ti" href="{url}">&gt;&gt;</a>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>'},handle:function(q,l,e){e.recordcount=parseInt(e.recordcount);e.pagesize=parseInt(e.pagesize);e.nowpage=parseInt(e.nowpage);var r=Math.floor(e.recordcount/e.pagesize)+(e.recordcount%e.pagesize?1:0);if(r<2){return}e.nowpage=e.nowpage>r?r:e.nowpage;var p=a(q.container);var g=a(q.firstpage.replace(/{url}/,c(e.url,e.pageparameter,1)));var f=a(q.lastpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage==r?e.nowpage:e.nowpage+1)));if(e.nowpage>1){p.append(g)}var h=1,n=r,d=false;if(r>5){d=true;n=e.nowpage+2;h=e.nowpage-2;if(e.nowpage+2>=r){n=r;h=n-4;d=false}if(e.nowpage-2<=1){h=1;n=h+4}}for(var m=h;m<=n;m++){_loop=a(q.loop.replace(/{url}/g,c(e.url,e.pageparameter,m)).replace(/{page}/g,m));if(m==e.nowpage){_loop.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}p.append(_loop)}if(d){var k=e.nowpage+5;if(k>r){k=r}p.append('<a class="ti" style="margin:2px;" href="'+c(e.url,e.pageparameter,k)+'">...</a>')}if(e.nowpage<r){p.append(f)}l.html("");a(p).appendTo(l)}},index:{template:{container:'<div align="right" class="paginator"></div>',firstpage:'<a class="ti" href="{url}">&lt;&lt;prev</a>',lastpage:'<a class="ti" href="{url}">next&gt;&gt;</a>',loop:'<a class="ti" href="{url}" style="margin:2px;">{page}</a>'},handle:function(q,l,e){e.recordcount=parseInt(e.recordcount);e.pagesize=parseInt(e.pagesize);e.nowpage=parseInt(e.nowpage);var r=Math.floor(e.recordcount/e.pagesize)+(e.recordcount%e.pagesize?1:0);if(r<2){return}e.nowpage=e.nowpage>r?r:e.nowpage;var p=a(q.container);var g=a(q.firstpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage-1)));var f=a(q.lastpage.replace(/{url}/,c(e.url,e.pageparameter,e.nowpage==r?e.nowpage:e.nowpage+1)));if(e.nowpage>1){p.append(g)}var h=1,n=r,d=false;if(r>9){d=true;n=e.nowpage+4;h=e.nowpage-4;if(e.nowpage+4>=r){n=r;h=n-8;d=false}if(e.nowpage-4<=1){h=1;n=h+8}}for(var m=h;m<=n;m++){_loop=a(q.loop.replace(/{url}/g,c(e.url,e.pageparameter,m)).replace(/{page}/g,m));if(m==e.nowpage){_loop.css({"background-color":"#946400",border:"1px solid #8B4505",color:"#FFFFFF"}).attr("href","javascript:void(0)")}p.append(_loop)}if(d){var k=e.nowpage+9;if(k>r){k=r}p.append('<a class="ti" style="margin:2px;" href="'+c(e.url,e.pageparameter,k)+'">...</a>')}if(e.nowpage<r){p.append(f)}l.html("");a(p).appendTo(l)}}};function c(d,f,g){var e=new RegExp("([?&])"+f+"=\\d*","g");d=d.replace(e,"$1");return(d+(d.indexOf("?")>-1?"&":"?")+f+"="+g).replace(/&+/g,"&").replace(/\?&/g,"?")}a.fn.Pager=function(d){var f={pagesize:10,nowpage:1,recordcount:100,url:window.location.href.toString(),pageparameter:"page",config:"default"};var e=a.extend(f,d||{});return this.each(function(){var g=b[e.config]||b["default"];g.handle(g.template,a(this),e)})}})(jQuery);(function(b){MAJAXBUSY=false;var a={"23":"快长大吧！","20":"虎年能吃能赚！","26":"其实。。那个。。","27":"赚钱千日供此浪漫一时！","28":"赶快给换上！","29":"这只是开始！","30":"洗洗更健康！","31":"总入不敷出也不行！","32":"要有房！要有车！","33":"放下武器，舍身成佛！"};mCsend=function(c){if(MAJAXBUSY){return}MAJAXBUSY=true;b.post("/goods/ajax.php",{act:"htmlsentgift",typeid:19},function(f){MAJAXBUSY=false;var e=mAlert(f.html,"赠送礼物",function(){if(MAJAXBUSY){return}if(typeof(c)=="undefined"&&e.find("input.input_viled").length==0){return"请选择粉丝"}if(e.find("li.on").length==0){return"请选择礼物"}var k="";if(c){k=c}else{k=b("#ipt_fans").data("val")}var h=e.find("li.on").attr("gid");var g=e.find("textarea").val();var d=e.find(":checked").length;MAJAXBUSY=true;b.post("/goods/ajax.php",{act:"sendgift",touid:k,gid:h,msg:g,anony:d},function(l){MAJAXBUSY=false;if(l.ret==1){mTinyAlert(l.msg);if(window.location.href.toString().indexOf("http://www.mafengwo.cn/u/")==0){setTimeout(function(){window.location.reload()},1500)}}else{majaxerr(l)}},"json");return true}).css({width:"500px",marginLeft:"-250px",position:"absolute",top:"17%"});e.find("li").click(function(){e.find("li.on").removeClass("on");b(this).addClass("on");var d=b(this).attr("gid");if(e.find("textarea").hasClass("gray")){if(a[d]){e.find("textarea").unbind("focus");e.find("textarea").unbind("blur");e.find("textarea").val(a[d]).inputDefault({text:a[d]})}}});e.find("textarea").inputDefault({text:"哥送的不是礼物，是寂寞！"});if(c){b("#ipt_fans").parent().parent().hide()}else{b("#ipt_fans").suggest("/ajax/ajax_suggest.php?type=fans")}},"json")};mGetGift=function(c){if(MAJAXBUSY){return}MAJAXBUSY=true;jQuery.post("/goods/ajax.php",{act:"getgift",ugid:c},function(e){MAJAXBUSY=false;if(e.ret==1){if(e.msg=="key555"){mAlert("恭喜，从"+e.html+"里掏出了铜钥匙！")}else{if(e.msg=="key888"){mAlert("恭喜，从"+e.html+"里掏出了金钥匙！")}else{mAlert("恭喜，从"+e.html+"里掏出"+e.msg+"金币！")}}}else{majaxerr(e)}},"json")};mGapple=function(){if(MAJAXBUSY){return}MAJAXBUSY=true;jQuery.post("/goods/ajax.php",{act:"apple"},function(c){MAJAXBUSY=false;if(c.ret==1){mAlert("恭喜您成功领取平安果和18888金币，在此蚂蜂窝全体圣斗士祝您平安夜快乐，圣诞快乐！","领取成功",function(){window.location.reload()});jQuery("#popup_close").hide()}else{majaxerr(c)}},"json")}})(jQuery);jQuery(function(){jQuery("#pnl_xmastree").unbind("click");jQuery("#pnl_xmastree").click(function(){if(jQuery("#pnl_xmastree").data("click")){}else{jQuery("#pnl_xmastree").data("click",true);var a=jQuery(this).attr("tid");jQuery.post("/goods/ajax.php",{act:"yao",ugid:a},function(b){if(b.ret==1){if(typeof(xnfeed)=="function"){xnfeed()}mAlert("恭喜，你摇出了"+b.msg+"金币！")}else{if(b.ret==3){mConfirm("只有粉丝才能摇TA家的树，现在就成为TA的粉丝吧？",function(c){if(c){jQuery.post("/ajax/addfriend.php",{action:"addfollow",type:"attfri",touid:b.msg,_need_cstk:true},function(d){if(d.ret==1){mTinyAlert("操作成功！")}else{majaxerr(d)}},"json")}},"成为TA的粉丝")}else{majaxerr(b)}}jQuery("#pnl_xmastree").data("click",false)},"json")}})});Scroll=function(a){this.oNote=jQuery("#"+a.elid)||null;this.height=a.lineHeight||15;this.count=a.displayCount||1;this.delay=a.delay||5;this.delay=(this.delay||1)*1000;this.interval=new Array();this.scrollNum=a.scrollNum||this.count;this.scrollHeight=this.height*this.scrollNum;this.oHeight=this.height*this.count;this.ctrl=a.ctrl||null;this.running=false;this.init()};Scroll.prototype={start:function(b){var a=this;if(this.oNote.attr("scrollHeight")-this.oHeight<=this.oNote.attr("scrollTop")){this.oNote.attr("scrollTop",this.oNote.attr("scrollHeight")/2-this.oHeight)}this.clear_interval(1);this.interval[1]=setInterval(function(){a.scroll_note(b)},5)},scroll_note:function(a){if(a){this.oNote[0].scrollTop++}else{this.oNote[0].scrollTop--}this.running=true;if(this.oNote[0].scrollTop%this.scrollHeight==0){this.clear_interval(1);this.running=false}},set_interval:function(){var a=this;this.interval[0]=setInterval(function(){a.start(true)},this.delay)},clear_interval:function(a){clearInterval(this.interval[a])},init:function(){var a=this;var b=this.oNote.html();this.oNote.html(b+b);this.oNote.css("height",this.oHeight);this.oNote.css("overflow","hidden");this.oNote.css("padding","0px");this.oNote.find("li").css("margin","0px");this.oNote.attr("scrollTop","0px");if(this.oNote.attr("scrollHeight")>this.oHeight){this.oNote.mouseover(function(){a.clear_interval(0)});this.oNote.mouseout(function(){a.set_interval()});if(this.ctrl){this.ctrl[0].mouseover(function(){a.clear_interval(0)});this.ctrl[0].mouseout(function(){a.set_interval()});this.ctrl[1].mouseover(function(){a.clear_interval(0)});this.ctrl[1].mouseout(function(){a.set_interval()});this.ctrl[0].click(function(){a.start(false)});this.ctrl[1].click(function(){a.start(true)})}this.set_interval()}else{if(this.ctrl){this.ctrl[0].hide();this.ctrl[1].hide()}}}};jQuery(function(){if(!jQuery("#pnl_notice").is(":visible")){jQuery("#pnl_notice").show();new Scroll({elid:"pnl_notice",lineHeight:25,scrollNum:1})}});(function(a){a.fn.LoadImage=function(b){b=a.extend({loadpic:"",w:530,h:350},b);return this.each(function(){a.fn.LoadImage.Showimg(a(this),b)})};a.fn.LoadImage.Showimg=function(d,c){var e=d.attr("src");var b=new Image();b.src=e;d.attr("src","");var f=a('<div><img width="'+c.w+'" height="'+c.h+'" src="'+c.loadpic+'" /><img src="http://file.mafengwo.cn/images/plugins/loading_blue.gif" /></div>').appendTo(a("body")).css({position:"absolute",top:d.offset().top,left:d.offset().left});d.hide();if(!b.complete){jQuery(b).bind("error load onreadystatechange",function(){f.remove();d.attr("src",e);d.show()})}else{f.remove();d.attr("src",e);d.show()}}})(jQuery);var mfw_poke=function(a){var b=mAlert('<label style="cursor:pointer" for="pokeitem_1"><input id="pokeitem_1" type="radio" checked="checked" value="对你说“很高兴认识你”" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i1.gif">很高兴认识你</label><label style="cursor:pointer" for="pokeitem_2"><input value="向你打招呼" id="pokeitem_2" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i2.gif">打招呼</label><label style="cursor:pointer" for="pokeitem_3"><input  value="同你握了下手" id="pokeitem_3" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/poke/i3.gif">握手</label><label style="cursor:pointer" for="pokeitem_4"><input value="聊聊" id="pokeitem_4" type="radio" name="acttype"><img src="http://images.mafengwo.net/images/home/icon_7.gif">聊聊</label><div id="pnl_pokechat" class="hide"><br>说点什么：<br><textarea style="width:200px;height:50px"></textarea></div>',"打个招呼",function(){var d=jQuery.trim(b.find(":checked").val());if(d=="聊聊"){var c=jQuery.trim(jQuery("#pnl_pokechat textarea").val());if(c.length>0){jQuery.post("/ajax/ajax_send.php",{touid:a,type:"msg",content:c,_need_cstk:true},function(e){if(e.ret==1){mTinyAlert(e.msg)}else{majaxerr(e)}},"json")}else{return"说点什么吧！"}}else{jQuery.post("/ajax/ajax_poke.php",{touid:a,msg:d,act:"poke"},function(e){if(e.ret==1){mTinyAlert(e.msg)}else{majaxerr(e)}},"json")}},-1);b.find(":radio").click(function(){if(jQuery(this).attr("id")=="pokeitem_4"){jQuery("#pnl_pokechat").removeClass("hide")}else{jQuery("#pnl_pokechat").addClass("hide")}});jQuery(".pop-ctn").addClass("pop-con").removeClass("pop-ctn")};mPop=function(b,d,c,a){mPop.GUID++;this.content=b;this.title=d||"提示";this.ctrl=c||{"确定":""};this.overlay=a||false;this.id="mPop"+mPop.GUID;this.obj=jQuery(mPop.prototype.tpl).appendTo("body").attr("id",this.id);this.init();return this};mPop.prototype.tpl='<div class="p_w"><div class="p_c"><h3><span class="_t"></span></h3><div class="ct"><p class="_p"></p></div><a href="javascript:void(0)" class="c _c" title="关闭">关</a><div class="b _b"></div></div><div class="bg"></div></div>';mPop.prototype.init=function(){var a=this;this.updateT(this.title);this.updateP(this.content);this.updateB(this.ctrl);this.obj.find("._c").click(function(){a.hide()});if(this.overlay){$.alerts._overlay("show")}mPop.list[this.id]=this.obj};mPop.prototype.close=function(){this.obj.remove();mPop.list[this.id]=null;if(this.overlay){$.alerts._overlay("hide")}};mPop.prototype.hide=function(){this.obj.hide();if(this.overlay){$.alerts._overlay("hide")}};mPop.prototype.updateP=function(a){this.obj.find("._p").html(a)};mPop.prototype.updateT=function(a){this.obj.find("._t").html(a)};mPop.prototype.updateB=function(a){this.obj.find("._b").html("");for(var c in a){var d=jQuery('<button type="button">'+c+"</button>").appendTo(this.obj.find("._b"));if(typeof(a[c])=="function"){d.click(function(){a[c](d)})}else{d.click(this.hide)}}};mPop.closeAll=function(){for(var a in mPop.list){mPop.list[a].remove();mPop.list[a]=null}};mPop.prototype.hideC=function(){this.obj.find("._c").remove()};mPop.GUID=0;mPop.list={};(function(b){var a;b.fn.seekIterate=function(c){var d=this;d.eq(c).seekExecute();setTimeout(function(){if(c<d.length-1){d.seekIterate(c+1)}},a.multiple.interval)};b.fn.seekExecute=function(){this.each(function(f){var e=jQuery(this);var d=a.startFrom;var c=b("<div id='divHilight"+f+"' />");c.css({width:d[0]==window?d.width()-10:d.outerWidth(),height:d[0]==window?d.height()-10:d.outerHeight(),"background-color":a.css.backgroundColor,"border-color":a.css.borderColor,"border-style":a.css.borderStyle,"border-width":a.css.borderWidth,position:"absolute",top:d[0]==window?0:d.offset().top,bottom:0,right:0,left:d[0]==window?0:d.offset().left,padding:"0px"}).appendTo("body").animate({top:e.offset().top-c.css("border-top-width").replace("px",""),left:e.offset().left-c.css("border-left-width").replace("px",""),width:e.outerWidth(),height:e.outerHeight()},a.animation.speed,a.animation.easeFunction,function(){c.animate({opacity:"0"},200).animate({opacity:"1"},200).animate({opacity:"0"},200).animate({opacity:"1"},200).animate({opacity:"0"},200,function(){c.remove()})})})};b.fn.seek=function(c){a=b.extend({},b.fn.seek.defaults,c);if(c&&c.css){a.css=b.extend({},b.fn.seek.defaults.css,c.css)}if(c&&c.animation){a.animation=b.extend({},b.fn.seek.defaults.animation,c.animation)}if(c&&c.multiple){a.multiple=b.extend({},b.fn.seek.defaults.multiple,c.multiple)}var d=this;if(a.multiple.simultaneous){d.not(a.startFrom).seekExecute()}else{d.not(a.startFrom).seekIterate(0)}};b.fn.seek.defaults={css:{backgroundColor:"Transparent",borderColor:"#ff4444",borderStyle:"solid",borderWidth:"1px",position:"absolute",top:0,bottom:0,right:0,left:0},startFrom:b(window),animation:{easeFunction:"swing",speed:500},multiple:{simultaneous:true,interval:800}}})(jQuery);function copyToClipboard(b){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b)}else{if(navigator.userAgent.indexOf("Opera")!=-1){window.location=b}else{if(window.netscape){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(g){mAlert("被浏览器拒绝！\n请在浏览器地址栏输入'about:config'并回车\n然后将'signed.applets.codebase_principal_support'设置为'true'")}var d=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!d){return}var c=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!c){return}c.addDataFlavor("text/unicode");var h=new Object();var a=new Object();var h=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);var k=b;h.data=k;c.setTransferData("text/unicode",h,k.length*2);var f=Components.interfaces.nsIClipboard;if(!d){return false}d.setData(c,null,f.kGlobalClipboard);mAlert("复制成功")}}}}var newMessageRemind={_step:0,_actived:true,_title:document.title,_timer:null,show:function(a){var a=a||"通知";var b=newMessageRemind._title.replace("【　　　】","").replace("【新"+a+"】","");newMessageRemind._timer=setTimeout(function(){newMessageRemind.show(a);newMessageRemind._step++;if(newMessageRemind._step==3){newMessageRemind._step=1}if(newMessageRemind._step==1){document.title="【　　　】"+b}if(newMessageRemind._step==2){document.title="【新"+a+"】"+b}},800);return[newMessageRemind._timer,newMessageRemind._title]},clear:function(){clearTimeout(newMessageRemind._timer);document.title=newMessageRemind._title}};jQuery.cookie=function(d,e,b){if(arguments.length>1&&String(e)!=="[object Object]"){b=jQuery.extend({},b);if(e===null||e===undefined){b.expires=-1}if(typeof b.expires==="number"){var g=b.expires,c=b.expires=new Date();c.setDate(c.getDate()+g)}e=String(e);return(document.cookie=[encodeURIComponent(d),"=",b.raw?e:encodeURIComponent(e),b.expires?"; expires="+b.expires.toUTCString():"",b.path?"; path="+b.path:"",b.domain?"; domain="+b.domain:"",b.secure?"; secure":""].join(""))}b=e||{};var a,f=b.raw?function(h){return h}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)").exec(document.cookie))?f(a[1]):null};function jb(b){var a=mAlert('<textarea id="pnl_jubao" style="width:370px;height:60px;"></textarea>',"填写举报原因",function(){var c=jQuery.trim(jQuery("#pnl_jubao").val());if(""==c){return"请填写举报原因！"}else{var d=b+" 举报原因："+c;jQuery.post("/ajax/ajax_msg.php",{a:"jubao",c:d},function(e){if(e.ret==1){mTinyAlert("举报成功")}else{mTinyAlert("举报失败")}},"json")}})}function mf(b){var b=$.extend(mf.settings,b);var a=$("<div class='"+b.baseCLS+"'>"+b.content+"</div>").appendTo($("body")).css({width:b.width+"px",marginLeft:"-"+b.width/2+"px",left:"50%",zIndex:1000});a.find("."+b.closeCLS).click(function(){b.onClose?b.onClose.call(a):a.remove();$.alerts._overlay("hide")});$.alerts._overlay("show");mf.last.pnl=a;mf.last.settings=b;return a}mf.settings={content:'About mf:a simple float panel!<a class="close">close</a><br>            content:"your content",<br/>            width:your panel`s width,default is 200<br/>            zIndex:your panel`s zIndex,default is 1000<br/>            baseCLS:your panel classame,default is "mf"<br/>            closeCLS:the close action base on, default is "close"<br/><br/>            close API is: mf.close();<br/>            Css Demo:<br/>.fm{position:fixed;top:17%;}<br/>            * html .fm{position: absolute;top: expression((document.documentElement.scrollTop || document.body.scrollTop) + Math.round(17 * (document.documentElement.offsetHeight || document.body.clientHeight) / 100) + "px");}            ',width:400,zIndex:1000,baseCLS:"mf",closeCLS:"close",onClose:false};mf.close=function(){if(mf.last){mf.last.settings.onClose?mf.last.settings.onClose.call(mf.last.pnl):mf.last.pnl&&mf.last.pnl.remove()}$.alerts._overlay("hide")};mf.last={};function show_pop_html(c,b,a){$.alerts._overlay("hide");c.css("top","10%");c.css("left","50%");c.css("marginLeft","-"+b+"px");c.css("marginTop",($(window).scrollTop()+50)+"px");c.css("position","absolute");if(a){c.css("zIndex",a)}else{c.css("zIndex","1001")}$.alerts._overlay("show");c.removeClass("hide")}function close_pop_html(a){$.alerts._overlay("hide");a.addClass("hide")}function active_weng(){if(!$.cookie("SHOW_ACTIVE_WENG",{path:"/"})){var a='<div class="wengComing_close"><a id="btn_wengnew_close" title="关闭" href="javascript:;">关闭</a></div>                        <div class="wengComing">                            <a target="_blank" href="http://www.mafengwo.cn/i/914893.html">嗡嗡来了</a>                        </div>';$("body").append(a);$.alerts.overlayOpacity=0.9;$.alerts._overlay("show");$("#btn_wengnew_close").click(function(){$(this).parent().next().remove().end().remove();$.alerts._overlay("hide");$.cookie("SHOW_ACTIVE_WENG",true,{expires:1,path:"/",domain:"mafengwo.cn"})})}}function add_op_log(e,c,a,g,f,b,d,h){$.post("/ajax/ajax_logs.php",{action:"add_op_logs",type:e,key:c,subkey:a,ip:f,uid:b,uuid:d,rtime:h,params:g},null,"json")}function parse_url(b){var d=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,a=d.exec(b),e=["url","fragment","protocol",false,"username","password","host","port","pathname","querystring"],f=new Object();for(var c=0;c<e.length;c++){if(!e[c]){continue}if(a&&a[c]){f[e[c]]=a[c]}else{f[e[c]]=""}}return f}(function(a){a.fn.hoverDelay=function(c){var g={hoverDuring:350,outDuring:150,hoverEvent:function(){a.noop()},outEvent:function(){a.noop()}};var e=a.extend(g,c||{});var b,d,f=this;return a(this).each(function(){a(this).hover(function(){clearTimeout(d);b=setTimeout(function(){e.hoverEvent.apply(f)},e.hoverDuring)},function(){clearTimeout(b);d=setTimeout(function(){e.outEvent.apply(f)},e.outDuring)})})}})(jQuery);(function(a){a.mfwplugins={emotions:[{title:"大笑",file:"http://images.mafengwo.net/images/i/face/1.gif"},{title:"微笑",file:"http://images.mafengwo.net/images/i/face/2.gif"},{title:"亲亲",file:"http://images.mafengwo.net/images/i/face/3.gif"},{title:"抱抱",file:"http://images.mafengwo.net/images/i/face/4.gif"},{title:"色色",file:"http://images.mafengwo.net/images/i/face/5.gif"},{title:"好失望哟",file:"http://images.mafengwo.net/images/i/face/6.gif"},{title:"好困哦",file:"http://images.mafengwo.net/images/i/face/7.gif"},{title:"害羞",file:"http://images.mafengwo.net/images/i/face/8.gif"},{title:"酷呆了",file:"http://images.mafengwo.net/images/i/face/9.gif"},{title:"晕倒",file:"http://images.mafengwo.net/images/i/face/10.gif"},{title:"眨眼",file:"http://images.mafengwo.net/images/i/face/11.gif"},{title:"鬼脸",file:"http://images.mafengwo.net/images/i/face/12.gif"},{title:"小声点",file:"http://images.mafengwo.net/images/i/face/13.gif"},{title:"吃惊",file:"http://images.mafengwo.net/images/i/face/14.gif"},{title:"翻白眼",file:"http://images.mafengwo.net/images/i/face/15.gif"},{title:"干杯",file:"http://images.mafengwo.net/images/i/face/16.gif"},{title:"困惑",file:"http://images.mafengwo.net/images/i/face/17.gif"},{title:"啥？",file:"http://images.mafengwo.net/images/i/face/18.gif"},{title:"睡觉",file:"http://images.mafengwo.net/images/i/face/19.gif"},{title:"再见了",file:"http://images.mafengwo.net/images/i/face/20.gif"},{title:"眼泪哗哗地",file:"http://images.mafengwo.net/images/i/face/21.gif"},{title:"你好讨厌",file:"http://images.mafengwo.net/images/i/face/22.gif"},{title:"我吐",file:"http://images.mafengwo.net/images/i/face/23.gif"},{title:"怒骂",file:"http://images.mafengwo.net/images/i/face/24.gif"},{title:"闭嘴",file:"http://images.mafengwo.net/images/i/face/25.gif"},{title:"打你",file:"http://images.mafengwo.net/images/i/face/26.gif"},{title:"真的生气了",file:"http://images.mafengwo.net/images/i/face/27.gif"},{title:"超级棒",file:"http://images.mafengwo.net/images/i/face/28.gif"},{title:"不咋地",file:"http://images.mafengwo.net/images/i/face/29.gif"},{title:"魅力四射",file:"http://images.mafengwo.net/images/i/face/30.gif"},{title:"心都碎了",file:"http://images.mafengwo.net/images/i/face/31.gif"},{title:"爱",file:"http://images.mafengwo.net/images/i/face/32.gif"},{title:"吻",file:"http://images.mafengwo.net/images/i/face/33.gif"},{title:"玫瑰凋谢了",file:"http://images.mafengwo.net/images/i/face/34.gif"},{title:"玫瑰盛开了",file:"http://images.mafengwo.net/images/i/face/35.gif"},{title:"生日蛋糕",file:"http://images.mafengwo.net/images/i/face/36.gif"},{title:"礼物",file:"http://images.mafengwo.net/images/i/face/37.gif"},{title:"苹果",file:"http://images.mafengwo.net/images/i/face/38.gif"},{title:"西瓜",file:"http://images.mafengwo.net/images/i/face/39.gif"},{title:"咖啡",file:"http://images.mafengwo.net/images/i/face/40.gif"},{title:"足球",file:"http://images.mafengwo.net/images/i/face/41.gif"},{title:"握手",file:"http://images.mafengwo.net/images/i/face/42.gif"},{title:"星星",file:"http://images.mafengwo.net/images/i/face/43.gif"},{title:"精灵",file:"http://images.mafengwo.net/images/i/face/44.gif"},{title:"小丑",file:"http://images.mafengwo.net/images/i/face/45.gif"},{title:"大怒",file:"http://images.mafengwo.net/images/i/face/46.gif"},{title:"生病了",file:"http://images.mafengwo.net/images/i/face/47.gif"},{title:"小可爱",file:"http://images.mafengwo.net/images/i/face/48.gif"},{title:"小心非典",file:"http://images.mafengwo.net/images/i/face/49.gif"},{title:"嘴馋了",file:"http://images.mafengwo.net/images/i/face/50.gif"},{title:"警察",file:"http://images.mafengwo.net/images/i/face/51.gif"},{title:"抓狂了",file:"http://images.mafengwo.net/images/i/face/52.gif"},{title:"不爽",file:"http://images.mafengwo.net/images/i/face/53.gif"},{title:"汗",file:"http://images.mafengwo.net/images/i/face/54.gif"},{title:"思考中",file:"http://images.mafengwo.net/images/i/face/55.gif"},{title:"见钱眼开",file:"http://images.mafengwo.net/images/i/face/56.gif"},{title:"呲牙咧嘴",file:"http://images.mafengwo.net/images/i/face/57.gif"},{title:"晕头转向",file:"http://images.mafengwo.net/images/i/face/58.gif"},{title:"好好爱你哦",file:"http://images.mafengwo.net/images/i/face/59.gif"},{title:"猪头",file:"http://images.mafengwo.net/images/i/face/60.gif"},{title:"便便",file:"http://images.mafengwo.net/images/i/face/61.gif"},{title:"月亮",file:"http://images.mafengwo.net/images/i/face/62.gif"},{title:"音乐",file:"http://images.mafengwo.net/images/i/face/63.gif"},{title:"饭",file:"http://images.mafengwo.net/images/i/face/64.gif"},{title:"真衰",file:"http://images.mafengwo.net/images/i/face/65.gif"},{title:"偷笑",file:"http://images.mafengwo.net/images/i/face/66.gif"},{title:"下雨",file:"http://images.mafengwo.net/images/i/face/67.gif"},{title:"猫猫",file:"http://images.mafengwo.net/images/i/face/68.gif"},{title:"狗狗",file:"http://images.mafengwo.net/images/i/face/69.gif"},{title:"骷髅",file:"http://images.mafengwo.net/images/i/face/70.gif"},{title:"书呆子",file:"http://images.mafengwo.net/images/i/face/71.gif"},{title:"太阳",file:"http://images.mafengwo.net/images/i/face/72.gif"},{title:"邮件",file:"http://images.mafengwo.net/images/i/face/73.gif"},{title:"帅帅男孩",file:"http://images.mafengwo.net/images/i/face/74.gif"},{title:"妩媚女孩",file:"http://images.mafengwo.net/images/i/face/75.gif"},{title:"药丸",file:"http://images.mafengwo.net/images/i/face/76.gif"},{title:"鄙视",file:"http://images.mafengwo.net/images/i/face/77.gif"},{title:"烧香",file:"http://images.mafengwo.net/images/i/face/78.gif"}],callusers:{},buildGotop:function(){if(a(".m-gotopbtn").size()>0){return false}a('<div class="m-gotopbtn"><a href="javascript:void(0);" hidefocus="true" title="飞回顶部" rel="nofollow"></a></div>').find("a").bind("click",function(){a("html,body").animate({scrollTop:0},500)}).end().appendTo(a("body"));a(window).bind("scroll",function(){if(a(document).scrollTop()>500){if(a(".m-gotopbtn a").position().top==100){a(".m-gotopbtn a").animate({top:-95},300)}}else{if(a(".m-gotopbtn a").position().top==-95){a(".m-gotopbtn a").animate({top:100},300)}}})},showClosing:function(e,h,p,l){if(e>=h){return}var k=new Date(e),c=new Date(h),g=k.getFullYear()+"."+(k.getMonth()+1)+"."+k.getDate(),n=c.getFullYear()+"."+(c.getMonth()+1)+"."+c.getDate(),f=k.getHours()+":"+k.getMinutes(),b=c.getHours()+":"+c.getMinutes(),d,m;d=g+" "+f;if(g==n){m=b}else{m=n+" "+b}l=(undefined!=l&&null!=l)?l:"确定";if("function"==typeof p){p=function(){p()}}else{l="返回首页";p=function(){location.href="/"}}mAlert('<div class="weihu">'+d+" 至 "+m+"</div>","",p,-1,true);a("#popup_ok").val(l)}};a.mfwfeed={keys:{weibo:"wb",qzone:"qz",qweibo:"qt",renren:"rr"},types:{type_w:"weng",type_ap:"a_piblic",type_ar:"a_reply",type_ac:"activity",type_f:"feed"},addFeedTask:function(l,k,f,d,b,e,h,c,m){if("undefined"==typeof(c)||null==typeof(c)||""==c){c=location.href}var g={key:l,title:k,content:f,image:d,url:b,comment:e,type:h};a.post("/ajax/ajax_user_task.php",{act:"add_task",type:"sf",data:a.toJSON(g),url:c},function(n){if("function"==typeof m){m()}},"json")},manageFeedTask:function(b,c){if("undefined"==typeof(b)||null==typeof(b)||""==b){b=location.href}a.post("/ajax/ajax_user_task.php",{act:"manage_task",type:"sf",url:b},function(e){if("function"==typeof c){c(e)}else{if(e.no==1){mAlert("分享成功")}else{mAlert("分享失败")}}})}}})(jQuery);jQuery(function(){});String.prototype.showStr=function(a,b){var d="";var e=0;var c=false;for(var h=0,g=this.length;h<g;h++){var k=this.charAt(h);var f=0;if(escape(k).length>4){f=2}else{f=1}if(e+f>a){if(h!==g){c=true}break}else{d+=k;e+=f}}if(!!b&&c){while((e+b.length)>a){var l=d.split("");var m=l.pop();if(escape(m).length>4){e-=2}else{e--}d=l.join("")}d+=b}return d};if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx,escapable,gap,indent,meta,rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function get_connect_share_js(e,h,f,d,c){var g="";if(e=="sina"){if("object"===typeof f){f=f.sina}if(f!=""){h=f.substr(0,140)}var b="http://service.weibo.com/share/share.php?appkey=82015185&title="+encodeURIComponent(h)+"&pic="+encodeURIComponent(c)+"&url="+encodeURIComponent(d)+"&ralateUid=1730714982";g="window.open('"+b+"','_blank','scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes');"}else{if(e=="renren"||e=="xiaonei"){if("object"===typeof h){h=h.renren}if("object"===typeof f){f=f.renren}var a={resourceUrl:d,pic:c,title:h,description:f};shareClick(a)}else{if(e=="qzone"||e=="qq"){if("object"===typeof h){h=h.qq}if("object"===typeof f){f=f.qq}g="window.open('http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?title="+encodeURIComponent(h)+"&summary="+encodeURIComponent(f)+"&pics="+encodeURIComponent(c)+"&site="+encodeURIComponent("蚂蜂窝")+"&url="+encodeURIComponent(d)+"','_blank','scrollbars=no,width=600,height=450,left=75,top=20,status=no,resizable=yes');"}else{return false}}}return g}function shareClick(a){rrShareOnclick(a)}var o=$({});$.subscribe=function(){o.bind.apply(o,arguments)};$.unsubscribe=function(){o.unbind.apply(o,arguments)};$.publish=function(){o.trigger.apply(o,arguments)};var cookieHandler={key:"_YWF_BROWSE_HIST_",get:function(){var cookieStr=$.cookie(cookieHandler.key),cookieArr;if(cookieStr){cookieArr=eval("("+cookieStr+")");return cookieArr}return false},set:function(h,g){var f=cookieHandler.get()||[],e=-1,a="";for(var c=0;c<f.length;c++){var d=f[c];if(h==d.id){e=c;break}}if(f.length>0){if(e>=0){Array.prototype.splice.call(f,e,1)}else{if(f.length==3){Array.prototype.shift.call(f)}}}Array.prototype.push.call(f,{id:h,title:g});for(var b=0;b<f.length;b++){var d=f[b];f[b]='{"id":"'+d.id+'","title":"'+d.title+'"}'}a="["+f.join(",")+"]";$.cookie(cookieHandler.key,a)},assemble:function(){var c=cookieHandler.get(),b="";for(var a=0;a<c.length;a++){var d=c[a]["title"].length>12?c[a]["title"].substr(0,12)+"...":c[a]["title"];b+='<li><a title="'+c[a]["title"]+'" target="_blank" href="/sales/'+c[a]["id"]+'.html">'+d+"</a></li>"}return b},clear:function(){$.cookie(cookieHandler.key,null)}};function share_weibo(e,d,c,b){var a="http://service.weibo.com/share/share.php?title="+encodeURIComponent(e)+"&pic="+encodeURIComponent(c)+"&url="+encodeURIComponent(b)+"&ralateUid=3120321513&rnd=1393998152805";window.open(a,"_blank","scrollbars=no,width=600,height=480,left=75,top=20,status=no,resizable=yes")}var Timer=function(b,a){this.dom=b;this.target=a};Timer.fn=Timer.prototype;Timer.fn.zero=function(a){var a=parseInt(a,10);if(a>0){if(a<=9){a="0"+a}return String(a)}else{return"00"}};Timer.fn.start=function(c){var b=(new Date()).getTime();var a=this;$.getJSON("/sales/ajax.php",{act:"GetTime"},function(e){if(e.ret==1){var g=(new Date()).getTime();var d=parseInt(e.msg)+Math.floor(g-b);var f=g-d;a.target=a.target+f;setInterval(function(){var h=a.caculate.call(a);$.publish("change-time",h)},1000)}})};Timer.fn.caculate=function(){var b=new Date(),d=Math.round((this.target-b.getTime())/1000);var e={sec:"00",mini:"00",hour:"00",day:"00"};if(d>0){e.sec=this.zero(d%60);e.mini=Math.floor((d/60))>0?this.zero(Math.floor((d/60))%60):"00";var a=this.dom.day=="plus"?Math.floor((d/3600)):Math.floor((d/3600))%24;e.hour=Math.floor((d/3600))>0?this.zero(a):"00";e.day=Math.floor((d/86400))>0?this.zero(Math.floor((d/86400))%30):"00"}for(var c in e){var f=$(this.dom[c]);f.text(e[c])}return e};var YWFCollect=function(){};YWFCollect.fn=YWFCollect.prototype;YWFCollect.fn.collect=function(c,a){if(window.__mfw_uid===0){show_login();return}var b={act:"AddCollect",sales_id:c};$.post("/sales/ajax.php",b,function(d){if(a){a()}},"json")};var cc=new YWFCollect();$(function(){$(".extra-side>li>.es-icon").hover(function(){$(this).siblings(".es-txt").fadeIn()},function(){var a=$(this);window.shareTimer=setTimeout(function(){a.siblings(".es-txt").fadeOut()},300)}).closest(".extra-side").find(".es-backTop>.es-icon").bind("click",function(){$(window).scrollTop(0)});$("body").delegate(".extra-side>li>.es-txt","mouseenter",function(){clearTimeout(window.shareTimer)});$("body").delegate(".extra-side>li>.es-txt","mouseleave",function(){$(this).fadeOut()});$(".FeedBackBtn").hide();$("#btn_helper").bind("click",function(){if(parseInt($(this).data("state"))>0){$("#helper_info_tips, #popup_layer").fadeIn()}else{$("#helper_info, #popup_layer").fadeIn()}});$(".close-btn").bind("click",function(){$("#helper_info,#helper_info_tips, #popup_layer").fadeOut();$("#helper_form input:text").each(function(){$(this).placeholder({holderContent:$(this).data("ph"),holderColor:"#999999"})});$("#ipt_phone").data("valid",0);$("#tip_sending, #ipt_valid, #tip_success,#btn_prebook_success").hide();$("#btn_valid_phone,#btn_prebook").show()});$("body").delegate("#submit_helper","click",function(){if(window.__mfw_uid===0){show_login();return}var c=$(this),e=$("#ipt_name"),d=$("#ipt_email_1"),a=$("#ipt_phone");var b=new RegExp("^([A-Z0-9a-z_-])+@([a-z0-9A-Z_-])+((\\.([a-zA-Z])+){1,2})$");var f={};if(c.data("lock")){return}if($.trim(e.val()).length==0||e.val()==e.data("ph")){mTinyAlert("请输入正确的姓名！");return}if($.trim(d.val()).length==0||d.val()==d.data("ph")||!b.test($.trim(d.val()))){mTinyAlert("请输入正确的邮箱！");return}if($.trim(a.val()).length==0||a.val()==a.data("ph")){mTinyAlert("请输入正确的手机号！");return}if(a.data("valid")!=2){mTinyAlert("请验证您的手机号！");return}f.act="AddSalesUser";f.order_name=$.trim(e.val());f.order_phone=$.trim(a.val());f.order_email=$.trim(d.val());c.data("lock",true);$.post("/sales/ajax.php",f,function(g){if(g.ret==1){c.hide();$("#btn_prebook_success").show();setTimeout(function(){$(".close-btn").trigger("click");$("#btn_helper").data("state",1);$("#helper_info").remove()},1000)}mTinyAlert(g.msg)},"json")});$("body").delegate("#btn_valid_phone","click",function(){if(window.__mfw_uid===0){show_login();return}var b=$(this),a=$("#ipt_phone"),e=a.data("valid"),d=$("#ipt_valid"),c=$("#tip_sending"),g=$("#tip_success"),f={};if($.trim(a.val()).length!=11||isNaN($.trim(a.val()))){mTinyAlert("请输入正确的手机号");return}if(!e){f.act="SendMobileCode";f.order_phone=$.trim(a.val());$.post("/sales/ajax.php",f,function(h){if(h.ret==1){a.data("valid",1);d.show();c.show()}else{mTinyAlert(h.msg)}},"json")}else{if(e==1){if(!$.trim(d.val()).length){mTinyAlert("请输入验证码");return}f.act="VerifyMobileCode";f.order_phone=$.trim(a.val());f.order_code=$.trim(d.val());$.post("/sales/ajax.php",f,function(h){if(h.ret==1){d.hide();c.hide();b.hide();a.data("valid",2);g.show()}else{mTinyAlert(h.msg)}},"json")}else{return}}});$("body").delegate("#ipt_phone","change",function(){var a=$(this),b=a.data("orignal");$("#tip_sending,#tip_success").hide();if(a.val()==b){a.data("valid",2);$("#btn_valid_phone").hide()}else{a.data("valid",0);$("#btn_valid_phone").show()}});$("#helper_form input:text").each(function(){$(this).placeholder({holderContent:$(this).data("ph"),holderColor:"#999999"})});$("body").delegate("[data-ywfstat]","click",function(){var b=$(this).data("ywfstat"),a=$(this).data("total");if(!b){return}$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V7_"+b));if(a){$.get("/ajax/ajax_op_log_api.php?type=yiwofeng&mk="+encodeURIComponent("V7_"+a+"总数"))}});$("#btn_share_wx").bind("click",function(){$("#popup_container2").show()});$(".close-btn").bind("click",function(){$(".popup-box").hide()})});(function(b){if(b.hasSalesTrackLog){return false}if(!Date.now){Date.now=function(){return new Date().getTime()}}var f=Date.now(),g=Date.now(),l=0,d=0,c=false;var h="hidden",m=0;if(h in document){document.addEventListener("visibilitychange",a)}else{if((h="mozHidden") in document){document.addEventListener("mozvisibilitychange",a)}else{if((h="webkitHidden") in document){document.addEventListener("webkitvisibilitychange",a)}else{if((h="msHidden") in document){document.addEventListener("msvisibilitychange",a)}else{if("onfocusin" in document){document.onfocusin=document.onfocusout=a}else{window.onpageshow=window.onpagehide=window.onfocus=window.onblur=a}}}}}function a(q){var r="active",s="hide",p={focus:r,focusin:r,pageshow:r,blur:s,focusout:s,pagehide:s},n;q=q||window.event;if(q.type in p){n=p[q.type]}else{n=this[h]?"hide":"active"}e(n)}if(document[h]!==undefined){a({type:document[h]?"blur":"focus"})}$(window).on("beforeunload",function(){e("close")}).on("scroll",function(){clearTimeout(m);m=setTimeout(function(){e("scroll")},500)});$("html").on("click",function(){e("click")});function e(q){var r=k(f);var p=typeof window.Env&&typeof window.Env.uPageId?window.Env.uPageId:"";if(c){l=d+k(g)}if(q=="hide"||q=="close"){c=false;d=l}if(q=="active"||q=="open"){c=true;g=Date.now()}var n=$("<img>");n.attr("src","https://tongji.mafengwo.cn/sales/track_log.gif?eventName="+q+"&totalDuring="+r+"&activeDuring="+l+"&pageId="+p)}function k(n){return Math.floor((Date.now()-n)/1000)}e("open");b.hasSalesTrackLog=true})(window);