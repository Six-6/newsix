;(function(){var render=template.compile($('#T_Area').html());function Area(data,map,isChinese){BaseAddr.call(this,data,map);this._data=data;this.isChinese=isChinese;this.init();}
function temp(){}
temp.prototype=BaseAddr.prototype;Area.prototype=new temp();$.extend(Area.prototype,{init:function(){var self=this;var ele=$(render(self._data));var wrap=ele.find('.J_Cities');if(!self.isChinese){ele.find('.tuc-area-province-tit').remove();}
ele.attr('id',(self.isChinese?'china':'foreign')+self._data.id);this.ele=ele;this.wrap=wrap;if(self._data.list){$.each(self._data.list,function(index,addr){self.addAddr(addr);});}},getAddrIndex:function(id){var children=this.children;for(var i=0;i<children.length;i++){if(children[i]['id']===id){return i;}}
return-1;},isEmpty:function(){return this.wrap.children().length===0;},addAddr:function(data){var self=this;var wrap=this.wrap;var index;var addr;index=this.getAddrIndex(data.id);if(index===-1){addr=new Addr(data,this.map,self.isChinese);this.children.push(addr);if(window.isIndex){if(window.cityCount<4){wrap.append(addr.getEle());window.cityCount++;}}else{wrap.append(addr.getEle());}
addr.bind('add',function(){self.trigger('add');});addr.bind('remove',function(addr){if(addr){self.removeAddr(addr.id);}
self.trigger('remove');});self.trigger('add');}else{addr=this.children[index];if(data.list){addr.addSpots(data.list);}}},addAddrs:function(list){var self=this;if(list){$.each(list,function(index,addr){self.addAddr(addr);});}},removeAddr:function(id){var index=this.getAddrIndex(id);var spot;if(index!==-1){spot=this.children[index];this.children.splice(index,1);spot.destory();}}});window.Area=Area;})();