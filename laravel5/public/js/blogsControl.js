jQuery(function(){jQuery.fn.calendar=function(a){var b=jQuery.fn.calendar;b.init();var c=function(a){var c=jQuery(b.target);a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("-");c.val(a);c.attr("selectedvalue",a);if(c.data("calendar.options")){var e=c.data("calendar.options").callback;e&&e(a)}
if(c=c.data("calendar.next"))/\d/.test(c.val())||c.val(""),c.focus()};return this.data("calendar.options",a||{}).each(function(){var a=jQuery(this),f=a.attr("date")?jQuery("#"+a.attr("date")):null;f&&(f.data("calendar.next",jQuery(this)),a.data("calendar.prev",f));b.register(this,c)})};jQuery.fn.calendar.init=function(){var a=jQuery.fn.calendar,b=function(a){return a&&a.length?(a=Date.parse(a.val().replace(/-/g,"/")))&&!isNaN(a)?new Date(a):null:null},c=function(c){switch(a.state+""+c){case"01":var f=a.target;a.frame.opt(f.data("calendar.options"));a.frame.set(b(f)||new Date,[b(f),b(f.data("calendar.prev"))]);a.frame.show(f);break;case"21":a.target[0].focus();break;case"10":case"20":a.frame.hide()}
a.state=c};a.init=jQuery.noop;a.target=null;a.state=0;a.frame=new a.Frame;a.register=function(b,f){jQuery(b).focus(function(){a.target&&a.target[0]!=this&&c(0);a.target=jQuery(this);c(1)}).blur(function(){1==a.state&&c(0)}).data("calendar.onclick",f)};a.frame.onclick=function(b){setTimeout(function(){a.target.data("calendar.onclick")(b)},20);c(0)};a.frame.container.hover(function(){c(2)},function(){2==a.state&&c(1)})};jQuery.fn.calendar.Frame=function(){this.container=jQuery('<div id="calendar" class="gs-date" style="display:none"><div id="datelist0" class="date-list"></div><div id="datelist1" class="date-list"></div><a id="calendar-lastmonth">&lt;&lt;</a><a id="calendar-nextmonth">&gt;&gt;</a></div>').appendTo(document.body);this.container.css({left:-1E3,top:-1E3,display:"block"});this.width=this.container.outerWidth();var a=this;a.units=jQuery("#datelist0, #datelist1").map(function(){var b=new jQuery.fn.calendar.Unit(this);b.onclick=function(){a.onclick.apply(a,arguments)};return b});jQuery("#calendar-lastmonth, #calendar-nextmonth").click(function(b){a.navigate(/next/.test(this.id)?1:-1)})};jQuery.fn.calendar.Frame.prototype={opt:function(a){jQuery.each(this.units,function(){delete this.options;this.options=jQuery.extend({},this.options,a)})},set:function(a,b){var c=new Date(a),d=new Date(c.getFullYear(),c.getMonth(),1);jQuery.each(this.units,function(){this.set(d.getFullYear(),d.getMonth());d.setMonth(d.getMonth()+1)});b&&(this.hilits=b);jQuery.each(this.hilits||[],jQuery.proxy(function(a,b){b&&jQuery.each(this.units,function(a,c){c.hilit(b)})},this))},navigate:function(a){var b=this.units[0].year;a=this.units[0].month+a*this.units.length;12<=a?(++b,a-=12):0>a&&(--b,a+=12);this.set(new Date(b,a,1))},show:function(a){var b=jQuery(a).offset();b.right=b.left+jQuery(a).outerWidth();b.bottom=b.top+jQuery(a).outerHeight();a=document.documentElement;var c=a.scrollLeft;this.container.css({left:b.left+this.width>a.scrollLeft+a.offsetWidth&&b.right-this.width>c?b.right-this.width:b.left,top:b.bottom,display:"block"})},hide:function(){this.container.css("display","none")},onclick:jQuery.noop};jQuery.fn.calendar.Unit=function(a,b){for(var c=jQuery(a),d=["<label></label>","<dl>"],f=0,e=this.character.weekday;7>f;++f)
d.push('<dt class="week',f,'">',e.charAt(f),"</dt>");d.push("<dd>");for(f=0;42>f;++f)
d.push(31>f?"<span>"+(f+1)+"</span>":'<span class="foretime"></span>');d.push("</dd>","</dl>");c.html(d.join("")).click(jQuery.proxy(this,"click")).mouseover(jQuery.proxy(this,"mouseover")).mouseout(jQuery.proxy(this,"mouseout"));this.label=c.children("label");this.box=c.find("dd");this.blanks=this.box.find("span.foretime");this.numbers=this.box.find("span:not(.foretime)")};jQuery.fn.calendar.Unit.prototype={character:{y:"\u5e74",m:"\u6708",weekday:"\u65e5\u4e00\u4e8c\u4e09\u56db\u4e94\u516d"},options:{filter:function(a,b){return a>=b}},set:function(a,b){this.year=a;this.month=b;this.label.html(this.year+this.character.y+(this.month+1)+this.character.m);var c=(new Date(this.year,this.month+1,0)).getDate();this.numbers.slice(27,c).css("visibility","visible");this.numbers.slice(c).css("visibility","hidden");c=(new Date(this.year,this.month,1)).getDay();this.blanks.slice(0,c).prependTo(this.box);this.blanks.slice(c).appendTo(this.box);this.today&&(this.today.removeClass("today"),this.today=null);var c=new Date,d=new Date(c.getFullYear(),c.getMonth(),c.getDate());this.year==d.getFullYear()&&this.month==d.getMonth()&&(this.today=this.numbers.eq(d.getDate()-1),this.today.addClass("today"));var f=new Date(this.year,this.month,1),e=this.options.filter;"no"!=jQuery.fn.calendar.target.data("calendar.options").foretime&&this.numbers.each(function(a){f.setDate(a+1);jQuery(this).toggleClass("foretime",!e(f,d))});this.current&&this.current.removeClass("current");this.current=jQuery()},hilit:function(a){a.getFullYear()==this.year&&a.getMonth()==this.month&&(a=this.numbers.eq(a.getDate()-1),this.current.push(a.addClass("current")[0]))},click:function(a){a=jQuery(a.target);var b=this.numbers.index(a);0<=b&&!a.hasClass("foretime")&&(this.current.push(a.addClass("current")[0]),this.onclick(new Date(this.year,this.month,b+1)))},mouseover:function(a){a=jQuery(a.target);a.is("span")&&!a.hasClass("foretime")&&a.addClass("hover")},mouseout:function(a){a=jQuery(a.target);a.hasClass("hover")&&a.removeClass("hover")},onclick:jQuery.noop}}),function(a){var b,c,d,f,e,g,h,l,k,r,q,p=Array.prototype.slice,s=Object.prototype.hasOwnProperty;a=this.lvping||(this.lvping={});a.debug=!1;a.global=this;a.require=function(b){if(a.debug&&!a.resolve(b))
return a.error(""+b+" required but not found")};a.provide=function(b){if(a.debug)
return a.log(""+b+" provided")};a.define=function(b,c){var d,e,f,g,h,l;h=b.split(".");"lvping"!==h.shift()&&a.error('name must start with "lvping."');f=h.pop();d=a;e=0;for(l=h.length;e<l;e++)
g=h[e],d.hasOwnProperty(g)?"object"!==a.type(d[g])&&a.error('invalid namespace "lvping.'+h.slice(0,e+1||9E9).join(".")+'"'):d[g]={},d=d[g];d.hasOwnProperty(f)&&a.warn('conflicting name "'+b+'"');return d[f]=c};a.alias=function(){var a,b,c,d,e,f;c=arguments[0];d=arguments[1];b=3<=arguments.length?p.call(arguments,2):[];e=0;for(f=b.length;e<f;e++)
a=b[e],c[a]=c[d];return c};a.resolve=function(b){var c;b=b.split(".");for(c=a.global;b.length&&c;)
c=c[b.shift()];return c};a.type=function(a){return null===a?"null":void 0===a?"undefined":Object.prototype.toString.call(a).match(/\w+/g).pop().toLowerCase()};r="String Number Boolean Array Function Object Null Undefined".split(" ");c=function(b,c){return a["is"+b]=function(b){return c===a.type(b)}};h=0;for(l=r.length;h<l;h++)
q=r[h],k=q.toLowerCase(),c(q,k);a.extend=function(){var b,c,d,e,f,g,h,l;e=1<=arguments.length?p.call(arguments,0):[];b=a.isBoolean(e[0])&&e.shift();f=e.shift();h=0;for(l=e.length;h<l;h++)
if(d=e[h])
for(c in d)
s.call(d,c)&&(g=d[c],b&&$.isPlainObject(g)&&(g=a.extend(!0,{},g)),f[c]=g);return f};a.merge=function(){var b,c;c=1<=arguments.length?p.call(arguments,0):[];b=a.isBoolean(c[0])&&c.shift();return a.extend.apply(a,[b,{}].concat(p.call(c)))};a.proxy=function(){var b,c,d;d=arguments[0];c=arguments[1];b=3<=arguments.length?p.call(arguments,2):[];"array"!==a.type(c)&&(c=[c]);return function(){var e,f,g,h;e=1<=arguments.length?p.call(arguments,0):[];e=b.concat(e);g=0;for(h=c.length;g<h;g++)
f=c[g],"string"===typeof f&&(f=d[f]),e=f.apply(d,e||[]),g===c.length-1||"array"===a.type(e)||(e=[e]);return e}};a.mixin=function(){var b,c,d,e,f,g,h,l;f=arguments[0];d=2<=arguments.length?p.call(arguments,1):[];h=0;for(l=d.length;h<l;h++){c=d[h];b=!1;for(e in c)
s.call(c,e)&&(g=c[e],"init"===e?b=g:f[e]=g);"function"===a.type(b)&&b.call(f)}
return f};a.log=function(){var b,c;b=1<=arguments.length?p.call(arguments,0):[];if(a.debug&&"undefined"!==typeof console&&null!==console&&null!=(c=console.log)&&c.apply)
return console.log.apply(console,["lvping.log: "].concat(p.call(b)))};a.warn=function(){var b,c;b=1<=arguments.length?p.call(arguments,0):[];if(a.debug&&"undefined"!==typeof console&&null!==console&&null!=(c=console.warn)&&c.apply)
return console.warn.apply(console,["lvping.warn: "].concat(p.call(b)))};a.error=function(a){throw"lvping.error: "+a;};a.hasOwn=function(a,b){return a.hasOwnProperty(b)};a.getOwn=function(a,b){if(a.hasOwnProperty(b))
return a[b]};a.getOrMake=function(a,b,c){return a.hasOwnProperty(b)?a[b]:a[b]=c(b)};a.getOrNew=function(b,c,d){return a.getOrMake(b,c,function(){return new d})};a.date={format:function(a,b){var c;null==b&&(b=!1);c=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("-");return b?c.replace(/\b(\d)\b/g,"0$1"):c},parse:function(a){a=Date.parse(a.replace(/-/g,"/"));return isNaN(a)?null:new Date(a)}};a.fn={noop:function(){},bind:function(){var a,b,c;c=arguments[0];b=arguments[1];a=3<=arguments.length?p.call(arguments,2):[];return function(){var d;d=1<=arguments.length?p.call(arguments,0):[];return c.apply(b,a.concat(d))}},pass:function(){var a,b;b=arguments[0];a=2<=arguments.length?p.call(arguments,1):[];return function(){var c;c=1<=arguments.length?p.call(arguments,0):[];return b.apply(this,a.concat(c))}},equal:function(a,b){return a===b},equalTo:function(a){return function(b){return a===b}}};a.array={make:function(b){var c,d,e,f;if(a.isArray(b))
return b;f=[];d=0;for(e=b.length;d<e;d++)
c=b[d],f.push(c);return f},forEach:function(a,b,c){var d,e,f;null==c&&(c=null);d=0;for(f=a.length;d<f;d++)
e=a[d],b.call(c,e,d,a);return a},indexOf:function(b,c,d){var e;null==d&&(d=0);a.isFunction(c)||(c=a.fn.equalTo(c));e=b.length;0>d&&(d+=e);for(d=Math.max(d,0);d<e;){if(c(b[d],d))
return d;++d}
return-1},lastIndexOf:function(b,c,d){var e;null==d&&(d=b.length-1);a.isFunction(c)||(c=a.fn.equalTo(c));e=b.length;0>d&&(d+=e);for(d=Math.min(d,e-1);-1<d;){if(c(b[d],d))
return d;--d}
return-1}};a.string={trim:function(a){return a.replace(/^\s+|\s+$/g,"")},fill:function(b,c){var d;d=a.isFunction(c)?c:function(b){return a.getOwn(c,b,"")};return b.replace(/#\{(\w+)\}/g,function(a,b){return d(b)})}};b={};g=function(a){var b;b=a.replace(/\.|\*+/g,function(a){switch(a){case".":return"\\.";case"*":return"\\w+";default:return".*"}});a=[];a.regex=RegExp("^"+b+"$");return a};a.subscribe=function(c,d,e,f){a.getOrMake(b,c,g).push(d=["string"===typeof d?e[d]:d,e,f]);return{name:c,info:d}};a.unsubscribe=function(c){var d;d=a.getOrCreate(b,c.name);c=a.array.indexOf(d,c.info);return-1<c&&d.splice(c,1)};a.publish=function(a,c){var d,e,f,g,h;for(f in b)
if(d=b[f],d.regex.test(a))
for(g=0,h=d.length;g<h;g++)
e=d[g],e[0].call(e[1],a,c,e[2]);return null};f=function(b,c){var d;d=a.getOrNew(b,"_eventTarget_",Object);return a.getOrNew(d,c,Array)};a.eventTarget={fireEvent:function(){var a,b,c,d,e,g;b=arguments[0];a=2<=arguments.length?p.call(arguments,1):[];b=f(this,b);d=!0;e=0;for(g=b.length;e<g;e++)
c=b[e],!1===c.apply(this,a)&&(d=!1);return d},addEventListener:function(a,b){return f(this,a).push(b)},removeEventListener:function(b,c){var d,e;d=f(this,b);if(-1<(e=a.array.indexOf(d,c)))
return d.splice(e,1)}};a.alias(a.eventTarget,"fireEvent","trigger","triggerHandler");a.alias(a.eventTarget,"addEventListener","on");a.cookie={get:function(a){var b;return(b=document.cookie.match(RegExp("(^|; )"+a+"=([^;]*)")))?decodeURIComponent(b[2]):null},set:function(b,c,d){var e,f,g;null==d&&(d={});if(e=d.expires)
a.isNumber(e)?(f=new Date,e=new Date(f.getTime()+864E5*e)):a.isFunction(e.toGMTString)||(e=!1),d.expires=e&&e.toGMTString();c=""+b+"="+encodeURIComponent(c);g=["expires","path","domain","secure"];e=0;for(f=g.length;e<f;e++)
b=g[e],b in d&&(c+="; "+b+"="+d[b]);return document.cookie=c},remove:function(b,c){return a.cookie.set(b,"deleted",a.merge(c,{expires:-1}))}};d=function(b){var c,e,f,g;switch(a.type(b)){case"object":e=[];for(c in b)
s.call(b,c)&&(f=b[c],e.push(""+d(c)+":"+d(f)));return"{"+e.join(",")+"}";case"array":e=[];c=0;for(g=b.length;c<g;c++)
f=b[c],e.push(d(f));return"["+e.join(",")+"]";case"string":return e=b.replace(/["\/\\\b\f\n\r\t\u0100-\uffff]/g,function(a){var b;switch(a){case'"':return'\\"';case"/":return"\\/";case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";default:return"\\u"+(4096>(b=a.charCodeAt(0))?"0":"")+b.toString(16)}}),'"'+e+'"';case"number":case"boolean":case"null":return b+"";default:return"null"}};a.json={parse:"undefined"!==typeof JSON&&null!==JSON?JSON.parse:function(){return(new Function("return str"))()},stringify:"undefined"!==typeof JSON&&null!==JSON?JSON.stringify:d};a.Class=function(){var b;if(arguments.length)
return(b=a.Class).extend.apply(b,arguments)};e=!1;a.extend(a.Class,{setup:function(b){this.defaults=a.merge(!0,b.defaults,this.defaults);return arguments},extend:function(b,c,d){var f,g,h;"string"!==typeof b&&(h=[b,c,null],c=h[0],d=h[1],b=h[2]);d||(h=[c||{},null],d=h[0],c=h[1]);h=function(){var a;if(!e)
return(a=this.klass).newInstance.apply(a,arguments)};b&&a.define(b,h);f=this.rawInstance();g=this.prototype;a.extend(f,d,{klass:h,constructor:h,base:function(b,c){var d;return null!=(d=g[b])?d.apply(this,null!=c?c:a.array.make(arguments.callee.caller.arguments)):void 0}});a.extend(h,this,c,{fullName:b,prototype:f});f=h.setup.apply(h,[this].concat(a.array.make(arguments)));"function"===typeof h.init&&h.init.apply(h,f||[]);return h},proxy:function(){var b,c;c=arguments[0];b=2<=arguments.length?p.call(arguments,1):[];return a.proxy.apply(a,[this,c].concat(p.call(b)))},mixin:function(){var b;b=1<=arguments.length?p.call(arguments,0):[];return a.mixin.apply(a,[this.prototype].concat(p.call(b)))},newInstance:function(){var b,c;c=this.rawInstance();c.setup&&(b=c.setup.apply(c,arguments));a.isArray(b)||(b=arguments);c.init&&c.init.apply(c,b);return c},rawInstance:function(){var a;e=!0;a=new this;e=!1;return a}});c=a.Class.proxy;a.Class.callback=c;a.Class.prototype.proxy=c;a.Class.prototype.callback=c;$(function(){var a;a=$.cleanData;return $.cleanData=function(b){var c,d,e;d=0;for(e=b.length;d<e;d++)
c=b[d],null!=c&&c.length&&$(c).triggerHandler("destroyed");return a.call($,b)}});a.ajax={REQUESTQUEUE:"lvpingAjaxRequestQueue",DEFAULT:"default",requestQueue:{},_queueRequest:function(a){var b;b=a[this.REQUESTQUEUE];this.requestQueue[b]||(this.requestQueue[b]=[]);this.requestQueue[b].push(a);return this}};a.ajax.request=function(a,b){var c;"object"===typeof a&&(c=[a,void 0],b=c[0]);b=b||{};b[this.REQUESTQUEUE]=b[this.REQUESTQUEUE]||this.DEFAULT;this._queueRequest(b);$.ajax(b);return this};a.array.forEach(["get","post"],function(b){return a.ajax[b]=function(a,c,d,e){$.isFunction(c)&&(c=[e||d,c,void 0],e=c[0],d=c[1],c=c[2]);return this.request({type:b,url:a,data:c,success:d,dataType:e})}});a.ajax.getJSON=function(a,b){return this.get(a,void 0,b,"script")};a.ajax.getScript=function(a,b,c){return this.get(a,b,c,"json")};a.array.forEach("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b){return a.ajax[b]=function(a,c,d){var e;a=$(a);$.isFunction(c)&&(e=[c,void 0],d=e[0],c=e[1]);a[b](function(a,b,e){if(!c||e[this.REQUESTQUEUE]===c)
return d(a,b,e)});return this}})}.call(this,this.lvping);lvping.provide("lvping.ui.Control");(function(a){var b,c,d,f,e,g,h,l,k,r,q,p=Array.prototype.slice,s=Object.prototype.hasOwnProperty;d=function(a,b,d,e){return e?f(a,e,b,d):c(a,b,d)};c=function(a,b,c){a.jquery||(a=$(a));a.bind(b,c);return function(){a.unbind(b,c);return a=b=c=null}};f=function(a,b,c,d){a.jquery||(a=$(a));a.delegate(b,c,d);return function(){a.undelegate(b,c,d);return a=b=c=d=null}};h=function(a,b){var c;c="string"===typeof b?a[b]:b;return function(){var b;b=1<=arguments.length?p.call(arguments,0):[];return c.apply(a,[this].concat(b))}};e=function(a,b,c,e,f){return d(a,b,h(f,e),c)};l=function(b,c){var d;if(!c)
return null;d=b.data("ui");if("string"===typeof d){d=a.trim(d);"{"!==d.charAt(0)&&(d="{"+d+"}");try{d=eval("("+d+")")}catch(e){d=null}}
if(d)
return a.getOwn(d,c)};g={};q="change click contextmenu dblclick keydown keyup keypress mousedown mousemove mouseout mouseover mouseup reset resize scroll select submit focusin focusout mouseenter mouseleave".split(" ");k=0;for(r=q.length;k<r;k++)
b=q[k],g[b]=e;g.ready=function(a,b,c,d,e){return $(h(e,d))};g.subscribe=function(b,c,d,e,f){var g;g=a.subscribe(d,f.proxy(e));return function(){a.unsubscribe(g);return g=null}};b=a.Class.extend("lvping.ui.Control",{init:function(){var b,c,d,e;this.actions={};e=this.prototype;for(d in e)
s.call(e,d)&&(c=e[d],a.isFunction(c)&&(b=this.getAction_(d)))&&(this.actions[d]=b);if(this.onDocument)
return new this(document.documentElement)},isAction_:function(b){return g.hasOwnProperty(b)||a.array.indexOf(this.listensTo,-1<b)},getAction_:function(a){var b;b=a.match(/^(?:(.*?)\s)?(\w+)$/);a=b[2];return this.isAction_(a)?{selector:b[1],event:a,processor:this.processors[a]||g[a]||e}:null},defaults:{},processors:{},listensTo:{}},{setup:function(b,c){var d,e,f;d=this.klass;b.jquery&&(b=b[0]);this.type=null!=(f=d.fullName)?f.split(".").pop().toLowerCase():void 0;this.element=$(b);this.bindings_=[];this.options=a.merge(!0,d.defaults,l(this.element,this.type),c);f=d.actions;for(e in f)
s.call(f,e)&&(d=f[e],this.bindings_.push(d.processor(b,d.event,d.selector,e,this)));return this.bind(b,"destroyed",h(this,"destroy"))},bind:function(a,b,c){"string"===typeof a&&(c=[this.element,a,b],a=c[0],b=c[1],c=c[2]);return this.binder_(a,b,c)},delegate:function(a,b,c,d){"string"===typeof a&&(a=[a,b,c,this.element],b=a[0],c=a[1],d=a[2],a=a[3]);return this.binder_(a,c,d,b)},binder_:function(a,b,c,e){"string"===typeof c&&(c=h(this,c));return this.bindings_.push(d(a,b,c,e))},destroy:function(){var b,c,d,e;e=this.bindings_;c=0;for(d=e.length;c<d;c++)
b=e[c],a.isFunction(b)&&b();this.element=null;return this.destroy=a.fn.noop},find:function(a){return this.element.find(a)},publish:function(b,c){null==c&&(c=this);a.publish(b,c);return this}});b.mixin(a.eventTarget);b.processors=g}).call(this,this.lvping);var bds_config={snsKey:{tsina:"1884281261",tqq:"28709"}};$(function(){var a=[];a.push('<div id="bdshare" class="bdshare_t bdsharebuttonbox" data-tag="share_1" style="display: none;">'),a.push(' <a href="javascript:;" class="bds_qzone " data-cmd="qzone">QQ空间</a>'),a.push('<a href="javascript:;" class="bds_tsina" data-cmd="tsina">新浪微博</a>'),a.push('<a href="javascript:;" class="bds_tqq" data-cmd="tqq">腾讯微博</a>'),a.push('<a href="javascript:;" class="aaa_weixin">微信</a>');var b=$("#bdshare");0===b.length&&(b=$(a.join("")),b.appendTo(document.body)),function(){with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)]}();var c=0;$.fn.gsshare=function(a){$(this).gsbaseshare(a);},$.fn.gsbaseshare=function(a){function c(){b.hide();}
return a=$.extend({"api":"/ajax-data.php?act=share","url":location.href,"title":document.title,"pic":"http://img2.tuniucdn.com/site/images/index/logo.gif","style":"shareulbg","countArea":"em","hasCount":!1,"fixed":!1,"top":!1,"left":!1,"requestFn":null,"callback":function(){}},a),b.unbind(),b.on("click","a",function(){var c=b.data("curOpts"),f=b.data("obj"),h="";switch($(this).attr("class")){case"bds_qzone":h=0;break;case"bds_tsina":h=1;break;case"bds_tqq":h=2;break;case"aaa_weixin":h=3;break;}
if(c.hasCount){var l=f.find(c.countArea),k=parseInt(l.text(),10),k=isNaN(k)?0:k;k++,l.text(k);}
if(h!=3){return c.callback(f),"function"==typeof a.requestFn?a.requestFn(f):(l=f.attr("data-shareId"),f=f.attr("data-shareCategory"),$.post(c.api,{"shareId":l,"shareCategory":f,"toCategory":h},function(a){})),!1;}else{l=f.attr("data-shareId");f=f.attr("data-shareCategory");$.post(c.api,{"shareId":l,"shareCategory":f,"toCategory":h})}}),this.each(function(){var e=$(this),g=null;return e.hover(function(){a.fixed?b.css({"position":"fixed"}):b.css({"position":"absolute"});var c=e.offset(),f=c.top,c=c.left,g=e.height(),f=a.top||f+g+3,c=a.left||c;b.css({"top":f,"left":c}),f=e.attr("data-share-title")||a.title,c=e.attr("data-share-pic")||a.pic,g=e.attr("data-share-url")||a.url,b.attr("data","{pic:'"+c+"',text:'"+f+"',url:'"+g+"'}"),b.show();},function(){g=setTimeout(c,50),b.hover(function(){b.data("obj",e),b.data("curOpts",a),clearTimeout(g);},function(){b.hide();});}),this;});},$.fn.gslike=function(a){return a=$.extend({"type":"gl","api":"/singletravelajax/like"},a),this.each(function(){var b=$(this);b.find("span").text();var e=$(this).attr("data-id");return 0==c&&($("body").append($('<div id="gs_addone_1" class="gs_addone_1">+1</div>')),c++),$(this).on("click",function(){if(b.hasClass("a_popup_login"))return!1;var c=$(this).offset(),h=c.top,l=c.left+40,k=null;return $.ajax({"url":a.api,"type":"get","dataType":"text","async":!1,"data":{"writing":e,"tps":"h","random":Math.random().toString()},"timeout":5e4,"error":function(a){},"success":function(a){var c=b.find("span").text();"-"==a.substr(0,1)?(b.find("span").text("已喜欢"),k=window.setTimeout(function(){b.find("span").text(c),window.clearTimeout(k);},2e3)):(c++,$("#gs_addone_1").css({"opacity":1,"top":h,"left":l,"display":"block"}).animate({"top":h-30,"opacity":0},"slow"),b.find("span").text(c));}}),!1;}),this;});},$.fn.gsbaselike=function(a){return a=$.extend({"api":"/singletravelajax/like","countArea":"em","requestFn":null,"callback":function(){}},a),this.each(function(){var b=this,e=$(this);return 0==c&&($("body").append($('<div id="gs_addone_1" class="gs_addone_1">+1</div>')),c++),$(this).on("click",function(){if(!e.hasClass("click_like")&&!e.hasClass("a_popup_login")){var c=e.offset(),h=c.top,c=c.left+40,l=e.find(a.countArea),k=parseInt(l.text(),10),k=isNaN(k)?0:k;k++,$("#gs_addone_1").css({"opacity":1,"top":h,"left":c,"display":"block"}).animate({"top":h-30,"opacity":0},"slow"),l.text(k),e.addClass("click_like likeed"),e.attr("title","已喜欢"),a.callback(b),"function"==typeof a.requestFn?a.requestFn(e):(h=e.attr("data-likeId")||"",c=e.attr("data-likeCategory")||"",$.post(a.api,{"likeId":h,"likeCategory":c},function(a){}));}else if(e.hasClass("click_like")){var c=e.offset(),h=c.top,c=c.left+40,l=e.find(a.countArea),k=parseInt(l.text(),10),k=isNaN(k)?0:k;$("#gs_addone_1").html('已喜欢').css({"opacity":1,"top":h,"left":c,"display":"block"}).animate({"top":h-30,"opacity":0},"slow")}}),this;});},$.fn.gsbasecollect=function(a){return a=$.extend({"api":"/singletravelajax/favourite","countArea":"em","requestFn":null,"callback":function(){}},a),this.each(function(){var b=this,e=$(this);return 0==c&&($("body").append($('<div id="gs_addone_1" class="gs_addone_1">+1</div>')),c++),$(this).on("click",function(){if(!e.hasClass("click_collect")&&!e.hasClass("a_popup_login")){var c=e.offset(),h=c.top,c=c.left+40,l=e.find(a.countArea),k=parseInt(l.text(),10),k=isNaN(k)?0:k;k++,$("#gs_addone_1").css({"opacity":1,"top":h,"left":c,"display":"block"}).animate({"top":h-30,"opacity":0},"slow"),l.text(k),e.addClass("click_collect"),e.attr("title","已收藏"),"function"==typeof a.requestFn?a.requestFn(e):(h=e.attr("data-favouriteId")||"",c=e.attr("data-favouriteCategory")||"",a.callback(b),$.post(a.api,{"favouriteId":h,"favouriteCategory":c},function(a){}));}else if(e.hasClass("click_collect")){var c=e.offset(),h=c.top,c=c.left+40,l=e.find(a.countArea),k=parseInt(l.text(),10),k=isNaN(k)?0:k;$("#gs_addone_1").html('已收藏').css({"opacity":1,"top":h,"left":c,"display":"block"}).animate({"top":h-30,"opacity":0},"slow")}}),this;});};}),(function(a){a.fn.placeholder=function(b){if("placeholder"in document.createElement("input"))
return this;b=a.extend({incolor:"#aaa",outcolor:"#333",callback:function(){}},b);return this.each(function(){var c=a(this),d=a(this).attr("placeholder"),f=a(this).attr("value"),e={color:b.incolor};""!=f&&f!=d||a(this).val(d).css(e);c.on("focusin",function(a){c.val()==d&&c.val("");c.css({color:"#333"})});c.on("focusout",function(a){""==c.val()||c.val()==d?c.val(d).css(e):c.css({color:"#333"})});return this})}})(jQuery);swfobject=function(){function a(){if(!B){try{var a=n.getElementsByTagName("body")[0].appendChild(n.createElement("span"));a.parentNode.removeChild(a)}catch(b){return}
B=!0;for(var a=F.length,c=0;c<a;c++)
F[c]()}}
function b(a){B?a():F[F.length]=a}
function c(a){if(typeof u.addEventListener!=t)
u.addEventListener("load",a,!1);else if(typeof n.addEventListener!=t)
n.addEventListener("load",a,!1);else if(typeof u.attachEvent!=t)
s(u,"onload",a);else if("function"==typeof u.onload){var b=u.onload;u.onload=function(){b();a()}}else
u.onload=a}
function d(){var a=n.getElementsByTagName("body")[0],b=n.createElement(w);b.setAttribute("type",E);var c=a.appendChild(b);if(c){var d=0;(function(){if(typeof c.GetVariable!=t){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),m.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d){d++;setTimeout(arguments.callee,10);return}
a.removeChild(b);c=null;f()})()}else
f()}
function f(){var a=x.length;if(0<a)
for(var b=0;b<a;b++){var c=x[b].id,d=x[b].callbackFn,f={success:!1,id:c};if(0<m.pv[0]){var k=p(c);if(k)
if(!z(x[b].swfVersion)||m.wk&&312>m.wk)
if(x[b].expressInstall&&g()){f={};f.data=x[b].expressInstall;f.width=k.getAttribute("width")||"0";f.height=k.getAttribute("height")||"0";k.getAttribute("class")&&(f.styleclass=k.getAttribute("class"));k.getAttribute("align")&&(f.align=k.getAttribute("align"));for(var n={},k=k.getElementsByTagName("param"),r=k.length,q=0;q<r;q++)"movie"!=k[q].getAttribute("name").toLowerCase()&&(n[k[q].getAttribute("name")]=k[q].getAttribute("value"));h(f,n,c,d)}else
l(k),d&&d(f);else
A(c,!0),d&&(f.success=!0,f.ref=e(c),d(f))}else
A(c,!0),d&&((c=e(c))&&typeof c.SetVariable!=t&&(f.success=!0,f.ref=c),d(f))}}
function e(a){var b=null;(a=p(a))&&"OBJECT"==a.nodeName&&(typeof a.SetVariable!=t?b=a:(a=a.getElementsByTagName(w)[0])&&(b=a));return b}
function g(){return!G&&z("6.0.65")&&(m.win||m.mac)&&!(m.wk&&312>m.wk)}
function h(a,b,c,d){G=!0;J=d||null;O={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(D=k(e),H=null):(D=e,H=c);a.id=N;if(typeof a.width==t||!/%$/.test(a.width)&&310>parseInt(a.width,10))
a.width="310";if(typeof a.height==t||!/%$/.test(a.height)&&137>parseInt(a.height,10))
a.height="137";n.title=n.title.slice(0,47)+" - Flash Player Installation";d=m.ie&&m.win?"ActiveX":"PlugIn";d="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+d+"&MMdoctitle="+n.title;b.flashvars=typeof b.flashvars!=t?b.flashvars+("&"+d):d;m.ie&&(m.win&&4!=e.readyState)&&(d=n.createElement("div"),c+="SWFObjectNew",d.setAttribute("id",c),e.parentNode.insertBefore(d,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}());r(a,b,c)}}
function l(a){if(m.ie&&m.win&&4!=a.readyState){var b=n.createElement("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(k(a),b);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else
a.parentNode.replaceChild(k(a),a)}
function k(a){var b=n.createElement("div");if(m.win&&m.ie)
b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(w)[0])
if(a=a.childNodes)
for(var c=a.length,d=0;d<c;d++)
1==a[d].nodeType&&"PARAM"==a[d].nodeName||8==a[d].nodeType||b.appendChild(a[d].cloneNode(!0));return b}
function r(a,b,c){var d,e=p(c);if(m.wk&&312>m.wk)
return d;if(e)
if(typeof a.id==t&&(a.id=c),m.ie&&m.win){var f="",g;for(g in a)
a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));g="";for(var h in b)
b[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+b[h]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+g+"</object>";I[I.length]=a.id;d=p(a.id)}else{h=n.createElement(w);h.setAttribute("type",E);for(var k in a)
a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?h.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&h.setAttribute(k,a[k]));for(f in b)
b[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&(a=h,g=f,k=b[f],c=n.createElement("param"),c.setAttribute("name",g),c.setAttribute("value",k),a.appendChild(c));e.parentNode.replaceChild(h,e);d=h}
return d}
function q(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(m.ie&&m.win?(b.style.display="none",function(){if(4==b.readyState){var c=p(a);if(c){for(var d in c)"function"==typeof c[d]&&(c[d]=null);c.parentNode.removeChild(c)}}else
setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}
function p(a){var b=null;try{b=n.getElementById(a)}catch(c){}
return b}
function s(a,b,c){a.attachEvent(b,c);C[C.length]=[a,b,c]}
function z(a){var b=m.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}
function L(a,b,c,d){if(!m.ie||!m.mac){var e=n.getElementsByTagName("head")[0];e&&(c=c&&"string"==typeof c?c:"screen",d&&(K=v=null),v&&K==c||(d=n.createElement("style"),d.setAttribute("type","text/css"),d.setAttribute("media",c),v=e.appendChild(d),m.ie&&(m.win&&typeof n.styleSheets!=t&&0<n.styleSheets.length)&&(v=n.styleSheets[n.styleSheets.length-1]),K=c),m.ie&&m.win?v&&typeof v.addRule==w&&v.addRule(a,b):v&&typeof n.createTextNode!=t&&v.appendChild(n.createTextNode(a+" {"+b+"}")))}}
function A(a,b){if(P){var c=b?"visible":"hidden";B&&p(a)?p(a).style.visibility=c:L("#"+a,"visibility:"+c)}}
function M(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=t?encodeURIComponent(a):a}
var t="undefined",w="object",E="application/x-shockwave-flash",N="SWFObjectExprInst",u=window,n=document,y=navigator,Q=!1,F=[function(){Q?d():f()}],x=[],I=[],C=[],D,H,J,O,B=!1,G=!1,v,K,P=!0,m=function(){var a=typeof n.getElementById!=t&&typeof n.getElementsByTagName!=t&&typeof n.createElement!=t,b=y.userAgent.toLowerCase(),c=y.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),c=c?/mac/.test(c):/mac/.test(b),b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,e=!+"\v1",f=[0,0,0],g=null;if(typeof y.plugins!=t&&typeof y.plugins["Shockwave Flash"]==w)!(g=y.plugins["Shockwave Flash"].description)||typeof y.mimeTypes!=t&&y.mimeTypes[E]&&!y.mimeTypes[E].enabledPlugin||(Q=!0,e=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),f[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),f[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=t)
try{var h=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");h&&(g=h.GetVariable("$version"))&&(e=!0,g=g.split(" ")[1].split(","),f=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)])}catch(k){}
return{w3:a,pv:f,wk:b,ie:e,win:d,mac:c}}();(function(){m.w3&&((typeof n.readyState!=t&&"complete"==n.readyState||typeof n.readyState==t&&(n.getElementsByTagName("body")[0]||n.body))&&a(),B||(typeof n.addEventListener!=t&&n.addEventListener("DOMContentLoaded",a,!1),m.ie&&m.win&&(n.attachEvent("onreadystatechange",function(){"complete"==n.readyState&&(n.detachEvent("onreadystatechange",arguments.callee),a())}),u==top&&function(){if(!B){try{n.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}
a()}}()),m.wk&&function(){B||(/loaded|complete/.test(n.readyState)?a():setTimeout(arguments.callee,0))}(),c(a)))})();(function(){m.ie&&m.win&&window.attachEvent("onunload",function(){for(var a=C.length,b=0;b<a;b++)
C[b][0].detachEvent(C[b][1],C[b][2]);a=I.length;for(b=0;b<a;b++)
q(I[b]);for(var c in m)
m[c]=null;m=null;for(var d in swfobject)
swfobject[d]=null;swfobject=null})})();return{registerObject:function(a,b,c,d){if(m.w3&&a&&b){var e={};e.id=a;e.swfVersion=b;e.expressInstall=c;e.callbackFn=d;x[x.length]=e;A(a,!1)}else
d&&d({success:!1,id:a})},getObjectById:function(a){if(m.w3)
return e(a)},embedSWF:function(a,c,d,e,f,k,l,p,n,q){var s={success:!1,id:c};m.w3&&!(m.wk&&312>m.wk)&&a&&c&&d&&e&&f?(A(c,!1),b(function(){d+="";e+="";var b={};if(n&&typeof n===w)
for(var m in n)
b[m]=n[m];b.data=a;b.width=d;b.height=e;m={};if(p&&typeof p===w)
for(var u in p)
m[u]=p[u];if(l&&typeof l===w)
for(var v in l)
m.flashvars=typeof m.flashvars!=t?m.flashvars+("&"+v+"="+l[v]):v+"="+l[v];if(z(f))
u=r(b,m,c),b.id==c&&A(c,!0),s.success=!0,s.ref=u;else{if(k&&g()){b.data=k;h(b,m,c,q);return}
A(c,!0)}
q&&q(s)})):q&&q(s)},switchOffAutoHideShow:function(){P=!1},ua:m,getFlashPlayerVersion:function(){return{major:m.pv[0],minor:m.pv[1],release:m.pv[2]}},hasFlashPlayerVersion:z,createSWF:function(a,b,c){if(m.w3)
return r(a,b,c)},showExpressInstall:function(a,b,c,d){m.w3&&g()&&h(a,b,c,d)},removeSWF:function(a){m.w3&&q(a)},createCSS:function(a,b,c,d){m.w3&&L(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=n.location.search||n.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(null==a)
return M(b);for(var b=b.split("&"),c=0;c<b.length;c++)
if(b[c].substring(0,b[c].indexOf("="))==a)
return M(b[c].substring(b[c].indexOf("=")+1))}
return""},expressInstallCallback:function(){if(G){var a=p(N);a&&D&&(a.parentNode.replaceChild(D,a),H&&(A(H,!0),m.ie&&m.win&&(D.style.display="block")),J&&J(O));G=!1}}}}();$.fn.followIt=function(a){var b=$.extend({hadFollow:!1,beforeTxt:"\u5173\u6ce8",beforeClass:"gsn-btn-3",inprocessingClass:"gsn-btn-22",inprocessingTxt:"请稍等",afterClass:"gsn-btn-22",afterTxt:"取消关注",followIt:null,cancelFollowIt:null},a);b.followIt||alert("请设置setting.followIt 作为回调");b.cancelFollowIt||alert("请设置setting.cancelFollowIt 作为回调");var c=$(this),d=function(){c.hasClass(b.beforeClass)?(c.html(b.beforeTxt),b.hadFollow=!1):c.hasClass(b.afterClass)&&(c.html(b.afterTxt),b.hadFollow=!0)};d();var f=function(a){0<$(".clue_uplayer").length&&$(".clue_uplayer").remove();var b,d=c.offset();b=b||jQuery('<div class="clue_uplayer"><div class="close_layerClue"></div><ul><li>确认取消？</li><li><input name="" id="btnNO" type="button" value="否" /><input name="" id="btnYes" type="button" value="是" /></li></ul></div>');b.css({display:"none",left:d.left+3+"px",top:d.top+18+"px"}).appendTo("body").show().find("#btnYes").bind("click",function(){a(!0);b.slideUp(function(){b.remove()})}).parent().find("#btnNO").bind("click",function(){b.slideUp(function(){b.remove()});a(!1)})};c.bind("click",function(){if(!c.hasClass("a_popup_login")){if($(this).html==b.inprocessingTxt)
return!1;b.hadFollow?f(function(a){a?(c.removeClass(b.beforeClass).removeClass(b.afterClass).addClass(b.inprocessingClass),c.html(b.inprocessingTxt),b.cancelFollowIt(function(a){a?(c.removeClass(b.inprocessingClass).addClass(b.beforeClass),c.html(b.beforeTxt),b.hadFollow=!1):(c.removeClass(b.inprocessingClass).addClass(b.afterClass),c.html(b.afterTxt))},c)):d()}):(c.removeClass(b.beforeClass).removeClass(b.afterClass).addClass(b.inprocessingClass),c.html(b.inprocessingTxt),b.followIt(function(a){a?(c.removeClass(b.inprocessingClass).addClass(b.afterClass),c.html(b.afterTxt),b.hadFollow=!0):(c.removeClass(b.inprocessingClass).addClass(b.beforeClass),c.html(b.beforeTxt))},c))}});return this};(function(a,b,c,d){var f=a(b);a.fn.lazyload=function(e){function g(){var b=0;h.each(function(){var c=a(this);if(!(l.skip_invisible&&!c.is(":visible")||a.abovethetop(this,l)||a.leftofbegin(this,l)))
if(!a.belowthefold(this,l)&&!a.rightoffold(this,l))
c.trigger("appear"),b=0;else if(++b>l.failure_limit)
return!1})}
var h=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:b,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};e&&(d!==e.failurelimit&&(e.failure_limit=e.failurelimit,delete e.failurelimit),d!==e.effectspeed&&(e.effect_speed=e.effectspeed,delete e.effectspeed),a.extend(l,e));e=l.container===d||l.container===b?f:a(l.container);0===l.event.indexOf("scroll")&&e.bind(l.event,function(){return g()});this.each(function(){var b=this,c=a(b);b.loaded=!1;c.attr("src")!==d&&!1!==c.attr("src")||c.attr("src",l.placeholder);c.one("appear",function(){this.loaded||(l.appear&&l.appear.call(b,h.length,l),a("<img />").bind("load",function(){var d=c.data(l.data_attribute);c.hide();c.is("img")?c.attr("src",d):c.css("background-image","url('"+d+"')");c[l.effect](l.effect_speed);b.loaded=!0;d=a.grep(h,function(a){return!a.loaded});h=a(d);l.load&&l.load.call(b,h.length,l)}).attr("src",c.data(l.data_attribute)))});0!==l.event.indexOf("scroll")&&c.bind(l.event,function(){b.loaded||c.trigger("appear")})});f.bind("resize",function(){g()});/iphone|ipod|ipad.*os 5/gi.test(navigator.appVersion)&&f.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&h.each(function(){a(this).trigger("appear")})});a(c).ready(function(){g()});return this};a.belowthefold=function(c,g){return(g.container===d||g.container===b?(b.innerHeight?b.innerHeight:f.height())+f.scrollTop():a(g.container).offset().top+a(g.container).height())<=a(c).offset().top-g.threshold};a.rightoffold=function(c,g){return(g.container===d||g.container===b?f.width()+f.scrollLeft():a(g.container).offset().left+a(g.container).width())<=a(c).offset().left-g.threshold};a.abovethetop=function(c,g){return(g.container===d||g.container===b?f.scrollTop():a(g.container).offset().top)>=a(c).offset().top+g.threshold+a(c).height()};a.leftofbegin=function(c,g){return(g.container===d||g.container===b?f.scrollLeft():a(g.container).offset().left)>=a(c).offset().left+g.threshold+a(c).width()};a.inviewport=function(b,c){return!a.rightoffold(b,c)&&!a.leftofbegin(b,c)&&!a.belowthefold(b,c)&&!a.abovethetop(b,c)};a.extend(a.expr[":"],{"below-the-fold":function(b){return a.belowthefold(b,{threshold:0})},"above-the-top":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-screen":function(b){return a.rightoffold(b,{threshold:0})},"left-of-screen":function(b){return!a.rightoffold(b,{threshold:0})},"in-viewport":function(b){return a.inviewport(b,{threshold:0})},"above-the-fold":function(b){return!a.belowthefold(b,{threshold:0})},"right-of-fold":function(b){return a.rightoffold(b,{threshold:0})},"left-of-fold":function(b){return!a.rightoffold(b,{threshold:0})}})})(jQuery,window,document);!function(a){a.support.transition=function(){var a;a:{a=document.createElement("bootstrap");var b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in b)
if(void 0!==a.style[c]){a=b[c];break a}
a=void 0}
return a&&{end:a}}();var b=function(b,c){this.$element=a(b);this.$indicators=this.$element.find(".carousel-indicators");this.$indicators.css({"margin-left":-this.$indicators.width()/2+"px"}).show();this.options=c;"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.prototype={cycle:function(b){b||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval));return this},getActiveIndex:function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)},to:function(b){var c=this.getActiveIndex(),e=this;if(!(b>this.$items.length-1||0>b))
return this.sliding?this.$element.one("slid",function(){e.to(b)}):c==b?this.pause().cycle():this.slide(b>c?"next":"prev",a(this.$items[b]))},pause:function(b){b||(this.paused=!0);this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0));clearInterval(this.interval);this.interval=null;return this},next:function(){if(!this.sliding)
return this.slide("next")},prev:function(){if(!this.sliding)
return this.slide("prev")},slide:function(b,c){var e=this.$element.find(".item.active"),g=c||e[b](),h=this.interval,l="next"==b?"left":"right",k="next"==b?"first":"last",r=this;this.sliding=!0;h&&this.pause();g=g.length?g:this.$element.find(".item")[k]();l=a.Event("slide",{relatedTarget:g[0],direction:l});if(!g.hasClass("active")){this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(r.$indicators.children()[r.getActiveIndex()]);b&&b.addClass("active")}));this.$element.trigger(l);var q=this;if(!l.isDefaultPrevented())
return e.fadeOut({duration:600,easing:"linear",complete:function(){a(this).removeClass("active")}}),g.fadeIn({duration:600,easing:"linear",complete:function(){a(this).addClass("active");q.sliding=!1;setTimeout(function(){q.$element.trigger("slid")},0)}}),h&&this.cycle(),this}}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var f=a(this),e=f.data("carousel"),g=a.extend({},a.fn.carousel.defaults,"object"==typeof c&&c),h="string"==typeof c?c:g.slide;e||f.data("carousel",e=new b(this,g));if("number"==typeof c)
e.to(c);else if(h)
e[h]();else
g.interval&&e.pause().cycle()})};a.fn.carousel.defaults={interval:4E3,pause:"hover"};a.fn.carousel.Constructor=b;a.fn.carousel.noConflict=function(){a.fn.carousel=c;return this};a(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c=a(this),e,g=a(c.attr("data-target")||(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,""));e=a.extend({},g.data(),c.data());var h;g.carousel(e);(h=c.attr("data-slide-to"))&&g.data("carousel").pause().to(h).cycle();b.preventDefault()})}(window.jQuery);(function(a){a.fn.setfixed=function(b){b=a.extend({color:"#fff",top:0},b);return this.each(function(){function c(){a(window).scrollTop()>s?f.css(p):f.css(q)}
function d(){g=f.offset();h=f.width();l=f.height();k=f.css("overflow");p={top:e,left:g.left,width:h,height:l,overflow:k,position:"fixed"};c()}
var f=a(this),e=parseInt(b.top),g=f.offset(),h=f.width(),l=f.height(),k=f.css("overflow"),r=null,q={position:f.css("position"),overflow:k,top:f.css("top"),left:f.css("left"),right:f.css("right")},p={top:e,left:g.left,width:h,height:l,overflow:k,position:"fixed"},s=g.top-e;a(window).scroll(function(){GS.throttle(c(),500)});a(window).resize(function(){clearTimeout(r);f.css(q);r=setTimeout(d,280)});c()})}})(jQuery);(function(a){a(function(){a("body").append(a('<div id="gsn-notice-box" style="width: 290px; text-align: center; position: fixed; left: 50%; top: 50%; margin:-20px 0 0 -145px; z-index: 100;display:none;"></div>'))});a.fn.gstips=function(b){var d=a(this);d.addClass("gsn_tips");b=a.extend({id:"gs_tips"+d.attr("id"),width:200,text:"tips...",arrow:"arrow"},b);var f={top:d.offset().top-40,left:d.offset().left-b.width/2+d.width()/2},d='<div id="'+b.id+'" class="gsn-tips-opacity" style="display:none;position:absolute;width:'+
b.width+"px;top:"+f.top+"px;left:"+f.left+'px"><div class="spanbg"></div><div class="text">'+b.text+'</div><span class="'+b.arrow+'"></span></div>';a("body").append(a(d));var e=a("#"+b.id);a(this).hover(function(){e.css(f).show()},function(){e.css(f).hide()})};a.extend({gsmessages:{callnum:0,notice:function(b){var d=this.callnum++;b=a.extend({id:d,time:"gs_notice_"+d},b);a("#gsn-notice-box").show().append(a(this._init_notice(b)));a("#gs_notice_"+d+" a").live("click",function(b){a(this).parent().fadeOut("slow")});b.timeout&&(b.time=window.setTimeout(function(){a("#gs_notice_"+b.id).fadeOut("slow");window.clearTimeout(b.time)},b.timeout))},_init_notice:function(a){return'<p class="gsn-notice" id="gs_notice_'+a.id+'">\t\t\t\t\t\t\t<a class="close" href="#">\u00d7</a>\t\t\t\t\t\t\t<span class="gsn-notice-inner">'+a.text+"</a></span>\t\t\t\t\t\t\t</p>"}}});a.fn.gspoptext=function(b){b=a.extend({css:{font:'24px/24px "Microsoft YaHei"',color:"#f00"},callbackFN:"",time:5E3,top:30},b);var d=a(this),f=d.offset(),e=d.attr("data-text"),g=a("<div>"+e+"</div>"),d={position:"absolute",left:f.left+d.width()/2+10,top:f.top},d=a.extend(b.css,d);g.appendTo(a("body")).css(d).animate({top:d.top-b.top,opacity:0},b.time/2);window.setTimeout(function(){g.remove();"function"===typeof b.callbackFN&&b.callbackFN()},b.time);return this};a.fn.gscorner=function(b){a.fn.gscorner.defaults={pos:"rb",time:0};if(!a.browser.msie||"6.0"!=a.browser.version){var d={lt:{left:80,top:20},rt:{right:80,top:20},lb:{left:80,bottom:20},rb:{right:80,bottom:20}};return this.each(function(){b=a.extend(a.fn.gscorner.defaults,b);var f=a(this),e=f.find(".close"),g=d[b.pos],h=null;clearTimeout(h);g=a.extend(g,b.css,{position:"fixed"});f.css(g);b.time&&(h=setTimeout(function(){f.hide(250)},b.time));e.click(function(){clearTimeout(h);f.hide(250)})})}};var b=function(b,d){this.$element=a(b);this.$inner=this.$element.find(".noderoll-inner");this.options=d;var f=this,e=this.$element.find(".noderoll-control"),g=e.filter("a[data-slide='prev']"),h=e.filter("a[data-slide='next']");this.$prevBtn=g;this.$nextBtn=h;g.click(function(){f.prev()});h.click(function(){f.next()});this.options.interval&&(g.removeClass("cannot-click"),f.cycle(),this.$inner.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this)));2>this.$inner.find(".item").length&&e.hide()};b.prototype={cycle:function(b){b||(this.paused=!1);this.cycleTimer&&clearInterval(this.cycleTimer);this.options.interval&&!this.paused&&(this.cycleTimer=setInterval(a.proxy(this.next,this),this.options.interval));return this},pause:function(a){a||(this.paused=!0);this.cycle(!0);clearInterval(this.cycleTimer);this.cycleTimer=null;return this},next:function(){return this.slide("next")},prev:function(){return this.slide("prev")},slide:function(b){var d=this,f=this.$inner.find(".item.active"),e=this.$inner.find(".item").length,g=f[b](),h=this.cycleTimer;h&&this.pause();this.options.interval&&!g.length&&(g="next"==b?this.$inner.find(".item").eq(0):this.$inner.find(".item").eq(e-1));if(!g.hasClass("active"))
return 0<g.length&&f.fadeOut({duration:600,easing:"linear",complete:function(){a(this).removeClass("active");activeIndex=d.$inner.find(".item").index(g);d.options.interval||(0>=activeIndex?(d.$prevBtn.addClass("cannot-click"),d.$nextBtn.removeClass("cannot-click")):activeIndex>=e-1?(d.$nextBtn.addClass("cannot-click"),d.$prevBtn.removeClass("cannot-click")):(d.$prevBtn.removeClass("cannot-click"),d.$nextBtn.removeClass("cannot-click")));g.fadeIn({duration:600,easing:"linear",complete:function(){a(this).addClass("active")}})}}),h&&this.cycle(),this}};a.fn.gsnoderoll=function(c){a.fn.gsnoderoll.defaults={time:0};return this.each(function(){c=a.extend({},a.fn.gsnoderoll.defaults,c);new b(this,c)})}})(jQuery);(function(a){a.fn.gs_tabs=function(b){b=a.extend({title:"li > a",active:"active",content:".gs-tab-content",callback:""},b);var c=a(this).find(b.title),d=[];c.each(function(b){d.push(a(this).attr("href"))});c.on("click",function(){var c=a(this).attr("href");for(i in d)
void 0!=d[i]&&a(d[i]).hide().removeClass(b.active);a(c).show().addClass(b.active);"li > a"!=b.title?a(this).siblings().removeClass(b.active).end().addClass(b.active):a(this).parent().siblings().removeClass(b.active).end().addClass(b.active);b.callback&&b.callback(this);return!1});return this}})(window.jQuery);(function(a){var b=/["\\\x00-\x1f\x7f-\x9f]/g,c={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};a.toJSON="object"===typeof JSON&&JSON.stringify?JSON.stringify:function(b){if(null===b)
return"null";var c=typeof b;if("undefined"!==c){if("number"===c||"boolean"===c)
return""+b;if("string"===c)
return a.quoteString(b);if("object"===c){if("function"===typeof b.toJSON)
return a.toJSON(b.toJSON());if(b.constructor===Date){var e=b.getUTCMonth()+1,g=b.getUTCDate(),h=b.getUTCFullYear(),c=b.getUTCHours(),l=b.getUTCMinutes(),k=b.getUTCSeconds();b=b.getUTCMilliseconds();10>e&&(e="0"+e);10>g&&(g="0"+g);10>c&&(c="0"+c);10>l&&(l="0"+l);10>k&&(k="0"+k);100>b&&(b="0"+b);10>b&&(b="0"+b);return'"'+h+"-"+e+"-"+g+"T"+c+":"+l+":"+k+"."+b+'Z"'}
if(b.constructor===Array){e=[];for(g=0;g<b.length;g++)
e.push(a.toJSON(b[g])||"null");return"["+e.join(",")+"]"}
g=[];for(h in b){c=typeof h;if("number"===c)
e='"'+h+'"';else if("string"===c)
e=a.quoteString(h);else
continue;c=typeof b[h];"function"!==c&&"undefined"!==c&&(c=a.toJSON(b[h]),g.push(e+":"+c))}
return"{"+g.join(",")+"}"}}};a.evalJSON="object"===typeof JSON&&JSON.parse?JSON.parse:function(a){return eval("("+a+")")};a.secureEvalJSON="object"===typeof JSON&&JSON.parse?JSON.parse:function(a){var b=a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(b))
return eval("("+a+")");throw new SyntaxError("Error parsing JSON, source is not valid.");};a.quoteString=function(a){return a.match(b)?'"'+a.replace(b,function(a){var b=c[a];if("string"===typeof b)
return b;b=a.charCodeAt();return"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16)})+'"':'"'+a+'"'}})(jQuery);;$(function(){hoverMask();popUpBox();clickReplyBtn();clickReportBtn();doToPoi();})
var authorName=$("#author_name").text();var convertNR=function(tag,b){var h=["<BR>","\r\n"],c=["<br/>","\n"],e=["&nbsp;"," "],d=0===b?1:0;return tag.replace(RegExp(h[d],"igm"),h[b]).replace(RegExp(c[d],"igm"),c[b]).replace(RegExp(e[d],"igm"),e[b]);return this.replace(/[\n\r]/g,tag||'<br/>')}
function hoverMask(){var super_m=$(".super");var details_pic=$(".details-pic");details_pic.each(function(i,n){$(n).hover(function(){var rightLen=(details_pic.width()-$(this).find("img").width())/2;$(this).find(".super").css("right",rightLen);$(this).find(".super").fadeIn();},function(){$(this).find(".super").fadeOut();});})
super_m.each(function(i,n){var likeBtn=$(n).find(".super_like");var shareBtn=$(n).find(".super_share");var quoteBtn=$(n).find(".super_quote");quoteBtn.click(function(){var _this=$(this);var parent=_this.parents(".details-pic").eq(0);var imgUrl=parent.find("img").attr("src");var imgId=_this.attr("ImgId");$("#commentImgId").val(imgId);var reviewBox=$("#reviewBox");$("#w_comment").val("");if($("#commentName").text()==""){$("#commentName").text(authorName);}
reviewBox.find("#imgUrl").attr("id",imgUrl);alertCommentBox();});});}
function clickReplyBtn(){$("#commentary a.author-operation").click(function(){var _this=$(this);var commentId=_this.attr("commentId");var selfflag=_this.attr("selfflag");if(selfflag=="1"){$("#updateFlag").val("1");$.ajax({url:'/singletravelajax/getcomment?commentId='+commentId,type:"POST",timeout:100000,dataType:'json',success:function(responseText){if(responseText.success){$("#h_comment").val(responseText.data);}},error:function(){}});}else{$("#updateFlag").val("0");}
$("#commentReplyId").val(commentId);alertReplyBox();})}
function clickReportBtn(){$("#commentary a.author-report").click(function(){var _this=$(this);var reportId=_this.attr("reportId");$("#comment_rply_id").val(reportId);alertReportBox();})}
function delthread(){if(confirm('确认删除游记？')){$.ajax({url:'/writethreadajax/delthread?threadId='+DETAIL_API.TravelId,type:"GET",timeout:100000,dataType:'json',success:function(responseText){if(responseText.success){alert('删除游记成功');location.href='/';}else{alert('删除游记失败，错误信息:'+responseText.msg);}},error:function(){alert('游记删除失败!');}});}}
$.fn.checkCharLength=function(errContent){var $this=$(this);$this.change(function(event){var curLength=$this.val().length;var maxlength=$this.attr('maxlength');if(curLength>maxlength){$this.val($.trim($this.val()).substr(0,maxlength)).trigger('change');return;}
$(errContent).text(maxlength-curLength).parent().toggleClass('red',curLength>maxlength);}).keyup(function(){$this.trigger('change')});if($.trim($this.val())!=''){$this.trigger('change')}}
$('#r_comment').checkCharLength('#r_limitNum');$('#w_comment').checkCharLength('.limitNum');$('#h_comment').checkCharLength('.h_limitNum');function popUpBox(){$('#popBoxPanel a.close, #popBoxPanel .comment_cancle, #dialog-overlay').click(function(){$('#dialog-overlay, .pop_box').hide();return false;});$(window).resize(function(){if(!$('#popBoxPanel .pop_box').is(':hidden'))popup();});}
function popup(){var maskHeight=$(document).height();var maskWidth=$(window).width();$('#dialog-overlay').css({height:maskHeight,width:maskWidth}).show();}
function alertCommentBox(){popup();$('#reviewBox').show();}
function alertReplyBox(){popup();$('#replyBox').show();$('#replyBox .w_comment').val("");$('#reply_w_comment').checkCharLength('.reply_limitNum');}
function alertReportBox(){popup();$('#reportBox').show();$('#reportBox .w_comment').val("");}
function JumpAnchor(divId){if(divId!=""){$("html,body").animate({scrollTop:$("#"+divId).offset().top-60},1000);}}
function doToPoi(){$(".cities").each(function(){$(this).find("a").each(function(){$(this).bind("click",function(){var anchorId=$(this).attr("anchor-id");JumpAnchor(anchorId);});});});}
(function(a){a.cookiedb=function(b){b=a.extend({"name":"cookiedb","value":"","fenge":"_","isfind":0,"maxlength":10,"expires":360},b);if(void 0===a.cookie)return window.console&&console.log("no $.cookie"),!1;var c=a.cookie(b.name);return cookieDB=null!=c?c.split(b.fenge):[],-1!=a.inArray(b.value.toString(),cookieDB)?"repeat":b.isfind?"nofound":(cookieDB.length>=b.maxlength&&cookieDB.shift(),cookieDB.push(b.value),a.cookie(b.name,cookieDB.join(b.fenge),{"expires":b.expires,"path":"/"}),"success");};})(jQuery),$(function(){function cookielike(){"0"==privateObject.CurrentUserId&&$.cookiedb({"name":"gs_link_like","value":DETAIL_API.TravelId});}"0"==privateObject.CurrentUserId&&"repeat"==$.cookiedb({"name":"gs_link_like","value":DETAIL_API.TravelId,"isfind":1})&&($(".readers .link_like").addClass("click_like").attr("title","已喜欢")),$(".link_like").gsbaselike({"api":DETAIL_API.likeUrl,"callback":function(a){cookielike();}}),$(".readers .link_share").gsbaseshare({"api":DETAIL_API.shareUrl,"hasCount":!0}),$(".details-pic .link_share").gsbaseshare({"api":DETAIL_API.shareUrl})});;function BlogsControl(){this.$reportTextarea=$('.report-textarea');this.$tripNav=$(".trip-nav");this.$blogControl=$(".blog-control");this.$addrLink=$(".addr-link");this.$addrName=$(".addr-name");this.$inputLimit=$(".input-limit");this.textAreaMax=800;this.defaultReportText='评论一下~';}
BlogsControl.prototype.init=function(){this.bindEvent();this.lazyloadImg();};BlogsControl.prototype.bindEvent=function(){var self=this;this.$tripNav.each(function(){var $this=$(this);$this.tabScroll({containerSelector:$this.parent()});});var _tripH=self.$blogControl.offset().top;var prevCha=-1;$(window).scroll(function(){var _H=$(window).scrollTop();var cha=_H-_tripH;var left=Math.floor(($(document).width()-self.$blogControl.width())/2);if(cha>0&&prevCha<0){self.$blogControl.css({'position':'fixed','top':'0','left':left,'z-index':'2'});}
if(prevCha>0&&cha<0){self.$blogControl.css({'position':'',"left":"","top":"",'z-index':''});}
prevCha=cha;})
var handler=null;$(window).scroll(function(){handler=setTimeout(function(){if(handler){clearTimeout(handler);handler=null;$(window).resize();}},100);});this.$addrName.find("a").toggle(function(){$(this).find("i").removeClass("down").addClass("up");self.$addrLink.hide();},function(){$(this).find("i").removeClass("up").addClass("down");self.$addrLink.show();});this.$reportTextarea.each(function(){$(this).keyup(function(){self._checkLength(this);});$(this).click(function(){var content=$(this).val();content=content==self.defaultReportText?'':content;if(content.length==0){$(this).val('');}}).blur(function(){$(this).val()==''?$(this).val(self.defaultReportText):'';});});};BlogsControl.prototype._checkLength=function(el){if(el.value.length>this.textAreaMax){el.value=el.value.substring(0,this.textAreaMax);}
var curr=el.value.length;this.$inputLimit.html("<em>"+curr+"</em>"+"/"+this.textAreaMax);};BlogsControl.prototype.lazyloadImg=function(){$("img").lazyload({effect:"fadeIn",failurelimit:450,threshold:300,skip_invisible:false});};var blogsControl=new BlogsControl();$(function(){blogsControl.init();})