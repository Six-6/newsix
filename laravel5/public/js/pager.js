(function($){$.fn.initPager=function(config){if(!config.showPage)
return;config.o=$(this);if(config.o.length<1)
return;if(config.o.attr('data-pager-inited')||config.o.attr('data-pager-inited')=="true")
return;config.o.attr('data-pager-inited',true);config.util={ajaxEvent:false};config.o.attr('data-curpage',1);config.o.append('<div class="page-bottom"></div>');var $inner=config.o.find('.page-bottom');if(config.totalPage<=5){for(var i=0;i<config.totalPage;i++){var offsetClass='';if(i==0)
offsetClass='page-cur firstshowing';if(i==(config.showPage-1))
offsetClass='lastshowing';$inner.append('<a class="pager-item '+offsetClass+'" href="javascript:void(0);" data-page="'+parseInt(i+1)+'">'+parseInt(i+1)+'</a>');};var $all=$inner.find('a');$all.click(function(e){var $clickedPage=$(this);if($clickedPage.hasClass('page-cur')){return;}
var clickedPage=parseInt($clickedPage.attr('data-page'));config.ajax({page:clickedPage,callback:function(data){$all.removeClass('page-cur');$inner.find('[data-page="'+clickedPage+'"]').not('.page-next').not('.page-prev').addClass('page-cur');if($clickedPage.hasClass('page-prev')||$clickedPage.hasClass('page-next'))
$clickedPage.addClass('page-cur');}});});return;}
if(config.showPage<3)
return;$inner.append('<a class="page-prev" href="javascript:void(0)" data-page="0">上一页</a>');if(config.showPage>=config.totalPage){config.showPage=config.totalPage-1;}
$inner.append('<a class="page-first" href="javascript:void(0)" data-page="1" style="display: none;">1</a>');$inner.append('<span class="page-break" style="display: none;">...</span>');for(var i=0;i<config.showPage;i++){var offsetClass='';if(i==0)
offsetClass='page-cur firstshowing';if(i==(config.showPage-1))
offsetClass='lastshowing';$inner.append('<a class="pager-item '+offsetClass+'" href="javascript:void(0);" data-page="'+parseInt(i+1)+'">'+parseInt(i+1)+'</a>');};if((config.showPage+1)<config.totalPage){$inner.append('<span class="page-break">...</span>');}
$inner.append('<a class="page-last" href="javascript:void(0)" data-page="'+config.totalPage+'">'+config.totalPage+'</a>');$inner.append('<a class="page-next" href="javascript:void(0)" data-page="2">下一页</a>');var $pager=$inner.find('.pager-item'),$first=$inner.find('.page-first'),$prev=$inner.find('.page-prev'),$next=$inner.find('.page-next'),$last=$inner.find('.page-last'),$all=$inner.find('a');$all.click(function(e){var $clickedPage=$(this);if($clickedPage.hasClass('page-cur')&&!$clickedPage.hasClass('page-next')&&!$clickedPage.hasClass('page-prev')){return;}
var clickedPage=parseInt($clickedPage.attr('data-page'));if(!(clickedPage>=1&&clickedPage<=config.totalPage)){return;}
config.ajax({page:clickedPage,callback:function(data){if($clickedPage.hasClass('lastshowing')||$inner.find('[data-page="'+clickedPage+'"]').hasClass('lastshowing')){if((config.totalPage-clickedPage)>config.showPage-2){var start=clickedPage-1;$pager.each(function(i,ele){$(ele).attr('data-page',start);$(ele).text(start);start+=1;});}else if((config.totalPage-clickedPage)<=config.showPage-2){if(config.totalPage-1!=clickedPage){var start=parseInt($inner.find('.firstshowing').attr('data-page'))+(config.totalPage-clickedPage-1);$pager.each(function(i,ele){$(ele).attr('data-page',start);$(ele).text(start);start+=1;});}}}else if($clickedPage.hasClass('firstshowing')||$inner.find('[data-page="'+clickedPage+'"]').hasClass('firstshowing')){if(clickedPage>1){var start=clickedPage-1;$pager.each(function(i,ele){$(ele).attr('data-page',start);$(ele).text(start);start+=1;});}}else if(clickedPage==1){$first.hide();if($first.next().hasClass('page-break')){$first.next().hide();}
var start=1;$pager.each(function(i,ele){$(ele).attr('data-page',start);$(ele).text(start);start+=1;});}else if(clickedPage==config.totalPage){$first.show();if($first.next().hasClass('page-break')){$first.next().show();}
var start=config.totalPage-config.showPage;$pager.each(function(i,ele){$(ele).attr('data-page',start);$(ele).text(start);start+=1;});}
var prev=clickedPage-1;if($prev.length>=1){$prev.attr('data-page',prev);}
var next=clickedPage+1;if($next.length>=1){$next.attr('data-page',next);}
$all.removeClass('page-cur');$inner.find('[data-page="'+clickedPage+'"]').not('.page-next').not('.page-prev').addClass('page-cur');if($clickedPage.hasClass('page-prev')||$clickedPage.hasClass('page-next'))
$clickedPage.addClass('page-cur');if($pager.last().attr('data-page')==parseInt(config.totalPage-1)){if($last.prev().hasClass('page-break')){$last.prev().hide();}}else{if($last.prev().hasClass('page-break')){$last.prev().show();}}
if(parseInt($pager.first().attr('data-page'))==1){$first.hide();if($first.next().hasClass('page-break')){$first.next().hide();}}else{if($first.next().hasClass('page-break')){$first.next().show();}
$first.show();}}});});};})(jQuery)