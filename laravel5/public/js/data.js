var Cache={};var dataService={getAddrs:function(callback){var ajax_param=(typeof unique_code_flag!="undefined"&&unique_code_flag)?{page_user_unique_code:page_user_unique_code}:{page_uid:page_uid};$.get('/yii.php?r=person/personpage/ajaxGetAllFootprintInfo',ajax_param,function(data){callback&&callback(data);},'json');},getProvince:function(sendData,callback){var data;if(!callback){return;}
if(Cache['province']){data=Cache['province'];}
if(!data){$.get('/yii.php?r=person/personpage/ajaxGetDistrict&usage_type=footprint',{key:40002},function(data){Cache['province']=data;callback(data);},'json');}else{callback(data);}},getCity:function(sendData,callback){var data;if(!callback){return;}
if(Cache['cities']){data=Cache['cities'][sendData];}else{Cache['cities']={};}
if(!data){$.get('/yii.php?r=person/personpage/ajaxGetDistrict&usage_type=footprint',{key:sendData},function(data){Cache['cities'][sendData]=data;callback(data);},'json');}else{callback(data);}},getCountry:function(sendData,callback){var data;if(!callback){return;}
if(Cache['countries']){data=Cache['countries'][sendData];}else{Cache['countries']={};}
if(!data){$.get('/yii.php?r=person/personpage/ajaxGetDistrict&usage_type=footprint',{key:sendData},function(data){Cache['countries'][sendData]=data;callback(data);},'json');}else{callback(data);}},getContinent:function(sendData,callback){var data;if(!callback){return;}
if(Cache['continent']){data=Cache['continent'];}
if(!data){data=[{id:'4000',name:'非洲',x:'0',y:'0'},{id:'3600',name:'欧洲',x:'0',y:'0'},{id:'3700',name:'北美洲',x:'0',y:'0'},{id:'3800',name:'南美洲',x:'0',y:'0'},{id:'3900',name:'亚洲',x:'0',y:'0'},{id:'4100',name:'大洋洲',x:'0',y:'0'}];Cache['continent']=data;callback(data);}else{callback(data);}},getSpots:function(sendData,callback){var data;if(!callback){return;}
Cache['spots']={};if(!data){$.get('/yii.php?r=person/ajax/getSpotById',{key:sendData.id,times:sendData.times,mark:1},function(data){if(data){Cache['spots'][sendData]=data;callback(data);}},'json');}else{callback(data);}},searchSpots:function(sendData,callback){$.get('/yii.php?r=person/ajax/searchSpotById',{key:sendData.id,k:sendData.k},function(data){if(data){callback(data);}},'json');},editSpot:function(sendData,callback){var csrf_token=$('#csrf_token').val();$.post('/person/addComment',{code:sendData.id,num:sendData.star,data:sendData.comment,csrf_token:csrf_token},function(data){if(data.res){callback({code:200});};if(data.csrf_token!=''){$('#csrf_token').val(data.csrf_token);};},'json');},delSpot:function(sendData,callback){$.post('/yii.php?r=person/personpage/ajaxDelFootprintInfo',{del_id:sendData.id},function(data){callback({code:200});},'json');},delVSpot:function(sendData,callback){var csrf_token=$('#csrf_token').val();$.post('/yii.php?r=person/ajax/delVSpot',{del_id:sendData.id,csrf_token:csrf_token},function(data){callback({code:200});if(data.csrf_token!=''){$('#csrf_token').val(data.csrf_token);};},'json');},addSpots:function(sendData,callback){callback({code:200});}}