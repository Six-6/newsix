$(document).ready(function(){var peopleAll=$('.all_01 a');var allPeopleItems=$('.fenlei01').find('a');var buttons=$('.J_ind_button')
selectedCat=null,selectedCatRow=null;allPeopleItems.each(function(){var ele=$(this),target=ele.attr('data-slideto'),subRow=$(target);if(ele.hasClass('checked')){selectedCatRow=subRow;selectedCat=ele;}
ele.click(function(){if(peopleAll.hasClass('checked')){peopleAll.removeClass('checked');}
selectedCatRow=subRow;selectedCat=ele;allPeopleItems.removeClass('checked');ele.addClass('checked');subRow.siblings().removeClass('checked').end().addClass('checked').find('a').addClass('checked').find(':checkbox').prop('checked',true);buttons.show();});var row=subRow,items=row.find('a'),allEle=row.find('a:eq(0)'),others=row.find('a:gt(0)');function checkAll(){var isAll=true,hasChecked=false;others.each(function(){if(!$(this).hasClass('checked')){isAll=false;}else{hasChecked=true;}});if(isAll){allEle.addClass('checked').find(':checkbox').prop('checked',true);}else{allEle.removeClass('checked').find(':checkbox').prop('checked',false);}
if(hasChecked){ele.addClass('checked');}else{ele.removeClass('checked');}}
items.each(function(){var item=$(this);if(item.find(':checkbox').prop('checked')){item.addClass('checked');}});allEle.click(function(event){var isChecked=allEle.hasClass('checked');if(isChecked){row.find('a').removeClass('checked');row.find('input').prop('checked',false);}else{row.find('a').addClass('checked');row.find('input').prop('checked',true);}});others.click(function(event){var ele=$(this),checkbox=ele.find('input'),isChecked=ele.hasClass('checked');if(isChecked){ele.removeClass('checked');checkbox.prop('checked',false);checkAll();}else{ele.addClass('checked');checkbox.prop('checked',true);checkAll();}});});function getAllParam(model){var url=[],params=[],model,peopleParam=-1;if(selectedCatRow){peopleParam=selectedCat.data('value');selectedCatRow.find('a.checked').each(function(){if($(this).find(':checkbox').val()){params.push($(this).find(':checkbox').val());}});url.push('ids='+params.join('_'));}
if(!model){model=$('.J_properties02').find('a.checked').data('value');}
url.push('firstType='+peopleParam);url.push('model='+model);return url.join('&');}
$('.J_ind_confirm').click(function(){location='?'+getAllParam();});$('.J_ind_cancle').click(function(){allPeopleItems.removeClass('checked');$('.fenlei02').find('.checked').removeClass('checked');$('.J_ind_button').hide();peopleAll.addClass('checked');});$('.J_properties02 a').click(function(){location='?'+getAllParam($(this).data('value'));});$('.all_01').click(function(){location='?firstType=-1&model='+$('.J_properties02').find('a.checked').data('value');});});