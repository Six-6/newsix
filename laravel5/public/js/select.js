;(function(){function Select(ele,option){this.option=$.extend({blankLabel:'请选择',showBlank:false,selectFirst:true},option);this.container=$(ele);this.listData=null;this.selectLabel=null;this.selecList=null;this.value=null;this.loading=false;this.init();}
$.extend(Select.prototype,{init:function(){var self=this;var container=this.container;var selectListWrap=$('<div />').addClass('tuc1-select');var selectLabel=$('<div />').addClass('tuc1-label');var selecList=$('<ul />');selecList.appendTo(selectListWrap);selectLabel.appendTo(container);selectListWrap.appendTo(container);selecList.delegate('li','click',function(){var item=$(this);var key=item.data('value');var itemName=item.text();selectListWrap.hide();self.set(key,itemName);});selectLabel.click(function(){if(selectListWrap.is(':visible')){selectListWrap.hide();}else{selectListWrap.show();}});this.selectLabel=selectLabel;this.selecList=selecList;},get:function(){return this.value;},set:function(key){if(this.loading){var option=this.getOption(key);if(option){var onchange=this.option.onchange;this.value=option.key;this.selectLabel.text(option.value);if(onchange&&$.isFunction(onchange)){onchange.call(this,option.key,option.value);}}}else{this._set=key;}},load:function(list,defalutFlag){if(defalutFlag>1){this.option.defaultOption='';this.option.selectFirst=true;}
this.buildListHtml(list);this.listData=list;this.loading=true;if(this.option.showBlank){this.listData['0']=this.option.blankLabel;}
if(this._set){this.set(this._set);this._set=void(0);}else if(this.option.defaultOption){this.set(this.option.defaultOption);}else{if(this.option.selectFirst){var i=0;for(var key in this.listData){if(key!='0'){this.set(key);if(i==0){break;}}}}else{this.set(0);}}
if(this.option.onload){this.option.onload();}},getOption:function(key){var list=this.listData;for(var k in list){if(k==key){return{key:k,value:list[k]}}}
return false;},buildListHtml:function(list){var listHTML='';if(this.option.showBlank){listHTML+='<li data-value="0">'+this.option.blankLabel+'</li>';}
for(var key in list){listHTML+='<li data-value="'+key+'">'+list[key]+'</li>';}
this.selecList.html(listHTML);}});window.Select=Select;})();